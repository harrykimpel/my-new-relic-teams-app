{"ast":null,"code":"import _isEmpty from \"lodash/isEmpty\";\nimport _filter from \"lodash/filter\";\nimport { isDebugEnabled } from '@fluentui/styles';\nimport resolveVariables from './resolveVariables';\nimport resolveStyles from './resolveStyles';\n\nvar getStyles = function getStyles(options) {\n  //\n  // To compute styles we are going through three stages:\n  // - resolve variables (siteVariables => componentVariables + props.variables)\n  // - resolve styles (with resolvedVariables & props.styles & props.design)\n  // - compute classes (with resolvedStyles)\n  // - conditionally add sources for evaluating debug information to component\n  var resolvedVariables = resolveVariables(options.displayNames, options.theme, options.props.variables, options.performance.enableVariablesCaching);\n\n  var _resolveStyles = resolveStyles(options, resolvedVariables),\n      classes = _resolveStyles.classes,\n      resolvedStyles = _resolveStyles.resolvedStyles,\n      resolvedStylesDebug = _resolveStyles.resolvedStylesDebug; // conditionally add sources for evaluating debug information to component\n\n\n  if (process.env.NODE_ENV !== 'production' && isDebugEnabled) {\n    options.saveDebug({\n      componentName: options.displayNames.join(':'),\n      componentVariables: _filter(resolvedVariables._debug, function (variables) {\n        return !_isEmpty(variables.resolved);\n      }),\n      componentStyles: resolvedStylesDebug,\n      siteVariables: _filter(options.theme.siteVariables._debug, function (siteVars) {\n        if (_isEmpty(siteVars) || _isEmpty(siteVars.resolved)) {\n          return false;\n        }\n\n        var keys = Object.keys(siteVars.resolved);\n\n        if (keys.length === 1 && keys.pop() === 'fontSizes' && _isEmpty(siteVars.resolved['fontSizes'])) {\n          return false;\n        }\n\n        return true;\n      })\n    });\n  }\n\n  return {\n    classes: classes,\n    variables: resolvedVariables,\n    styles: resolvedStyles,\n    theme: options.theme\n  };\n};\n\nexport default getStyles;","map":{"version":3,"sources":["styles/getStyles.ts"],"names":["getStyles","resolvedVariables","resolveVariables","options","classes","resolvedStyles","resolvedStylesDebug","resolveStyles","process","componentName","componentVariables","variables","componentStyles","siteVariables","siteVars","keys","Object","styles","theme"],"mappings":";;AAAA,SAAA,cAAA,QAAA,kBAAA;AAKA,OAAA,gBAAA,MAAA,oBAAA;AACA,OAAA,aAAA,MAAA,iBAAA;;AASA,IAAMA,SAAS,GAAG,SAAZA,SAAY,CAAA,OAAA,EAAoD;AACpE;AACA;AACA;AACA;AACA;AACA;AAEA,MAAMC,iBAAiB,GAAGC,gBAAgB,CACxCC,OAAO,CADiC,YAAA,EAExCA,OAAO,CAFiC,KAAA,EAGxCA,OAAO,CAAPA,KAAAA,CAHwC,SAAA,EAIxCA,OAAO,CAAPA,WAAAA,CAJF,sBAA0C,CAA1C;;AARoE,MAAA,cAAA,GAcXI,aAAa,CAAA,OAAA,EAdF,iBAcE,CAdF;AAAA,MAc5DH,OAd4D,GAAA,cAAA,CAAA,OAAA;AAAA,MAcnDC,cAdmD,GAAA,cAAA,CAAA,cAAA;AAAA,MAcnCC,mBAdmC,GAAA,cAAA,CAAA,mBAAA,CAAA,CAgBpE;;;AACA,MAAIE,OAAO,CAAPA,GAAAA,CAAAA,QAAAA,KAAAA,YAAAA,IAAJ,cAAA,EAA6D;AAC3DL,IAAAA,OAAO,CAAPA,SAAAA,CAAkB;AAChBM,MAAAA,aAAa,EAAEN,OAAO,CAAPA,YAAAA,CAAAA,IAAAA,CADC,GACDA,CADC;AAEhBO,MAAAA,kBAAkB,EAAE,OAAA,CAAST,iBAAiB,CAA1B,MAAA,EAAmC,UAAA,SAAA,EAAS;AAAA,eAAI,CAAC,QAAA,CAAUU,SAAS,CAAxB,QAAK,CAAL;AAFhD,OAEI,CAFJ;AAGhBC,MAAAA,eAAe,EAHC,mBAAA;AAIhBC,MAAAA,aAAa,EAAE,OAAA,CAASV,OAAO,CAAPA,KAAAA,CAAAA,aAAAA,CAAT,MAAA,EAA6C,UAAA,QAAA,EAAY;AACtE,YAAI,QAAA,CAAA,QAAA,CAAA,IAAuB,QAAA,CAAUW,QAAQ,CAA7C,QAA2B,CAA3B,EAAyD;AACvD,iBAAA,KAAA;AACD;;AAED,YAAMC,IAAI,GAAGC,MAAM,CAANA,IAAAA,CAAYF,QAAQ,CAAjC,QAAaE,CAAb;;AACA,YAAID,IAAI,CAAJA,MAAAA,KAAAA,CAAAA,IAAqBA,IAAI,CAAJA,GAAAA,OAArBA,WAAAA,IAAmD,QAAA,CAAUD,QAAQ,CAARA,QAAAA,CAAjE,WAAiEA,CAAV,CAAvD,EAAkG;AAChG,iBAAA,KAAA;AACD;;AAED,eAAA,IAAA;AAVa,OAAA;AAJC,KAAlBX;AAiBD;;AAED,SAAO;AACLC,IAAAA,OAAO,EADF,OAAA;AAELO,IAAAA,SAAS,EAFJ,iBAAA;AAGLM,IAAAA,MAAM,EAHD,cAAA;AAILC,IAAAA,KAAK,EAAEf,OAAO,CAACe;AAJV,GAAP;AArCF,CAAA;;AA6CA,eAAA,SAAA","sourcesContent":["import { ComponentSlotStylesResolved, ComponentVariablesObject, isDebugEnabled } from '@fluentui/styles';\n\nimport * as _ from 'lodash';\n\nimport { ComponentSlotClasses, ResolveStylesOptions, StylesContextValue } from '../styles/types';\nimport resolveVariables from './resolveVariables';\nimport resolveStyles from './resolveStyles';\n\nexport type GetStylesResult = {\n  classes: ComponentSlotClasses;\n  variables: ComponentVariablesObject;\n  styles: ComponentSlotStylesResolved;\n  theme: StylesContextValue['theme'];\n};\n\nconst getStyles = (options: ResolveStylesOptions): GetStylesResult => {\n  //\n  // To compute styles we are going through three stages:\n  // - resolve variables (siteVariables => componentVariables + props.variables)\n  // - resolve styles (with resolvedVariables & props.styles & props.design)\n  // - compute classes (with resolvedStyles)\n  // - conditionally add sources for evaluating debug information to component\n\n  const resolvedVariables = resolveVariables(\n    options.displayNames,\n    options.theme,\n    options.props.variables,\n    options.performance.enableVariablesCaching,\n  );\n  const { classes, resolvedStyles, resolvedStylesDebug } = resolveStyles(options, resolvedVariables);\n\n  // conditionally add sources for evaluating debug information to component\n  if (process.env.NODE_ENV !== 'production' && isDebugEnabled) {\n    options.saveDebug({\n      componentName: options.displayNames.join(':'),\n      componentVariables: _.filter(resolvedVariables._debug, variables => !_.isEmpty(variables.resolved)),\n      componentStyles: resolvedStylesDebug,\n      siteVariables: _.filter(options.theme.siteVariables._debug, siteVars => {\n        if (_.isEmpty(siteVars) || _.isEmpty(siteVars.resolved)) {\n          return false;\n        }\n\n        const keys = Object.keys(siteVars.resolved);\n        if (keys.length === 1 && keys.pop() === 'fontSizes' && _.isEmpty(siteVars.resolved['fontSizes'])) {\n          return false;\n        }\n\n        return true;\n      }),\n    });\n  }\n\n  return {\n    classes,\n    variables: resolvedVariables,\n    styles: resolvedStyles,\n    theme: options.theme,\n  };\n};\n\nexport default getStyles;\n"]},"metadata":{},"sourceType":"module"}