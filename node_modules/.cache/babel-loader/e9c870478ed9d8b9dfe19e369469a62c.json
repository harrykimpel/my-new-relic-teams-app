{"ast":null,"code":"import { RULE_TYPE } from 'fela-utils'; // @ts-ignore\n\nimport _Stylis from 'stylis'; // `stylis@3` is a CJS library, there are known issues with them:\n// https://github.com/rollup/rollup/issues/1267#issuecomment-446681320\n\nvar Stylis = _Stylis.default || _Stylis; // We use Stylis only for vendor prefixing, all other capabilities are disabled\n\nvar stylis = new Stylis({\n  cascade: false,\n  compress: false,\n  global: false,\n  keyframe: false,\n  preserve: false,\n  semicolon: false\n});\n\nvar felaStylisEnhancer = function felaStylisEnhancer(renderer) {\n  return Object.assign({}, renderer, {\n    _emitChange: function _emitChange(change) {\n      if (change.type === RULE_TYPE) {\n        var prefixed = stylis('', change.declaration); // Fela uses objects by references, it's safe to override properties\n\n        change.declaration = prefixed.slice(1, -1);\n      }\n\n      renderer._emitChange(change);\n    }\n  });\n};\n\nexport default felaStylisEnhancer;","map":{"version":3,"sources":["utils/felaStylisEnhancer.ts"],"names":["Stylis","_Stylis","stylis","cascade","compress","global","keyframe","preserve","semicolon","felaStylisEnhancer","_emitChange","change","prefixed","renderer"],"mappings":"AAAA,SAAA,SAAA,QAAA,YAAA,C,CACA;;AACA,OAAA,OAAA,MAAA,QAAA,C,CAIA;AACA;;AACA,IAAMA,MAAM,GAAIC,OAAD,CAAA,OAACA,IAAhB,OAAA,C,CAEA;;AACA,IAAMC,MAAM,GAAG,IAAA,MAAA,CAAW;AACxBC,EAAAA,OAAO,EADiB,KAAA;AAExBC,EAAAA,QAAQ,EAFgB,KAAA;AAGxBC,EAAAA,MAAM,EAHkB,KAAA;AAIxBC,EAAAA,QAAQ,EAJgB,KAAA;AAKxBC,EAAAA,QAAQ,EALgB,KAAA;AAMxBC,EAAAA,SAAS,EAAE;AANa,CAAX,CAAf;;AASA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAA,QAAA,EAAA;AAAA,SAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,QAAA,EAAA;AAEzBC,IAAAA,WAAW,EAAE,SAAA,WAAA,CAAA,MAAA,EAA4B;AACvC,UAAIC,MAAM,CAANA,IAAAA,KAAJ,SAAA,EAA+B;AAC7B,YAAMC,QAAgB,GAAGV,MAAM,CAAA,EAAA,EAAKS,MAAM,CADb,WACE,CAA/B,CAD6B,CAG7B;;AACAA,QAAAA,MAAM,CAANA,WAAAA,GAAqBC,QAAQ,CAARA,KAAAA,CAAAA,CAAAA,EAAkB,CAAvCD,CAAqBC,CAArBD;AACD;;AAEDE,MAAAA,QAAQ,CAARA,WAAAA,CAAAA,MAAAA;AACD;AAXwB,GAAA,CAAA;AAA3B,CAAA;;AAcA,eAAA,kBAAA","sourcesContent":["import { RULE_TYPE } from 'fela-utils';\n// @ts-ignore\nimport _Stylis from 'stylis';\n\nimport { Renderer, RendererChange } from './types';\n\n// `stylis@3` is a CJS library, there are known issues with them:\n// https://github.com/rollup/rollup/issues/1267#issuecomment-446681320\nconst Stylis = (_Stylis as any).default || _Stylis;\n\n// We use Stylis only for vendor prefixing, all other capabilities are disabled\nconst stylis = new Stylis({\n  cascade: false,\n  compress: false,\n  global: false,\n  keyframe: false,\n  preserve: false,\n  semicolon: false,\n});\n\nconst felaStylisEnhancer = (renderer: Renderer) => ({\n  ...renderer,\n  _emitChange: (change: RendererChange) => {\n    if (change.type === RULE_TYPE) {\n      const prefixed: string = stylis('', change.declaration);\n\n      // Fela uses objects by references, it's safe to override properties\n      change.declaration = prefixed.slice(1, -1);\n    }\n\n    renderer._emitChange(change);\n  },\n});\n\nexport default felaStylisEnhancer;\n"]},"metadata":{},"sourceType":"module"}