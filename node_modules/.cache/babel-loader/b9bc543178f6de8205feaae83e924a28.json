{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { callable, mergeComponentVariables, withDebugId } from '@fluentui/styles';\nvar variablesCache = new WeakMap();\n\nvar resolveVariables = function resolveVariables(displayNames, theme, variables, enabledVariablesCaching) {\n  var componentThemeVariables; // Filter out components that doesn't have defined variables in theme\n\n  var effectiveDisplayNames = displayNames.filter(function (displayName) {\n    return !!theme.componentVariables[displayName];\n  }); //\n  // Simple caching model, works only if there is no `props.variables`\n  // Resolves variables for this component, cache the result in provider\n  //\n\n  if (enabledVariablesCaching) {\n    if (!variablesCache.has(theme)) {\n      variablesCache.set(theme, {});\n    }\n\n    var variablesThemeCache = variablesCache.get(theme) || {}; // const displayNames = { Foo: variables, Bar: undefined, Baz: undefined }\n    // This allows to avoid creating useless cache entries for `Bar` & `Baz` components\n\n    var handlingDisplayName = effectiveDisplayNames[effectiveDisplayNames.length - 1];\n\n    if (!variablesThemeCache[handlingDisplayName]) {\n      variablesThemeCache[handlingDisplayName] = mergeComponentVariables.apply(void 0, _toConsumableArray(effectiveDisplayNames.map(function (displayName) {\n        return theme.componentVariables[displayName];\n      })))(theme.siteVariables);\n      variablesCache.set(theme, variablesThemeCache);\n    }\n\n    componentThemeVariables = variablesThemeCache[handlingDisplayName];\n  } else if (effectiveDisplayNames.length === 1) {\n    componentThemeVariables = callable(theme.componentVariables[effectiveDisplayNames[0]])(theme.siteVariables) || {};\n  } else {\n    componentThemeVariables = mergeComponentVariables.apply(void 0, _toConsumableArray(effectiveDisplayNames.map(function (displayName) {\n      return theme.componentVariables[displayName];\n    })))(theme.siteVariables);\n  }\n\n  if (variables === undefined) {\n    return componentThemeVariables;\n  }\n\n  return mergeComponentVariables(componentThemeVariables, withDebugId(variables, 'props.variables'))(theme.siteVariables);\n};\n\nexport default resolveVariables;","map":{"version":3,"sources":["styles/resolveVariables.ts"],"names":["variablesCache","resolveVariables","effectiveDisplayNames","theme","variablesThemeCache","handlingDisplayName","componentThemeVariables","callable","variables","mergeComponentVariables","withDebugId"],"mappings":";AAAA,SAAA,QAAA,EAAA,uBAAA,EAAA,WAAA,QAAA,kBAAA;AASA,IAAMA,cAAc,GAAG,IAAvB,OAAuB,EAAvB;;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAA,YAAA,EAAA,KAAA,EAAA,SAAA,EAAA,uBAAA,EAKM;AAC7B,MAD6B,uBAC7B,CAD6B,CAG7B;;AACA,MAAMC,qBAAqB,GAAG,YAAY,CAAZ,MAAA,CAAoB,UAAA,WAAA,EAAW;AAAA,WAAI,CAAC,CAACC,KAAK,CAALA,kBAAAA,CAAN,WAAMA,CAAN;AAJhC,GAIC,CAA9B,CAJ6B,CAM7B;AACA;AACA;AACA;;AAEA,MAAA,uBAAA,EAA6B;AAC3B,QAAI,CAACH,cAAc,CAAdA,GAAAA,CAAL,KAAKA,CAAL,EAAgC;AAC9BA,MAAAA,cAAc,CAAdA,GAAAA,CAAAA,KAAAA,EAAAA,EAAAA;AACD;;AAED,QAAMI,mBAAmB,GAAGJ,cAAc,CAAdA,GAAAA,CAAAA,KAAAA,KALD,EAK3B,CAL2B,CAO3B;AACA;;AACA,QAAMK,mBAAmB,GAAGH,qBAAqB,CAACA,qBAAqB,CAArBA,MAAAA,GAAlD,CAAiD,CAAjD;;AAEA,QAAI,CAACE,mBAAmB,CAAxB,mBAAwB,CAAxB,EAA+C;AAC7CA,MAAAA,mBAAmB,CAAnBA,mBAAmB,CAAnBA,GAA2C,uBAAuB,CAAvB,KAAA,CAAA,KAAA,CAAA,EAAA,kBAAA,CACtC,qBAAqB,CAArB,GAAA,CAA0B,UAAA,WAAA,EAAW;AAAA,eAAID,KAAK,CAALA,kBAAAA,CAAJ,WAAIA,CAAJ;AADC,OACtC,CADsC,CAAA,EAEzCA,KAAK,CAFPC,aAA2C,CAA3CA;AAGAJ,MAAAA,cAAc,CAAdA,GAAAA,CAAAA,KAAAA,EAAAA,mBAAAA;AACD;;AAEDM,IAAAA,uBAAuB,GAAGF,mBAAmB,CAA7CE,mBAA6C,CAA7CA;AAlBF,GAAA,MAmBO,IAAIJ,qBAAqB,CAArBA,MAAAA,KAAJ,CAAA,EAAwC;AAC7CI,IAAAA,uBAAuB,GAAGC,QAAQ,CAACJ,KAAK,CAALA,kBAAAA,CAAyBD,qBAAqB,CAAvDK,CAAuD,CAA9CJ,CAAD,CAARI,CAA6DJ,KAAK,CAAlEI,aAAAA,KAA1BD,EAAAA;AADK,GAAA,MAEA;AACLA,IAAAA,uBAAuB,GAAG,uBAAuB,CAAvB,KAAA,CAAA,KAAA,CAAA,EAAA,kBAAA,CACrB,qBAAqB,CAArB,GAAA,CAA0B,UAAA,WAAA,EAAW;AAAA,aAAIH,KAAK,CAALA,kBAAAA,CAAJ,WAAIA,CAAJ;AADhB,KACrB,CADqB,CAAA,EAExBA,KAAK,CAFPG,aAA0B,CAA1BA;AAGD;;AAED,MAAIE,SAAS,KAAb,SAAA,EAA6B;AAC3B,WAAA,uBAAA;AACD;;AAED,SAAOC,uBAAuB,CAAA,uBAAA,EAE5BC,WAAW,CAAA,SAAA,EAFND,iBAEM,CAFiB,CAAvBA,CAGLN,KAAK,CAHP,aAAOM,CAAP;AA/CF,CAAA;;AAqDA,eAAA,gBAAA","sourcesContent":["import {\n  callable,\n  ComponentVariablesInput,\n  ComponentVariablesObject,\n  mergeComponentVariables,\n  ThemePrepared,\n  withDebugId,\n} from '@fluentui/styles';\n\nconst variablesCache = new WeakMap<ThemePrepared, Record<string, ComponentVariablesObject>>();\n\nconst resolveVariables = (\n  displayNames: string[],\n  theme: ThemePrepared,\n  variables: ComponentVariablesInput | undefined,\n  enabledVariablesCaching: boolean | undefined,\n): ComponentVariablesObject => {\n  let componentThemeVariables: ComponentVariablesObject;\n\n  // Filter out components that doesn't have defined variables in theme\n  const effectiveDisplayNames = displayNames.filter(displayName => !!theme.componentVariables[displayName]);\n\n  //\n  // Simple caching model, works only if there is no `props.variables`\n  // Resolves variables for this component, cache the result in provider\n  //\n\n  if (enabledVariablesCaching) {\n    if (!variablesCache.has(theme)) {\n      variablesCache.set(theme, {});\n    }\n\n    const variablesThemeCache = variablesCache.get(theme) || {};\n\n    // const displayNames = { Foo: variables, Bar: undefined, Baz: undefined }\n    // This allows to avoid creating useless cache entries for `Bar` & `Baz` components\n    const handlingDisplayName = effectiveDisplayNames[effectiveDisplayNames.length - 1];\n\n    if (!variablesThemeCache[handlingDisplayName]) {\n      variablesThemeCache[handlingDisplayName] = mergeComponentVariables(\n        ...effectiveDisplayNames.map(displayName => theme.componentVariables[displayName]),\n      )(theme.siteVariables);\n      variablesCache.set(theme, variablesThemeCache);\n    }\n\n    componentThemeVariables = variablesThemeCache[handlingDisplayName];\n  } else if (effectiveDisplayNames.length === 1) {\n    componentThemeVariables = callable(theme.componentVariables[effectiveDisplayNames[0]])(theme.siteVariables) || {};\n  } else {\n    componentThemeVariables = mergeComponentVariables(\n      ...effectiveDisplayNames.map(displayName => theme.componentVariables[displayName]),\n    )(theme.siteVariables);\n  }\n\n  if (variables === undefined) {\n    return componentThemeVariables;\n  }\n\n  return mergeComponentVariables(\n    componentThemeVariables,\n    withDebugId(variables, 'props.variables'),\n  )(theme.siteVariables);\n};\n\nexport default resolveVariables;\n"]},"metadata":{},"sourceType":"module"}