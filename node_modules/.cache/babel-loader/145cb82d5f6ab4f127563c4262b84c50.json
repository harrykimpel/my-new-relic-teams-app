{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport * as React from 'react';\nimport NestingContext from './NestingContext';\n\nvar NestingChildInner = /*#__PURE__*/function (_React$Component) {\n  _inherits(NestingChildInner, _React$Component);\n\n  function NestingChildInner() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, NestingChildInner);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(NestingChildInner)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"childRef\", React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"getRefs\", function () {\n      return _this.props.getContextRefs(_this.childRef);\n    });\n\n    return _this;\n  }\n\n  _createClass(NestingChildInner, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.register(this.childRef);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.unregister(this.childRef);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.props.children(this.getRefs, this.childRef);\n    }\n  }]);\n\n  return NestingChildInner;\n}(React.Component);\n\nvar NestingChild = function NestingChild(_ref) {\n  var children = _ref.children;\n  return React.createElement(NestingContext.Consumer, null, function (contextValue) {\n    return React.createElement(NestingChildInner, contextValue, children);\n  });\n};\n\nexport default NestingChild;","map":{"version":3,"sources":["NestingChild.tsx"],"names":["NestingChildInner","React","Component","NestingChild","children"],"mappings":";;;;;;;AAAA,OAAO,KAAP,KAAA,MAAA,OAAA;AAEA,OAAA,cAAA,MAAA,kBAAA;;IAKMA,iB;;;;;;;;;;;;;;;;+DACOC,KAAK,CAALA,SAAAA,E;;8DAUD,YAAA;AAAA,aAAiB,KAAA,CAAA,KAAA,CAAA,cAAA,CAA0B,KAAA,CAA3C,QAAiB,CAAjB;;;;;;;;wCARU;AAClB,WAAA,KAAA,CAAA,QAAA,CAAoB,KAApB,QAAA;AACD;;;2CAEsB;AACrB,WAAA,KAAA,CAAA,UAAA,CAAsB,KAAtB,QAAA;AACD;;;6BAIQ;AACP,aAAO,KAAA,KAAA,CAAA,QAAA,CAAoB,KAApB,OAAA,EAAkC,KAAzC,QAAO,CAAP;AACD;;;;EAf6CA,KAAK,CAACC,S;;AAkBtD,IAAMC,YAAmD,GAAG,SAAtDA,YAAsD,CAAA,IAAA,EAAA;AAAA,MAAGC,QAAH,GAAA,IAAA,CAAA,QAAA;AAAA,SAC1D,KAAA,CAAA,aAAA,CAAC,cAAD,CAAA,QAAA,EAAA,IAAA,EACG,UAAA,YAAA,EAAA;AAAA,WAAuC,KAAA,CAAA,aAAA,CAAA,iBAAA,EAAA,YAAA,EAAvC,QAAuC,CAAvC;AAFuD,GAC1D,CAD0D;AAA5D,CAAA;;AAMA,eAAA,YAAA","sourcesContent":["import * as React from 'react';\n\nimport NestingContext from './NestingContext';\nimport { NestingContextValue, NestingProps, NodeRef } from './types';\n\ntype NestingChildInnerProps = NestingContextValue & NestingProps;\n\nclass NestingChildInner<T extends Node> extends React.Component<NestingChildInnerProps> {\n  childRef = React.createRef<T>();\n\n  componentDidMount() {\n    this.props.register(this.childRef as any);\n  }\n\n  componentWillUnmount() {\n    this.props.unregister(this.childRef as any);\n  }\n\n  getRefs = (): NodeRef[] => this.props.getContextRefs(this.childRef as any);\n\n  render() {\n    return this.props.children(this.getRefs, this.childRef as any);\n  }\n}\n\nconst NestingChild: React.FunctionComponent<NestingProps> = ({ children }) => (\n  <NestingContext.Consumer>\n    {(contextValue: NestingContextValue) => <NestingChildInner {...contextValue}>{children}</NestingChildInner>}\n  </NestingContext.Consumer>\n);\n\nexport default NestingChild;\n"]},"metadata":{},"sourceType":"module"}