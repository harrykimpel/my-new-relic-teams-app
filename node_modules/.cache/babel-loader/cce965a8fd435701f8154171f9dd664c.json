{"ast":null,"code":"import _merge from \"lodash/merge\";\nimport * as keyboardKey from 'keyboard-key';\nimport menuButtonBehavior from '../MenuButton/menuButtonBehavior';\n/**\n * @description\n * Adds attribute 'tabIndex=-1' based on the property 'open' to 'trigger' slot.\n * Adds attribute 'aria-controls=menu-id' based on the property 'open' to 'trigger' slot.\n * Adds attribute 'aria-expanded=true' based on the property 'open' to 'trigger' slot.\n * Adds attribute 'id=trigger-id' based on the property 'triggerId' to 'trigger' slot.\n * Adds attribute 'id=menu-id' based on the property 'menuId' to 'menu' slot.\n * Adds attribute 'aria-labelledby=trigger-id' based on the property 'triggerId' to 'menu' slot.\n * Triggers 'closeAndFocusTrigger' action with 'Escape' or 'altKey'+'ArrowUp'.\n * Triggers 'openAndFocusFirst' action with 'altKey'+'ArrowDown' on 'root' slot.\n *\n * @specification\n * Adds attribute 'tabIndex=-1' to 'toggleButton' slot.\n * Adds attribute 'aria-haspopup=true' to 'toggleButton' slot.\n */\n\nvar splitButtonBehavior = function splitButtonBehavior(props) {\n  var splitButtonMenuButtonBehavior = function splitButtonMenuButtonBehavior() {\n    var menuButtonBehaviorData = menuButtonBehavior(props);\n    menuButtonBehaviorData.attributes.trigger['aria-haspopup'] = undefined;\n    return _merge(menuButtonBehaviorData, {\n      keyActions: {\n        popup: {\n          closeAndFocusTrigger: {\n            keyCombinations: [{\n              keyCode: keyboardKey.Escape\n            }, {\n              keyCode: keyboardKey.ArrowUp,\n              altKey: true\n            }]\n          }\n        },\n        root: Object.assign({}, !props.open && {\n          openAndFocusFirst: {\n            keyCombinations: [{\n              keyCode: keyboardKey.ArrowDown,\n              altKey: true\n            }]\n          }\n        })\n      }\n    });\n  };\n\n  return {\n    attributes: {\n      root: {},\n      toggleButton: {\n        tabIndex: -1,\n        'aria-haspopup': true\n      }\n    },\n    childBehaviors: {\n      menuButton: splitButtonMenuButtonBehavior\n    }\n  };\n};\n\nexport default splitButtonBehavior;","map":{"version":3,"sources":["behaviors/SplitButton/splitButtonBehavior.ts"],"names":["splitButtonBehavior","splitButtonMenuButtonBehavior","menuButtonBehaviorData","menuButtonBehavior","keyActions","popup","closeAndFocusTrigger","keyCombinations","keyCode","keyboardKey","Escape","altKey","root","props","openAndFocusFirst","attributes","toggleButton","tabIndex","childBehaviors","menuButton"],"mappings":";AAAA,OAAO,KAAP,WAAA,MAAA,cAAA;AAIA,OAAA,kBAAA,MAAA,kCAAA;AAEA;;;;;;;;;;;;;;;;AAeA,IAAMA,mBAAkC,GAAG,SAArCA,mBAAqC,CAAA,KAAA,EAAS;AAClD,MAAMC,6BAA6B,GAAG,SAAhCA,6BAAgC,GAAM;AAC1C,QAAMC,sBAAsB,GAAGC,kBAAkB,CAAjD,KAAiD,CAAjD;AACAD,IAAAA,sBAAsB,CAAtBA,UAAAA,CAAAA,OAAAA,CAAAA,eAAAA,IAAAA,SAAAA;AAEA,WAAO,MAAA,CAAA,sBAAA,EAAgC;AACrCE,MAAAA,UAAU,EAAE;AACVC,QAAAA,KAAK,EAAE;AACLC,UAAAA,oBAAoB,EAAE;AACpBC,YAAAA,eAAe,EAAE,CAAC;AAAEC,cAAAA,OAAO,EAAEC,WAAW,CAACC;AAAvB,aAAD,EAAkC;AAAEF,cAAAA,OAAO,EAAEC,WAAW,CAAtB,OAAA;AAAgCE,cAAAA,MAAM,EAAE;AAAxC,aAAlC;AADG;AADjB,SADG;AAMVC,QAAAA,IAAI,EAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EACE,CAACC,KAAK,CAAN,IAAA,IAAe;AACjBC,UAAAA,iBAAiB,EAAE;AACjBP,YAAAA,eAAe,EAAE,CAAC;AAAEC,cAAAA,OAAO,EAAEC,WAAW,CAAtB,SAAA;AAAkCE,cAAAA,MAAM,EAAE;AAA1C,aAAD;AADA;AADF,SADjB;AANM;AADyB,KAAhC,CAAP;AAJF,GAAA;;AAsBA,SAAO;AACLI,IAAAA,UAAU,EAAE;AACVH,MAAAA,IAAI,EADM,EAAA;AAEVI,MAAAA,YAAY,EAAE;AACZC,QAAAA,QAAQ,EAAE,CADE,CAAA;AAEZ,yBAAiB;AAFL;AAFJ,KADP;AAQLC,IAAAA,cAAc,EAAE;AACdC,MAAAA,UAAU,EAAElB;AADE;AARX,GAAP;AAvBF,CAAA;;AAuCA,eAAA,mBAAA","sourcesContent":["import * as keyboardKey from 'keyboard-key';\nimport * as _ from 'lodash';\n\nimport { Accessibility } from '../../types';\nimport menuButtonBehavior, { MenuButtonBehaviorProps } from '../MenuButton/menuButtonBehavior';\n\n/**\n * @description\n * Adds attribute 'tabIndex=-1' based on the property 'open' to 'trigger' slot.\n * Adds attribute 'aria-controls=menu-id' based on the property 'open' to 'trigger' slot.\n * Adds attribute 'aria-expanded=true' based on the property 'open' to 'trigger' slot.\n * Adds attribute 'id=trigger-id' based on the property 'triggerId' to 'trigger' slot.\n * Adds attribute 'id=menu-id' based on the property 'menuId' to 'menu' slot.\n * Adds attribute 'aria-labelledby=trigger-id' based on the property 'triggerId' to 'menu' slot.\n * Triggers 'closeAndFocusTrigger' action with 'Escape' or 'altKey'+'ArrowUp'.\n * Triggers 'openAndFocusFirst' action with 'altKey'+'ArrowDown' on 'root' slot.\n *\n * @specification\n * Adds attribute 'tabIndex=-1' to 'toggleButton' slot.\n * Adds attribute 'aria-haspopup=true' to 'toggleButton' slot.\n */\nconst splitButtonBehavior: Accessibility = props => {\n  const splitButtonMenuButtonBehavior = () => {\n    const menuButtonBehaviorData = menuButtonBehavior(props);\n    menuButtonBehaviorData.attributes.trigger['aria-haspopup'] = undefined;\n\n    return _.merge(menuButtonBehaviorData, {\n      keyActions: {\n        popup: {\n          closeAndFocusTrigger: {\n            keyCombinations: [{ keyCode: keyboardKey.Escape }, { keyCode: keyboardKey.ArrowUp, altKey: true }],\n          },\n        },\n        root: {\n          ...(!props.open && {\n            openAndFocusFirst: {\n              keyCombinations: [{ keyCode: keyboardKey.ArrowDown, altKey: true }],\n            },\n          }),\n        },\n      },\n    });\n  };\n\n  return {\n    attributes: {\n      root: {},\n      toggleButton: {\n        tabIndex: -1,\n        'aria-haspopup': true,\n      },\n    },\n    childBehaviors: {\n      menuButton: splitButtonMenuButtonBehavior,\n    },\n  };\n};\n\nexport type SplitButtonBehaviorProps = Pick<MenuButtonBehaviorProps, 'open'>;\n\nexport default splitButtonBehavior;\n"]},"metadata":{},"sourceType":"module"}