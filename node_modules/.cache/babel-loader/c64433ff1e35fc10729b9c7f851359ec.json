{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _invoke from \"lodash/invoke\";\nimport _get from \"lodash/get\";\nimport _toNumber from \"lodash/toNumber\";\nimport { sliderBehavior } from '@fluentui/accessibility';\nimport { getElementType, useUnhandledProps, useAccessibility, useStateManager, useStyles, useTelemetry } from '@fluentui/react-bindings';\nimport { handleRef, Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport { createSliderManager } from '@fluentui/state';\nimport cx from 'classnames';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react'; // @ts-ignore\n\nimport { ThemeContext } from 'react-fela';\nimport { commonPropTypes, partitionHTMLProps, setWhatInputSource, createShorthandFactory } from '../../utils';\nimport { withSafeTypeForAs } from '../../types';\nimport Box from '../Box/Box';\n\nvar processInputValues = function processInputValues(p) {\n  var min = _toNumber(p.min);\n\n  var max = _toNumber(p.max);\n\n  var value = _toNumber(p.value);\n\n  if (isNaN(min)) min = Number(Slider.defaultProps.min);\n  if (isNaN(max)) max = Number(Slider.defaultProps.max);\n  value = isNaN(value) ? min + (max - min) / 2 : Math.min(max, Math.max(min, value));\n  var valueAsPercentage = \"\".concat(100 * (value - min) / (max - min), \"%\");\n  return {\n    min: min,\n    max: max,\n    value: value,\n    valueAsPercentage: valueAsPercentage\n  };\n};\n\nexport var sliderClassName = 'ui-slider';\nexport var sliderSlotClassNames = {\n  input: \"\".concat(sliderClassName, \"__input\"),\n  inputWrapper: \"\".concat(sliderClassName, \"__input-wrapper\"),\n  rail: \"\".concat(sliderClassName, \"__rail\"),\n  thumb: \"\".concat(sliderClassName, \"__thumb\"),\n  track: \"\".concat(sliderClassName, \"__track\")\n};\n\nvar Slider = function Slider(props) {\n  var context = React.useContext(ThemeContext);\n\n  var _useTelemetry = useTelemetry(Slider.displayName, context.telemetry),\n      setStart = _useTelemetry.setStart,\n      setEnd = _useTelemetry.setEnd;\n\n  setStart();\n  var accessibility = props.accessibility,\n      min = props.min,\n      max = props.max,\n      value = props.value,\n      getA11yValueMessageOnChange = props.getA11yValueMessageOnChange,\n      defaultValue = props.defaultValue,\n      input = props.input,\n      userInputRef = props.inputRef,\n      step = props.step,\n      className = props.className,\n      styles = props.styles,\n      variables = props.variables,\n      design = props.design,\n      fluid = props.fluid,\n      vertical = props.vertical,\n      disabled = props.disabled;\n  var inputRef = React.createRef();\n\n  var _useStateManager = useStateManager(createSliderManager, {\n    mapPropsToInitialState: function mapPropsToInitialState() {\n      return {\n        value: defaultValue\n      };\n    },\n    mapPropsToState: function mapPropsToState() {\n      return {\n        value: value\n      };\n    }\n  }),\n      state = _useStateManager.state,\n      actions = _useStateManager.actions;\n\n  var _processInputValues = processInputValues({\n    min: min,\n    max: max,\n    value: state.value || ''\n  }),\n      numericMin = _processInputValues.min,\n      numericMax = _processInputValues.max,\n      numericValue = _processInputValues.value,\n      valueAsPercentage = _processInputValues.valueAsPercentage;\n\n  var getA11Props = useAccessibility(accessibility, {\n    debugName: Slider.displayName,\n    rtl: context.rtl,\n    mapPropsToBehavior: function mapPropsToBehavior() {\n      return {\n        disabled: disabled,\n        getA11yValueMessageOnChange: getA11yValueMessageOnChange,\n        max: numericMax,\n        min: numericMax,\n        value: numericValue,\n        vertical: vertical\n      };\n    }\n  });\n\n  var _useStyles = useStyles(Slider.displayName, {\n    className: sliderClassName,\n    mapPropsToStyles: function mapPropsToStyles() {\n      return {\n        fluid: fluid,\n        vertical: vertical,\n        disabled: disabled\n      };\n    },\n    mapPropsToInlineStyles: function mapPropsToInlineStyles() {\n      return {\n        className: className,\n        styles: styles,\n        variables: variables,\n        design: design\n      };\n    },\n    rtl: context.rtl\n  }),\n      classes = _useStyles.classes,\n      resolvedStyles = _useStyles.styles;\n\n  var handleInputOverrides = function handleInputOverrides() {\n    return {\n      onChange: function onChange(e) {\n        var value = _get(e, 'target.value');\n\n        _invoke(props, 'onChange', e, Object.assign({}, props, {\n          value: value\n        }));\n\n        actions.change(value);\n      },\n      onMouseDown: function onMouseDown(e) {\n        setWhatInputSource(context.target, 'mouse');\n\n        _invoke(props, 'onMouseDown', e, props);\n      }\n    };\n  };\n\n  var ElementType = getElementType(props);\n  var unhandledProps = useUnhandledProps(Slider.handledProps, props);\n\n  var _partitionHTMLProps = partitionHTMLProps(unhandledProps),\n      _partitionHTMLProps2 = _slicedToArray(_partitionHTMLProps, 2),\n      htmlInputProps = _partitionHTMLProps2[0],\n      restProps = _partitionHTMLProps2[1];\n\n  var type = 'range'; // we need 2 wrappers around the slider rail, track, input and thumb slots to achieve correct component sizes\n\n  var inputElement = Box.create(input || type, {\n    defaultProps: function defaultProps() {\n      return getA11Props('input', Object.assign({}, htmlInputProps, {\n        as: 'input',\n        className: sliderSlotClassNames.input,\n        fluid: fluid,\n        min: numericMin,\n        max: numericMax,\n        step: step,\n        styles: resolvedStyles.input,\n        type: type,\n        value: numericValue,\n        vertical: vertical\n      }));\n    },\n    overrideProps: handleInputOverrides\n  });\n  var element = React.createElement(ElementType, getA11Props('root', Object.assign({\n    className: classes.root\n  }, restProps)), React.createElement(\"div\", getA11Props('inputWrapper', {\n    className: cx(sliderSlotClassNames.inputWrapper, classes.inputWrapper)\n  }), React.createElement(\"span\", getA11Props('rail', {\n    className: cx(sliderSlotClassNames.rail, classes.rail)\n  })), React.createElement(\"span\", _extends({}, getA11Props('track', {\n    className: cx(sliderSlotClassNames.track, classes.track)\n  }), {\n    style: {\n      width: valueAsPercentage\n    }\n  })), React.createElement(Ref, {\n    innerRef: function innerRef(inputElement) {\n      handleRef(inputRef, inputElement);\n      handleRef(userInputRef, inputElement);\n    }\n  }, inputElement), React.createElement(\"span\", _extends({}, getA11Props('thumb', {\n    className: cx(sliderSlotClassNames.thumb, classes.thumb)\n  }), {\n    style: _defineProperty({}, context.rtl ? 'right' : 'left', valueAsPercentage)\n  }))));\n  setEnd();\n  return element;\n};\n\nSlider.displayName = 'Slider';\nSlider.defaultProps = {\n  accessibility: sliderBehavior,\n  getA11yValueMessageOnChange: function getA11yValueMessageOnChange(_ref2) {\n    var value = _ref2.value;\n    return String(value);\n  },\n  max: 100,\n  min: 0,\n  step: 1\n};\nSlider.propTypes = Object.assign({}, commonPropTypes.createCommon({\n  content: false\n}), {\n  defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  fluid: PropTypes.bool,\n  getA11yValueMessageOnChange: PropTypes.func,\n  input: customPropTypes.itemShorthand,\n  inputRef: customPropTypes.ref,\n  max: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  min: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  onChange: PropTypes.func,\n  step: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  vertical: PropTypes.bool\n});\nSlider.handledProps = Object.keys(Slider.propTypes);\nSlider.create = createShorthandFactory({\n  Component: Slider,\n  mappedProp: 'value'\n});\n/**\n * A Slider represents an input that allows user to choose a value from within a specific range.\n *\n * @accessibility\n * Implements [ARIA Slider](https://www.w3.org/TR/wai-aria-practices-1.1/#slider) design pattern.\n * @accessibilityIssues\n * [Slider - JAWS narrates slider value twice when using PageUp / PageDown](https://github.com/FreedomScientific/VFO-standards-support/issues/220)\n * [Slider - JAWS narrates current and new value in vertical slider](https://github.com/FreedomScientific/VFO-standards-support/issues/219)\n */\n\nexport default withSafeTypeForAs(Slider);","map":{"version":3,"sources":["components/Slider/Slider.tsx"],"names":["processInputValues","min","p","max","value","isNaN","Number","Slider","Math","valueAsPercentage","sliderClassName","sliderSlotClassNames","input","inputWrapper","rail","thumb","track","context","React","setStart","setEnd","useTelemetry","accessibility","getA11yValueMessageOnChange","defaultValue","userInputRef","step","className","styles","variables","design","fluid","vertical","disabled","props","inputRef","state","actions","useStateManager","mapPropsToInitialState","mapPropsToState","numericMin","numericMax","numericValue","getA11Props","useAccessibility","debugName","rtl","mapPropsToBehavior","classes","resolvedStyles","useStyles","mapPropsToStyles","mapPropsToInlineStyles","handleInputOverrides","onChange","onMouseDown","setWhatInputSource","ElementType","getElementType","unhandledProps","useUnhandledProps","htmlInputProps","restProps","partitionHTMLProps","type","inputElement","defaultProps","as","overrideProps","element","root","cx","width","handleRef","String","content","PropTypes","customPropTypes","bool","Object","createShorthandFactory","Component","mappedProp","withSafeTypeForAs"],"mappings":"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","sourcesContent":["import { Accessibility, sliderBehavior, SliderBehaviorProps } from '@fluentui/accessibility';\nimport {\n  getElementType,\n  useUnhandledProps,\n  useAccessibility,\n  useStateManager,\n  useStyles,\n  useTelemetry,\n} from '@fluentui/react-bindings';\nimport { handleRef, Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport { createSliderManager } from '@fluentui/state';\nimport cx from 'classnames';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n// @ts-ignore\nimport { ThemeContext } from 'react-fela';\n\nimport {\n  ChildrenComponentProps,\n  commonPropTypes,\n  partitionHTMLProps,\n  UIComponentProps,\n  setWhatInputSource,\n  createShorthandFactory,\n} from '../../utils';\nimport {\n  ComponentEventHandler,\n  ShorthandValue,\n  WithAsProp,\n  withSafeTypeForAs,\n  Omit,\n  FluentComponentStaticProps,\n  ProviderContextPrepared,\n} from '../../types';\nimport { SupportedIntrinsicInputProps } from '../../utils/htmlPropsUtils';\nimport Box, { BoxProps } from '../Box/Box';\n\nconst processInputValues = (\n  p: Pick<SliderProps, 'min' | 'max'> & { value: string },\n): { min: number; max: number; value: number; valueAsPercentage: string } => {\n  let min = _.toNumber(p.min);\n  let max = _.toNumber(p.max);\n  let value = _.toNumber(p.value);\n\n  if (isNaN(min)) min = Number(Slider.defaultProps.min);\n  if (isNaN(max)) max = Number(Slider.defaultProps.max);\n  value = isNaN(value) ? min + (max - min) / 2 : Math.min(max, Math.max(min, value));\n  const valueAsPercentage = `${(100 * (value - min)) / (max - min)}%`;\n\n  return { min, max, value, valueAsPercentage };\n};\n\nexport interface SliderSlotClassNames {\n  input: string;\n  inputWrapper: string;\n  rail: string;\n  thumb: string;\n  track: string;\n}\n\nexport interface SliderProps\n  extends UIComponentProps,\n    ChildrenComponentProps,\n    Omit<SupportedIntrinsicInputProps, 'defaultValue'> {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<SliderBehaviorProps>;\n\n  /** The default value of the slider. */\n  defaultValue?: string | number;\n\n  /** A slider can be read-only and unable to change states. */\n  disabled?: SupportedIntrinsicInputProps['disabled'];\n\n  /** A slider can take the width of its container. */\n  fluid?: boolean;\n\n  /**\n   * Callback that creates custom accessibility message a screen reader narrates when the value changes.\n   * @param props - Slider props.\n   */\n  getA11yValueMessageOnChange?: (props: SliderProps) => string;\n\n  /** Shorthand for the input component. */\n  input?: ShorthandValue<BoxProps>;\n\n  /** Ref for input DOM node. */\n  inputRef?: React.Ref<HTMLElement>;\n\n  /** The maximum value of the slider. */\n  max?: SupportedIntrinsicInputProps['max'];\n\n  /** The minimum value of the slider. */\n  min?: SupportedIntrinsicInputProps['min'];\n\n  /**\n   * Called after item checked state is changed.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onChange?: ComponentEventHandler<SliderProps & { value: string }>;\n\n  /**\n   * A number that specifies the granularity that the value must adhere to, or the special value 'any'.\n   * A string value of any means that no stepping is implied, and any value is allowed\n   * (barring other constraints, such as min and max).\n   */\n  step?: SupportedIntrinsicInputProps['step'];\n\n  /** The value of the slider. */\n  value?: string | number;\n\n  /** A slider can be displayed vertically. */\n  vertical?: boolean;\n}\n\nexport type SliderStylesProps = Pick<SliderProps, 'fluid' | 'disabled' | 'vertical'>;\nexport const sliderClassName = 'ui-slider';\nexport const sliderSlotClassNames: SliderSlotClassNames = {\n  input: `${sliderClassName}__input`,\n  inputWrapper: `${sliderClassName}__input-wrapper`,\n  rail: `${sliderClassName}__rail`,\n  thumb: `${sliderClassName}__thumb`,\n  track: `${sliderClassName}__track`,\n};\n\nconst Slider: React.FC<WithAsProp<SliderProps>> & FluentComponentStaticProps = props => {\n  const context: ProviderContextPrepared = React.useContext(ThemeContext);\n  const { setStart, setEnd } = useTelemetry(Slider.displayName, context.telemetry);\n  setStart();\n\n  const {\n    accessibility,\n    min,\n    max,\n    value,\n    getA11yValueMessageOnChange,\n    defaultValue,\n    input,\n    inputRef: userInputRef,\n    step,\n    className,\n    styles,\n    variables,\n    design,\n    fluid,\n    vertical,\n    disabled,\n  } = props;\n  const inputRef = React.createRef<HTMLElement>();\n\n  const { state, actions } = useStateManager(createSliderManager, {\n    mapPropsToInitialState: () => ({\n      value: defaultValue as string,\n    }),\n    mapPropsToState: () => ({\n      value: value as string,\n    }),\n  });\n  const { min: numericMin, max: numericMax, value: numericValue, valueAsPercentage } = processInputValues({\n    min,\n    max,\n    value: state.value || '',\n  });\n\n  const getA11Props = useAccessibility(accessibility, {\n    debugName: Slider.displayName,\n    rtl: context.rtl,\n    mapPropsToBehavior: () => ({\n      disabled,\n      getA11yValueMessageOnChange,\n      max: numericMax,\n      min: numericMax,\n      value: numericValue,\n      vertical,\n    }),\n  });\n  const { classes, styles: resolvedStyles } = useStyles<SliderStylesProps>(Slider.displayName, {\n    className: sliderClassName,\n    mapPropsToStyles: () => ({\n      fluid,\n      vertical,\n      disabled,\n    }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      styles,\n      variables,\n      design,\n    }),\n    rtl: context.rtl,\n  });\n\n  const handleInputOverrides = () => ({\n    onChange: (e: React.ChangeEvent<HTMLInputElement>) => {\n      const value = _.get(e, 'target.value');\n      _.invoke(props, 'onChange', e, { ...props, value });\n      actions.change(value);\n    },\n    onMouseDown: (e: React.MouseEvent<HTMLInputElement>) => {\n      setWhatInputSource(context.target, 'mouse');\n      _.invoke(props, 'onMouseDown', e, props);\n    },\n  });\n\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(Slider.handledProps, props);\n  const [htmlInputProps, restProps] = partitionHTMLProps(unhandledProps);\n  const type = 'range';\n\n  // we need 2 wrappers around the slider rail, track, input and thumb slots to achieve correct component sizes\n\n  const inputElement = Box.create(input || type, {\n    defaultProps: () =>\n      getA11Props('input', {\n        ...htmlInputProps,\n        as: 'input',\n        className: sliderSlotClassNames.input,\n        fluid,\n        min: numericMin,\n        max: numericMax,\n        step,\n        styles: resolvedStyles.input,\n        type,\n        value: numericValue,\n        vertical,\n      }),\n    overrideProps: handleInputOverrides,\n  });\n\n  const element = (\n    <ElementType {...getA11Props('root', { className: classes.root, ...restProps })}>\n      <div\n        {...getA11Props('inputWrapper', {\n          className: cx(sliderSlotClassNames.inputWrapper, classes.inputWrapper),\n        })}\n      >\n        <span {...getA11Props('rail', { className: cx(sliderSlotClassNames.rail, classes.rail) })} />\n        <span\n          {...getA11Props('track', { className: cx(sliderSlotClassNames.track, classes.track) })}\n          style={{ width: valueAsPercentage }}\n        />\n        <Ref\n          innerRef={(inputElement: HTMLElement) => {\n            handleRef(inputRef, inputElement);\n            handleRef(userInputRef, inputElement);\n          }}\n        >\n          {inputElement}\n        </Ref>\n        {/* the thumb slot needs to appear after the input slot */}\n        <span\n          {...getA11Props('thumb', { className: cx(sliderSlotClassNames.thumb, classes.thumb) })}\n          style={{ [context.rtl ? 'right' : 'left']: valueAsPercentage }}\n        />\n      </div>\n    </ElementType>\n  );\n  setEnd();\n\n  return element;\n};\n\nSlider.displayName = 'Slider';\n\nSlider.defaultProps = {\n  accessibility: sliderBehavior,\n  getA11yValueMessageOnChange: ({ value }) => String(value),\n  max: 100,\n  min: 0,\n  step: 1,\n};\nSlider.propTypes = {\n  ...commonPropTypes.createCommon({ content: false }),\n  defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  fluid: PropTypes.bool,\n  getA11yValueMessageOnChange: PropTypes.func,\n  input: customPropTypes.itemShorthand,\n  inputRef: customPropTypes.ref,\n  max: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  min: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  onChange: PropTypes.func,\n  step: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  vertical: PropTypes.bool,\n};\nSlider.handledProps = Object.keys(Slider.propTypes) as any;\n\nSlider.create = createShorthandFactory({ Component: Slider, mappedProp: 'value' });\n\n/**\n * A Slider represents an input that allows user to choose a value from within a specific range.\n *\n * @accessibility\n * Implements [ARIA Slider](https://www.w3.org/TR/wai-aria-practices-1.1/#slider) design pattern.\n * @accessibilityIssues\n * [Slider - JAWS narrates slider value twice when using PageUp / PageDown](https://github.com/FreedomScientific/VFO-standards-support/issues/220)\n * [Slider - JAWS narrates current and new value in vertical slider](https://github.com/FreedomScientific/VFO-standards-support/issues/219)\n */\nexport default withSafeTypeForAs<typeof Slider, SliderProps, 'input'>(Slider);\n"]},"metadata":{},"sourceType":"module"}