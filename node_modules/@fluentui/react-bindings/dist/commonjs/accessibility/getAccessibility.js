"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _getKeyDownHandlers = _interopRequireDefault(require("./getKeyDownHandlers"));

var emptyBehavior = {
  attributes: {},
  keyHandlers: {}
};

var getAccessibility = function getAccessibility(displayName, behavior, behaviorProps, isRtlEnabled, actionHandlers) {
  if (behavior === null || behavior === undefined) {
    return emptyBehavior;
  }

  var definition = behavior(behaviorProps);
  var keyHandlers = actionHandlers && definition.keyActions ? (0, _getKeyDownHandlers.default)(actionHandlers, definition.keyActions, isRtlEnabled) : {};

  if (definition.focusZone) {
    definition.focusZone.props = Object.assign({
      // maintain behavior of focus zone in v7 behaviors
      preventFocusRestoration: true
    }, definition.focusZone.props);
  }

  if (process.env.NODE_ENV !== 'production') {
    // For the non-production builds we enable the runtime accessibility attributes validator.
    // We're adding the data-aa-class attribute which is being consumed by the validator, the
    // schema is located in @fluentui/ability-attributes package.
    if (definition.attributes) {
      Object.keys(definition.attributes).forEach(function (slotName) {
        var validatorName = definition.attributes[slotName]['data-aa-class'] || "".concat(displayName).concat(slotName === 'root' ? '' : "__".concat(slotName));

        if (!definition.attributes[slotName]) {
          definition.attributes[slotName] = {};
        }

        definition.attributes[slotName]['data-aa-class'] = validatorName;
      });
    }
  }

  return Object.assign({}, emptyBehavior, {}, definition, {
    keyHandlers: keyHandlers
  });
};

var _default = getAccessibility;
exports.default = _default;
//# sourceMappingURL=getAccessibility.js.map
