{"version":3,"sources":["styles/getStyles.ts"],"names":["isDebugEnabled","resolveVariables","resolveStyles","getStyles","options","resolvedVariables","displayNames","theme","props","variables","performance","enableVariablesCaching","classes","resolvedStyles","resolvedStylesDebug","process","env","NODE_ENV","saveDebug","componentName","join","componentVariables","_debug","resolved","componentStyles","siteVariables","siteVars","keys","Object","length","pop","styles"],"mappings":";;AAAA,SAAgEA,cAAhE,QAAsF,kBAAtF;AAKA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,OAAOC,aAAP,MAA0B,iBAA1B;;AASA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,OAAD,EAAoD;AACpE;AACA;AACA;AACA;AACA;AACA;AAEA,MAAMC,iBAAiB,GAAGJ,gBAAgB,CACxCG,OAAO,CAACE,YADgC,EAExCF,OAAO,CAACG,KAFgC,EAGxCH,OAAO,CAACI,KAAR,CAAcC,SAH0B,EAIxCL,OAAO,CAACM,WAAR,CAAoBC,sBAJoB,CAA1C;;AARoE,uBAcXT,aAAa,CAACE,OAAD,EAAUC,iBAAV,CAdF;AAAA,MAc5DO,OAd4D,kBAc5DA,OAd4D;AAAA,MAcnDC,cAdmD,kBAcnDA,cAdmD;AAAA,MAcnCC,mBAdmC,kBAcnCA,mBAdmC,EAgBpE;;;AACA,MAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyCjB,cAA7C,EAA6D;AAC3DI,IAAAA,OAAO,CAACc,SAAR,CAAkB;AAChBC,MAAAA,aAAa,EAAEf,OAAO,CAACE,YAAR,CAAqBc,IAArB,CAA0B,GAA1B,CADC;AAEhBC,MAAAA,kBAAkB,EAAE,QAAShB,iBAAiB,CAACiB,MAA3B,EAAmC,UAAAb,SAAS;AAAA,eAAI,CAAC,SAAUA,SAAS,CAACc,QAApB,CAAL;AAAA,OAA5C,CAFJ;AAGhBC,MAAAA,eAAe,EAAEV,mBAHD;AAIhBW,MAAAA,aAAa,EAAE,QAASrB,OAAO,CAACG,KAAR,CAAckB,aAAd,CAA4BH,MAArC,EAA6C,UAAAI,QAAQ,EAAI;AACtE,YAAI,SAAUA,QAAV,KAAuB,SAAUA,QAAQ,CAACH,QAAnB,CAA3B,EAAyD;AACvD,iBAAO,KAAP;AACD;;AAED,YAAMI,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYD,QAAQ,CAACH,QAArB,CAAb;;AACA,YAAII,IAAI,CAACE,MAAL,KAAgB,CAAhB,IAAqBF,IAAI,CAACG,GAAL,OAAe,WAApC,IAAmD,SAAUJ,QAAQ,CAACH,QAAT,CAAkB,WAAlB,CAAV,CAAvD,EAAkG;AAChG,iBAAO,KAAP;AACD;;AAED,eAAO,IAAP;AACD,OAXc;AAJC,KAAlB;AAiBD;;AAED,SAAO;AACLX,IAAAA,OAAO,EAAPA,OADK;AAELH,IAAAA,SAAS,EAAEJ,iBAFN;AAGL0B,IAAAA,MAAM,EAAElB,cAHH;AAILN,IAAAA,KAAK,EAAEH,OAAO,CAACG;AAJV,GAAP;AAMD,CA3CD;;AA6CA,eAAeJ,SAAf","sourcesContent":["import { ComponentSlotStylesResolved, ComponentVariablesObject, isDebugEnabled } from '@fluentui/styles';\n\nimport * as _ from 'lodash';\n\nimport { ComponentSlotClasses, ResolveStylesOptions, StylesContextValue } from '../styles/types';\nimport resolveVariables from './resolveVariables';\nimport resolveStyles from './resolveStyles';\n\nexport type GetStylesResult = {\n  classes: ComponentSlotClasses;\n  variables: ComponentVariablesObject;\n  styles: ComponentSlotStylesResolved;\n  theme: StylesContextValue['theme'];\n};\n\nconst getStyles = (options: ResolveStylesOptions): GetStylesResult => {\n  //\n  // To compute styles we are going through three stages:\n  // - resolve variables (siteVariables => componentVariables + props.variables)\n  // - resolve styles (with resolvedVariables & props.styles & props.design)\n  // - compute classes (with resolvedStyles)\n  // - conditionally add sources for evaluating debug information to component\n\n  const resolvedVariables = resolveVariables(\n    options.displayNames,\n    options.theme,\n    options.props.variables,\n    options.performance.enableVariablesCaching,\n  );\n  const { classes, resolvedStyles, resolvedStylesDebug } = resolveStyles(options, resolvedVariables);\n\n  // conditionally add sources for evaluating debug information to component\n  if (process.env.NODE_ENV !== 'production' && isDebugEnabled) {\n    options.saveDebug({\n      componentName: options.displayNames.join(':'),\n      componentVariables: _.filter(resolvedVariables._debug, variables => !_.isEmpty(variables.resolved)),\n      componentStyles: resolvedStylesDebug,\n      siteVariables: _.filter(options.theme.siteVariables._debug, siteVars => {\n        if (_.isEmpty(siteVars) || _.isEmpty(siteVars.resolved)) {\n          return false;\n        }\n\n        const keys = Object.keys(siteVars.resolved);\n        if (keys.length === 1 && keys.pop() === 'fontSizes' && _.isEmpty(siteVars.resolved['fontSizes'])) {\n          return false;\n        }\n\n        return true;\n      }),\n    });\n  }\n\n  return {\n    classes,\n    variables: resolvedVariables,\n    styles: resolvedStyles,\n    theme: options.theme,\n  };\n};\n\nexport default getStyles;\n"],"file":"getStyles.js"}