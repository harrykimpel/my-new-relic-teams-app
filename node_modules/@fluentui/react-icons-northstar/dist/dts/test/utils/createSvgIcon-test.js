"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var react_icons_northstar_1 = require("@fluentui/react-icons-northstar");
var enzyme_1 = require("enzyme");
var React = require("react");
// @ts-ignore
var react_fela_1 = require("react-fela");
var testSvg = function () { return React.createElement("svg", null); };
var createTheme = function () { return ({
    componentStyles: {
        SvgIcon: { root: jest.fn() },
    },
    componentVariables: {},
}); };
var TestProvider = function (props) {
    var children = props.children, theme = props.theme;
    return (React.createElement(react_fela_1.ThemeContext.Provider, { value: {
            performance: {},
            theme: theme,
        } }, children));
};
describe('createSvgIcon', function () {
    it('returns a valid React component', function () {
        var TestIcon = react_icons_northstar_1.createSvgIcon({ svg: testSvg, displayName: 'TestIcon' });
        expect(React.isValidElement(React.createElement(TestIcon, null))).toEqual(true);
    });
    it('sets displayName to the created Component', function () {
        var TestIcon = react_icons_northstar_1.createSvgIcon({ svg: testSvg, displayName: 'TestIcon' });
        expect(TestIcon.displayName).toEqual('TestIcon');
    });
    it('spreads unhandled props on the root element', function () {
        var TestIcon = react_icons_northstar_1.createSvgIcon({ svg: testSvg, displayName: 'TestIcon' });
        var wrapper = enzyme_1.mount(React.createElement(TestIcon, { id: "test-id" }), {
            wrappingComponent: TestProvider,
            wrappingComponentProps: { theme: createTheme() },
        });
        expect(wrapper.find("." + react_icons_northstar_1.svgIconClassName).props().id).toEqual('test-id');
    });
    it('provides all props on the svg function', function () {
        var BookIcon = react_icons_northstar_1.createSvgIcon({
            svg: function (_a) {
                var props = _a.props;
                var _b;
                return React.createElement("svg", { "data-foo": props.foo.toString(), "data-outline": (_b = props.outline) === null || _b === void 0 ? void 0 : _b.toString() });
            },
            displayName: 'BookIcon',
            handledProps: ['foo'],
        });
        var wrapper = enzyme_1.mount(React.createElement(BookIcon, { foo: true, outline: true }), {
            wrappingComponent: TestProvider,
            wrappingComponentProps: { theme: createTheme() },
        });
        expect(wrapper.find('svg').prop('data-foo')).toEqual('true');
        expect(wrapper.find('svg').prop('data-outline')).toEqual('true');
    });
});
