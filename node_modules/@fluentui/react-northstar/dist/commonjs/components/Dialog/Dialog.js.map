{"version":3,"sources":["components/Dialog/Dialog.tsx"],"names":["dialogsCounterAttribute","dialogClassName","dialogSlotClassNames","header","headerAction","content","overlay","footer","Dialog","closeAndFocusTrigger","e","handleDialogCancel","stopPropagation","triggerRef","close","React","createRef","props","open","setState","predefinedProps","onClick","buttonProps","handleDialogConfirm","isInsideContentClick","contentRef","current","context","target","isInsideOverlayClick","overlayRef","shouldClose","getRefs","lastOverlayRef","pop","isLastOpenedDialog","keyboardKey","getCode","Escape","openDialogs","body","getAttribute","setAttribute","removeAttribute","_","prevState","state","unlockBodyScroll","lockBodyScroll","accessibility","classes","ElementType","styles","unhandledProps","rtl","actions","cancelButton","closeOnOutsideClick","confirmButton","trapFocus","trigger","cancelElement","Button","overrideProps","handleCancelButtonOverrides","confirmElement","defaultProps","primary","handleConfirmButtonOverrides","dialogActions","ButtonGroup","create","dialogContent","root","attributes","popup","keyHandlers","Header","as","className","text","iconOnly","Box","DialogFooter","triggerAccessibility","handleDialogOpen","nestingRef","contentNode","handleOverlayClick","handleDocumentKeydown","contentId","headerId","AutoControlledComponent","commonPropTypes","createCommon","children","customPropTypes","itemShorthand","backdrop","PropTypes","bool","defaultOpen","onCancel","func","onConfirm","onOpen","oneOfType","object","any","dialogBehavior"],"mappings":"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","sourcesContent":["import { Accessibility, dialogBehavior } from '@fluentui/accessibility';\nimport { FocusTrapZoneProps } from '@fluentui/react-bindings';\nimport { Unstable_NestingAuto } from '@fluentui/react-component-nesting-registry';\nimport { EventListener } from '@fluentui/react-component-event-listener';\nimport { Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport * as keyboardKey from 'keyboard-key';\nimport { disableBodyScroll, enableBodyScroll } from './utils';\n\nimport {\n  UIComponentProps,\n  commonPropTypes,\n  ContentComponentProps,\n  AutoControlledComponent,\n  doesNodeContainClick,\n  applyAccessibilityKeyHandlers,\n  getOrGenerateIdFromShorthand,\n  createShorthand,\n} from '../../utils';\nimport { ComponentEventHandler, WithAsProp, ShorthandValue, withSafeTypeForAs } from '../../types';\nimport Button, { ButtonProps } from '../Button/Button';\nimport ButtonGroup from '../Button/ButtonGroup';\nimport Box, { BoxProps } from '../Box/Box';\nimport Header, { HeaderProps } from '../Header/Header';\nimport Portal, { TriggerAccessibility } from '../Portal/Portal';\nimport Flex from '../Flex/Flex';\nimport DialogFooter, { DialogFooterProps } from './DialogFooter';\n\nexport interface DialogSlotClassNames {\n  header: string;\n  headerAction: string;\n  content: string;\n  overlay: string;\n  footer: string;\n}\n\nexport interface DialogProps extends UIComponentProps, ContentComponentProps<ShorthandValue<BoxProps>> {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility;\n\n  /** A dialog can contain actions. */\n  actions?: ShorthandValue<BoxProps>;\n\n  /** A dialog can have a backdrop on its overlay. */\n  backdrop?: boolean;\n\n  /** A dialog can contain a cancel button. */\n  cancelButton?: ShorthandValue<ButtonProps>;\n\n  /** A dialog can be closed when a user clicks outside of it. */\n  closeOnOutsideClick?: boolean;\n\n  /** A dialog can contain a confirm button. */\n  confirmButton?: ShorthandValue<ButtonProps>;\n\n  /** A dialog can be open by default. */\n  defaultOpen?: boolean;\n\n  /** A dialog can contain a header. */\n  header?: ShorthandValue<HeaderProps>;\n\n  /** A dialog can contain a button next to the header. */\n  headerAction?: ShorthandValue<ButtonProps>;\n\n  /** A dialog can contain a footer. */\n  footer?: ShorthandValue<DialogFooterProps>;\n\n  /**\n   * Called after a user clicks the cancel button.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onCancel?: ComponentEventHandler<DialogProps>;\n\n  /**\n   * Called after a user clicks the confirm button.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onConfirm?: ComponentEventHandler<DialogProps>;\n\n  /**\n   * Called after a user opens the dialog.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onOpen?: ComponentEventHandler<DialogProps>;\n\n  /** A dialog's open state can be controlled. */\n  open?: boolean;\n\n  /** A dialog can contain a overlay. */\n  overlay?: ShorthandValue<BoxProps>;\n\n  /** Controls whether or not focus trap should be applied, using boolean or FocusTrapZoneProps type value. */\n  trapFocus?: true | FocusTrapZoneProps;\n\n  /** Element to be rendered in-place where the dialog is defined. */\n  trigger?: JSX.Element;\n}\n\nexport interface DialogState {\n  contentId?: string;\n  headerId?: string;\n  open?: boolean;\n}\nconst dialogsCounterAttribute = 'fluent-dialogs-count';\nexport const dialogClassName = 'ui-dialog';\nexport const dialogSlotClassNames: DialogSlotClassNames = {\n  header: `${dialogClassName}__header`,\n  headerAction: `${dialogClassName}__headerAction`,\n  content: `${dialogClassName}__content`,\n  overlay: `${dialogClassName}__overlay`,\n  footer: `${dialogClassName}__footer`,\n};\n\nclass Dialog extends AutoControlledComponent<WithAsProp<DialogProps>, DialogState> {\n  static displayName = 'Dialog';\n  static deprecated_className = dialogClassName;\n\n  static propTypes = {\n    ...commonPropTypes.createCommon({\n      children: false,\n      content: 'shorthand',\n    }),\n    actions: customPropTypes.itemShorthand,\n    backdrop: PropTypes.bool,\n    headerAction: customPropTypes.itemShorthand,\n    cancelButton: customPropTypes.itemShorthand,\n    closeOnOutsideClick: PropTypes.bool,\n    confirmButton: customPropTypes.itemShorthand,\n    defaultOpen: PropTypes.bool,\n    header: customPropTypes.itemShorthand,\n    onCancel: PropTypes.func,\n    onConfirm: PropTypes.func,\n    onOpen: PropTypes.func,\n    open: PropTypes.bool,\n    overlay: customPropTypes.itemShorthand,\n    trapFocus: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n    trigger: PropTypes.any,\n  };\n\n  static defaultProps = {\n    accessibility: dialogBehavior as Accessibility,\n    actions: {},\n    backdrop: true,\n    closeOnOutsideClick: true,\n    overlay: {},\n    footer: {},\n    trapFocus: true,\n  };\n\n  static autoControlledProps = ['open'];\n  static Footer = DialogFooter;\n\n  actionHandlers = {\n    closeAndFocusTrigger: e => {\n      this.handleDialogCancel(e);\n      e.stopPropagation();\n\n      _.invoke(this.triggerRef, 'current.focus');\n    },\n    close: e => this.handleDialogCancel(e),\n  };\n  contentRef = React.createRef<HTMLElement>() as React.MutableRefObject<HTMLElement>;\n  overlayRef = React.createRef<HTMLElement>() as React.MutableRefObject<HTMLElement>;\n  triggerRef = React.createRef<HTMLElement>();\n\n  getInitialAutoControlledState(): DialogState {\n    return {\n      open: false,\n    };\n  }\n\n  static getAutoControlledStateFromProps(props: DialogProps, state: DialogState): Partial<DialogState> {\n    return {\n      contentId: getOrGenerateIdFromShorthand('dialog-content-', props.content, state.contentId),\n      headerId: getOrGenerateIdFromShorthand('dialog-header-', props.header, state.headerId),\n    };\n  }\n\n  handleDialogCancel = (e: Event | React.SyntheticEvent) => {\n    _.invoke(this.props, 'onCancel', e, { ...this.props, open: false });\n    this.setState({ open: false });\n  };\n\n  handleDialogConfirm = (e: React.SyntheticEvent) => {\n    _.invoke(this.props, 'onConfirm', e, { ...this.props, open: false });\n    this.setState({ open: false });\n  };\n\n  handleDialogOpen = (e: React.SyntheticEvent) => {\n    _.invoke(this.props, 'onOpen', e, { ...this.props, open: true });\n    this.setState({ open: true });\n  };\n\n  handleCancelButtonOverrides = (predefinedProps: ButtonProps) => ({\n    onClick: (e: React.SyntheticEvent, buttonProps: ButtonProps) => {\n      _.invoke(predefinedProps, 'onClick', e, buttonProps);\n      this.handleDialogCancel(e);\n    },\n  });\n\n  handleConfirmButtonOverrides = (predefinedProps: ButtonProps) => ({\n    onClick: (e: React.SyntheticEvent, buttonProps: ButtonProps) => {\n      _.invoke(predefinedProps, 'onClick', e, buttonProps);\n      this.handleDialogConfirm(e);\n    },\n  });\n\n  handleOverlayClick = (e: MouseEvent) => {\n    // Dialog has different conditions to close than Popup, so we don't need to iterate across all\n    // refs\n    const isInsideContentClick = doesNodeContainClick(this.contentRef.current, e, this.context.target);\n    const isInsideOverlayClick = doesNodeContainClick(this.overlayRef.current, e, this.context.target);\n\n    const shouldClose = !isInsideContentClick && isInsideOverlayClick;\n\n    if (shouldClose) {\n      this.handleDialogCancel(e);\n    }\n  };\n\n  handleDocumentKeydown = (getRefs: Function) => (e: KeyboardEvent) => {\n    // if focus was lost from Dialog, for e.g. when click on Dialog's content\n    // and ESC is pressed, the opened Dialog should get closed and the trigger should get focus\n    const lastOverlayRef = getRefs().pop();\n    const isLastOpenedDialog: boolean = lastOverlayRef && lastOverlayRef.current === this.overlayRef.current;\n\n    if (keyboardKey.getCode(e) === keyboardKey.Escape && isLastOpenedDialog) {\n      this.handleDialogCancel(e);\n      _.invoke(this.triggerRef, 'current.focus');\n    }\n  };\n\n  lockBodyScroll() {\n    const openDialogs = (+this.context.target.body.getAttribute(dialogsCounterAttribute) || 0) + 1;\n    this.context.target.body.setAttribute(dialogsCounterAttribute, `${openDialogs}`);\n\n    // Avoid to block scroll in nested dialogs\n    if (openDialogs === 1) {\n      disableBodyScroll(this.context.target.body);\n    }\n  }\n\n  unlockBodyScroll() {\n    const openDialogs = (+this.context.target.body.getAttribute(dialogsCounterAttribute) || 0) - 1;\n    this.context.target.body.setAttribute(dialogsCounterAttribute, `${openDialogs}`);\n\n    // Only enables scroll if all dialogs are closed\n    if (openDialogs === 0) {\n      enableBodyScroll(this.context.target.body);\n      this.context.target.body.removeAttribute(dialogsCounterAttribute);\n    }\n  }\n\n  componentDidUpdate(_, prevState) {\n    // Open -> Closed\n    if (prevState.open && !this.state.open) {\n      this.unlockBodyScroll();\n    }\n    // Closed -> Open\n    if (!prevState.open && this.state.open) {\n      this.lockBodyScroll();\n    }\n  }\n\n  componentDidMount() {\n    if (this.state.open) {\n      this.lockBodyScroll();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.state.open) {\n      this.unlockBodyScroll();\n    }\n  }\n\n  renderComponent({ accessibility, classes, ElementType, styles, unhandledProps, rtl }) {\n    const {\n      actions,\n      cancelButton,\n      closeOnOutsideClick,\n      confirmButton,\n      content,\n      header,\n      headerAction,\n      overlay,\n      trapFocus,\n      trigger,\n      footer,\n    } = this.props;\n    const { open } = this.state;\n\n    const cancelElement = createShorthand(Button, cancelButton, {\n      overrideProps: this.handleCancelButtonOverrides,\n    });\n\n    const confirmElement = createShorthand(Button, confirmButton, {\n      defaultProps: () => ({\n        primary: true,\n      }),\n      overrideProps: this.handleConfirmButtonOverrides,\n    });\n\n    const dialogActions =\n      (cancelElement || confirmElement) &&\n      ButtonGroup.create(actions, {\n        defaultProps: () => ({\n          styles: styles.actions,\n        }),\n        overrideProps: {\n          content: (\n            <Flex gap=\"gap.smaller\">\n              {cancelElement}\n              {confirmElement}\n            </Flex>\n          ),\n        },\n      });\n\n    const dialogContent = (\n      <Ref innerRef={this.contentRef}>\n        <ElementType\n          className={classes.root}\n          {...accessibility.attributes.popup}\n          {...unhandledProps}\n          {...applyAccessibilityKeyHandlers(accessibility.keyHandlers.popup, unhandledProps)}\n        >\n          {Header.create(header, {\n            defaultProps: () => ({\n              as: 'h2',\n              className: dialogSlotClassNames.header,\n              styles: styles.header,\n              ...accessibility.attributes.header,\n            }),\n          })}\n          {createShorthand(Button, headerAction, {\n            defaultProps: () => ({\n              className: dialogSlotClassNames.headerAction,\n              styles: styles.headerAction,\n              text: true,\n              iconOnly: true,\n              ...accessibility.attributes.headerAction,\n            }),\n          })}\n          {Box.create(content, {\n            defaultProps: () => ({\n              styles: styles.content,\n              className: dialogSlotClassNames.content,\n              ...accessibility.attributes.content,\n            }),\n          })}\n          {DialogFooter.create(footer, {\n            overrideProps: {\n              content: dialogActions,\n              className: dialogSlotClassNames.footer,\n              styles: styles.footer,\n            },\n          })}\n        </ElementType>\n      </Ref>\n    );\n\n    const triggerAccessibility: TriggerAccessibility = {\n      attributes: accessibility.attributes.trigger,\n      keyHandlers: accessibility.keyHandlers.trigger,\n    };\n\n    return (\n      <Portal\n        onTriggerClick={this.handleDialogOpen}\n        open={open}\n        trapFocus={trapFocus}\n        trigger={trigger}\n        triggerAccessibility={triggerAccessibility}\n        triggerRef={this.triggerRef}\n      >\n        <Unstable_NestingAuto>\n          {(getRefs, nestingRef) => (\n            <>\n              <Ref\n                innerRef={(contentNode: HTMLElement) => {\n                  this.overlayRef.current = contentNode;\n                  nestingRef.current = contentNode;\n                }}\n              >\n                {Box.create(overlay, {\n                  defaultProps: () => ({\n                    className: dialogSlotClassNames.overlay,\n                    styles: styles.overlay,\n                  }),\n                  overrideProps: { content: dialogContent },\n                })}\n              </Ref>\n\n              {closeOnOutsideClick && (\n                <EventListener listener={this.handleOverlayClick} target={this.context.target} type=\"click\" capture />\n              )}\n              <EventListener\n                listener={this.handleDocumentKeydown(getRefs)}\n                target={this.context.target}\n                type=\"keydown\"\n                capture\n              />\n            </>\n          )}\n        </Unstable_NestingAuto>\n      </Portal>\n    );\n  }\n}\n\n/**\n * A Dialog displays important information on top of a page which requires a user's attention, confirmation, or interaction.\n * Dialogs are purposefully interruptive, so they should be used sparingly.\n *\n * @accessibility\n * Implements [ARIA Dialog (Modal)](https://www.w3.org/TR/wai-aria-practices-1.1/#dialog_modal) design pattern.\n * @accessibilityIssues\n * [NVDA narrates dialog title and button twice](https://github.com/nvaccess/nvda/issues/10003)\n * [NVDA does not recognize the ARIA 1.1 values of aria-haspopup](https://github.com/nvaccess/nvda/issues/8235)\n * [Jaws does not announce token values of aria-haspopup](https://github.com/FreedomScientific/VFO-standards-support/issues/33)\n * [Issue 989517: VoiceOver narrates dialog content and button twice](https://bugs.chromium.org/p/chromium/issues/detail?id=989517)\n */\nexport default withSafeTypeForAs<typeof Dialog, DialogProps>(Dialog);\n"],"file":"Dialog.js"}