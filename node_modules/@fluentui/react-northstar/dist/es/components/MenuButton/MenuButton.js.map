{"version":3,"sources":["components/MenuButton/MenuButton.tsx"],"names":["React","PropTypes","menuButtonBehavior","Ref","customPropTypes","AutoControlledComponent","applyAccessibilityKeyHandlers","getOrGenerateIdFromShorthand","commonPropTypes","createShorthandFactory","Popup","Menu","focusMenuItem","ALIGNMENTS","POSITIONS","menuButtonClassName","menuButtonSlotClassNames","menu","MenuButton","createRef","closeMenu","e","openAndFocusFirst","openAndFocus","openAndFocusLast","open","callback","props","setState","predefinedProps","onItemClick","itemProps","handleOpenChange","which","preventDefault","menuRef","current","ElementType","classes","unhandledProps","accessibility","styles","contextMenu","accessibilityProp","align","className","defaultOpen","flipBoundary","mountNode","mouseLeaveDelay","offset","on","onOpenChange","overflowBoundary","pointing","position","positionFixed","tabbableTrigger","stylesProp","target","trigger","unstable_pinned","variables","popupProps","content","create","defaultProps","attributes","vertical","overrideProps","handleMenuOverrides","state","popupContent","children","undefined","trapFocus","inline","autoFocus","popup","root","keyHandlers","triggerRef","menuId","triggerId","createCommon","as","oneOf","bool","domNode","number","oneOfType","func","arrayOf","object","onMenuItemClick","any","every","disallow","itemShorthandWithoutJSX","Component","mappedProp"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport * as _ from 'lodash';\nimport { Accessibility, menuButtonBehavior } from '@fluentui/accessibility';\nimport { Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\n\nimport {\n  AutoControlledComponent,\n  RenderResultConfig,\n  applyAccessibilityKeyHandlers,\n  getOrGenerateIdFromShorthand,\n  commonPropTypes,\n  StyledComponentProps,\n} from '../../utils';\nimport { ShorthandValue, ComponentEventHandler, ShorthandCollection } from '../../types';\n\nimport { createShorthandFactory, ShorthandFactory } from '../../utils/factories';\nimport Popup, { PopupProps, PopupEvents, PopupEventsArray } from '../Popup/Popup';\nimport Menu, { MenuProps } from '../Menu/Menu';\nimport { MenuItemProps } from '../Menu/MenuItem';\nimport { focusMenuItem } from './focusUtils';\nimport { ALIGNMENTS, POSITIONS, PositioningProps } from '../../utils/positioner';\n\nexport interface MenuButtonSlotClassNames {\n  menu: string;\n}\n\nexport interface MenuButtonProps extends StyledComponentProps<MenuButtonProps>, PositioningProps {\n  /**\n   * Accessibility behavior if overridden by the user.\n   * @default menuButtonBehavior\n   */\n  accessibility?: Accessibility;\n\n  /** Additional CSS class name(s) to apply.  */\n  className?: string;\n\n  /** Initial value for 'open'. */\n  defaultOpen?: boolean;\n\n  /** Existing element the popup should be bound to. */\n  mountNode?: HTMLElement;\n\n  /** Delay in ms for the mouse leave event, before the popup will be closed. */\n  mouseLeaveDelay?: number;\n\n  /** Events triggering the popup. */\n  on?: PopupEvents | PopupEventsArray;\n\n  /** Defines whether popup is displayed. */\n  open?: boolean;\n\n  /**\n   * Called after user's click on a menu item.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onMenuItemClick?: ComponentEventHandler<MenuItemProps>;\n\n  /**\n   * Event for request to change 'open' value.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and proposed value.\n   */\n  onOpenChange?: ComponentEventHandler<PopupProps>;\n\n  /** A popup can show a pointer to trigger. */\n  pointing?: boolean;\n\n  /**\n   * DOM element that should be used as popup's target - instead of 'trigger' element that is used by default.\n   */\n  target?: HTMLElement;\n\n  /** Element to be rendered in-place where the popup is defined. */\n  trigger?: JSX.Element;\n\n  /** Whether the trigger should be tabbable */\n  tabbableTrigger?: boolean;\n\n  /** Shorthand for menu configuration */\n  menu?: ShorthandValue<MenuProps> | ShorthandCollection<MenuItemProps>;\n\n  /** Determines if the MenuButton behaves as context menu */\n  contextMenu?: boolean;\n}\n\nexport interface MenuButtonState {\n  open: boolean;\n  menuId: string;\n  triggerId: string;\n}\n\nexport const menuButtonClassName = 'ui-menubutton';\nexport const menuButtonSlotClassNames: MenuButtonSlotClassNames = {\n  menu: `${menuButtonClassName}__menu`,\n};\n\n/**\n * A MenuButton displays a menu connected to trigger element.\n * @accessibility\n */\nexport default class MenuButton extends AutoControlledComponent<MenuButtonProps, MenuButtonState> {\n  static displayName = 'MenuButton';\n\n  static deprecated_className = menuButtonClassName;\n\n  static create: ShorthandFactory<MenuButtonProps>;\n\n  static propTypes = {\n    ...commonPropTypes.createCommon({\n      as: true,\n      content: false,\n    }),\n    align: PropTypes.oneOf(ALIGNMENTS),\n    defaultOpen: PropTypes.bool,\n    mountNode: customPropTypes.domNode,\n    mouseLeaveDelay: PropTypes.number,\n    offset: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.arrayOf(PropTypes.number) as PropTypes.Requireable<[number, number]>,\n    ]),\n    on: PropTypes.oneOfType([\n      PropTypes.oneOf(['hover', 'click', 'focus', 'context']),\n      PropTypes.arrayOf(PropTypes.oneOf(['click', 'focus', 'context'])),\n      PropTypes.arrayOf(PropTypes.oneOf(['hover', 'focus', 'context'])),\n    ]),\n    flipBoundary: PropTypes.oneOfType([\n      PropTypes.object as PropTypes.Requireable<HTMLElement>,\n      PropTypes.arrayOf(PropTypes.object) as PropTypes.Requireable<HTMLElement[]>,\n      PropTypes.oneOf<'clippingParents' | 'window' | 'scrollParent'>(['clippingParents', 'window', 'scrollParent']),\n    ]),\n    overflowBoundary: PropTypes.oneOfType([\n      PropTypes.object as PropTypes.Requireable<HTMLElement>,\n      PropTypes.arrayOf(PropTypes.object) as PropTypes.Requireable<HTMLElement[]>,\n      PropTypes.oneOf<'clippingParents' | 'window' | 'scrollParent'>(['clippingParents', 'window', 'scrollParent']),\n    ]),\n    open: PropTypes.bool,\n    onMenuItemClick: PropTypes.func,\n    onOpenChange: PropTypes.func,\n    position: PropTypes.oneOf(POSITIONS),\n    positionFixed: PropTypes.bool,\n    target: PropTypes.any,\n    trigger: customPropTypes.every([customPropTypes.disallow(['children']), PropTypes.any]),\n    tabbableTrigger: PropTypes.bool,\n    unstable_pinned: PropTypes.bool,\n    menu: PropTypes.oneOfType([\n      customPropTypes.itemShorthandWithoutJSX,\n      PropTypes.arrayOf(customPropTypes.itemShorthandWithoutJSX),\n    ]),\n    contextMenu: PropTypes.bool,\n  };\n\n  static defaultProps: MenuButtonProps = {\n    accessibility: menuButtonBehavior,\n    align: 'start',\n    position: 'below',\n  };\n\n  static autoControlledProps = ['open'];\n\n  static getAutoControlledStateFromProps(props: MenuButtonProps, state: MenuButtonState): Partial<MenuButtonState> {\n    return {\n      menuId: getOrGenerateIdFromShorthand('menubutton-menu-', props.menu, state.menuId),\n      triggerId: getOrGenerateIdFromShorthand('menubutton-trigger-', props.trigger, state.triggerId),\n    };\n  }\n\n  triggerRef = React.createRef<HTMLElement>();\n  menuRef = React.createRef<HTMLElement>();\n\n  actionHandlers = {\n    closeMenu: e => this.closeMenu(e),\n    openAndFocusFirst: e => this.openAndFocus(e, 'first'),\n    openAndFocusLast: e => this.openAndFocus(e, 'last'),\n  };\n\n  closeMenu(e: React.KeyboardEvent) {\n    this.handleOpenChange(e, false);\n  }\n\n  openAndFocus(e: React.KeyboardEvent, which: 'first' | 'last') {\n    e.preventDefault();\n    this.handleOpenChange(e, true, () => focusMenuItem(this.menuRef.current, which));\n  }\n\n  handleOpenChange = (e: React.SyntheticEvent, open: boolean, callback?: () => void) => {\n    _.invoke(this.props, 'onOpenChange', e, { ...this.props, open });\n    this.setState({ open }, callback);\n  };\n\n  handleMenuOverrides = (predefinedProps?: MenuProps) => ({\n    onItemClick: (e: React.SyntheticEvent, itemProps: MenuItemProps) => {\n      _.invoke(predefinedProps, 'onItemClick', e, itemProps);\n      _.invoke(this.props, 'onMenuItemClick', e, itemProps);\n      if (!itemProps || !itemProps.menu) {\n        // do not close if clicked on item with submenu\n        this.handleOpenChange(e, false);\n      }\n    },\n  });\n\n  renderComponent({\n    ElementType,\n    classes,\n    unhandledProps,\n    accessibility,\n    styles,\n  }: RenderResultConfig<MenuButtonProps>): React.ReactNode {\n    const {\n      // MenuButton props:\n      contextMenu,\n      menu,\n      // Popup props:\n      accessibility: accessibilityProp,\n      align,\n      className,\n      defaultOpen,\n      flipBoundary,\n      mountNode,\n      mouseLeaveDelay,\n      offset,\n      on,\n      onOpenChange,\n      open,\n      overflowBoundary,\n      pointing,\n      position,\n      positionFixed,\n      tabbableTrigger,\n      styles: stylesProp,\n      target,\n      trigger,\n      unstable_pinned,\n      variables,\n    } = this.props;\n\n    const popupProps = {\n      accessibility: accessibilityProp,\n      align,\n      className,\n      defaultOpen,\n      mountNode,\n      mouseLeaveDelay,\n      flipBoundary,\n      offset,\n      on,\n      onOpenChange,\n      open,\n      overflowBoundary,\n      pointing,\n      position,\n      positionFixed,\n      tabbableTrigger,\n      styles: stylesProp,\n      target,\n      trigger,\n      unstable_pinned,\n      variables,\n    };\n\n    const content = Menu.create(menu, {\n      defaultProps: () => ({\n        ...accessibility.attributes.menu,\n        vertical: true,\n        className: menuButtonSlotClassNames.menu,\n      }),\n      overrideProps: this.handleMenuOverrides,\n    });\n\n    const overrideProps: PopupProps = {\n      accessibility: () => accessibility,\n      open: this.state.open,\n      onOpenChange: (e, { open }) => {\n        this.handleOpenChange(e, open);\n      },\n      content: {\n        styles: styles.popupContent,\n        content: content && <Ref innerRef={this.menuRef}>{content}</Ref>,\n      },\n      children: undefined, // force-reset `children` defined for `Popup` as it collides with the `trigger\n      ...(contextMenu\n        ? {\n            on: 'context',\n            trapFocus: true,\n            tabbableTrigger: false,\n          }\n        : {\n            inline: true,\n            autoFocus: true,\n          }),\n    };\n\n    const popup = Popup.create(popupProps, { overrideProps });\n\n    if (contextMenu) {\n      return popup;\n    }\n\n    return (\n      <ElementType\n        className={classes.root}\n        {...accessibility.attributes.root}\n        {...unhandledProps}\n        {...applyAccessibilityKeyHandlers(accessibility.keyHandlers.root, unhandledProps)}\n      >\n        <Ref innerRef={this.triggerRef}>{popup}</Ref>\n      </ElementType>\n    );\n  }\n}\n\nMenuButton.create = createShorthandFactory({ Component: MenuButton, mappedProp: 'menu' });\n"],"file":"MenuButton.js"}