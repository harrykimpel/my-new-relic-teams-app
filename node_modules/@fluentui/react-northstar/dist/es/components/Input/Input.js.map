{"version":3,"sources":["components/Input/Input.tsx"],"names":["inputBehavior","handleRef","Ref","customPropTypes","React","PropTypes","cx","AutoControlledComponent","partitionHTMLProps","commonPropTypes","applyAccessibilityKeyHandlers","withSafeTypeForAs","Box","inputClassName","inputSlotClassNames","input","icon","Input","createRef","clear","e","props","clearable","state","value","stopPropagation","nativeEvent","handleOnClear","predefinedProps","onClick","disabled","inputRef","current","focus","setState","length","accessibility","ElementType","unhandledProps","styles","variables","className","type","wrapper","htmlInputProps","restProps","create","defaultProps","attributes","root","children","inputElement","as","onChange","handleChange","keyHandlers","computeIcon","overrideProps","handleIconOverrides","hasValue","createCommon","content","bool","defaultValue","oneOfType","string","number","fluid","shorthandAllowingChildren","iconPosition","oneOf","itemShorthand","ref","inline","inverted","func","wrapperShorthand"],"mappings":"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","sourcesContent":["import { Accessibility, inputBehavior } from '@fluentui/accessibility';\nimport { handleRef, Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport * as _ from 'lodash';\n\nimport {\n  AutoControlledComponent,\n  RenderResultConfig,\n  partitionHTMLProps,\n  UIComponentProps,\n  ChildrenComponentProps,\n  commonPropTypes,\n  applyAccessibilityKeyHandlers,\n} from '../../utils';\nimport { SupportedIntrinsicInputProps } from '../../utils/htmlPropsUtils';\nimport { WithAsProp, ShorthandValue, ComponentEventHandler, withSafeTypeForAs } from '../../types';\nimport Box, { BoxProps } from '../Box/Box';\n\nexport interface InputSlotClassNames {\n  input: string;\n  icon: string;\n}\n\nexport interface InputProps extends UIComponentProps, ChildrenComponentProps, SupportedIntrinsicInputProps {\n  /**\n   * Accessibility behavior if overridden by the user.\n   */\n  accessibility?: Accessibility;\n\n  /** A property that will change the icon on the input and clear the input on click on Cancel. */\n  clearable?: boolean;\n\n  /** The default value of the input. */\n  defaultValue?: string | string[];\n\n  /** An Input can be disabled. */\n  disabled?: boolean;\n\n  /** An input can take the width of its container. */\n  fluid?: boolean;\n\n  /** Optional Icon to display inside the Input. */\n  icon?: ShorthandValue<BoxProps>;\n\n  /** An Input with icon can format the icon to appear at the start or at the end of the input field. */\n  iconPosition?: 'start' | 'end';\n\n  /** An input can be used inline with text. */\n  inline?: boolean;\n\n  /** Shorthand for the input component. */\n  input?: ShorthandValue<BoxProps>;\n\n  /** An input can have inverted colors. */\n  inverted?: boolean;\n\n  /**\n   * Called on change.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and proposed value.\n   */\n  onChange?: ComponentEventHandler<InputProps & { value: string }>;\n\n  /** The HTML input type. */\n  type?: string;\n\n  /** Ref for input DOM node. */\n  inputRef?: React.Ref<HTMLElement>;\n\n  /** The value of the input. */\n  value?: string | number;\n\n  /** Shorthand for the wrapper component. */\n  wrapper?: ShorthandValue<BoxProps>;\n}\n\nexport interface InputState {\n  value?: InputProps['value'];\n  hasValue?: boolean;\n}\n\nexport const inputClassName = 'ui-input';\nexport const inputSlotClassNames: InputSlotClassNames = {\n  input: `${inputClassName}__input`,\n  icon: `${inputClassName}__icon`,\n};\n\nclass Input extends AutoControlledComponent<WithAsProp<InputProps>, InputState> {\n  inputRef = React.createRef<HTMLElement>();\n\n  static deprecated_className = inputClassName;\n\n  static displayName = 'Input';\n\n  static propTypes = {\n    ...commonPropTypes.createCommon({\n      content: false,\n    }),\n    clearable: PropTypes.bool,\n    defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    disabled: PropTypes.bool,\n    fluid: PropTypes.bool,\n    icon: customPropTypes.shorthandAllowingChildren,\n    iconPosition: PropTypes.oneOf(['start', 'end']),\n    input: customPropTypes.itemShorthand,\n    inputRef: customPropTypes.ref,\n    inline: PropTypes.bool,\n    inverted: PropTypes.bool,\n    onChange: PropTypes.func,\n    type: PropTypes.string,\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    wrapper: customPropTypes.wrapperShorthand,\n  };\n\n  static defaultProps = {\n    accessibility: inputBehavior,\n    type: 'text',\n    wrapper: {},\n    iconPosition: 'end',\n  };\n\n  static autoControlledProps = ['value'];\n\n  static getAutoControlledStateFromProps(props: InputProps, state: InputState): Partial<InputState> {\n    const { value } = state;\n\n    return {\n      hasValue: !!value && (value as string).length !== 0,\n    };\n  }\n\n  actionHandlers = {\n    clear: (e: React.KeyboardEvent) => {\n      if (this.props.clearable && this.state.value !== '') {\n        e.stopPropagation();\n        e.nativeEvent && e.nativeEvent.stopPropagation();\n        this.handleOnClear(e);\n      }\n    },\n  };\n\n  renderComponent({ accessibility, ElementType, unhandledProps, styles, variables }: RenderResultConfig<InputProps>) {\n    const { className, input, inputRef, type, wrapper, disabled } = this.props;\n    const { value = '' } = this.state;\n    const [htmlInputProps, restProps] = partitionHTMLProps(unhandledProps);\n\n    return Box.create(wrapper, {\n      defaultProps: () => ({\n        ...accessibility.attributes.root,\n        className: cx(inputClassName, className),\n        children: (\n          <>\n            <Ref\n              innerRef={(inputElement: HTMLElement) => {\n                handleRef(this.inputRef, inputElement);\n                handleRef(inputRef, inputElement);\n              }}\n            >\n              {Box.create(input || type, {\n                defaultProps: () => ({\n                  ...htmlInputProps,\n                  as: 'input',\n                  disabled,\n                  type,\n                  value,\n                  className: inputSlotClassNames.input,\n                  styles: styles.input,\n                  onChange: this.handleChange,\n                  ...applyAccessibilityKeyHandlers(accessibility.keyHandlers.input, htmlInputProps),\n                }),\n              })}\n            </Ref>\n            {Box.create(this.computeIcon(), {\n              defaultProps: () => ({\n                className: inputSlotClassNames.icon,\n                styles: styles.icon,\n              }),\n              overrideProps: this.handleIconOverrides,\n            })}\n          </>\n        ),\n        styles: styles.root,\n        ...restProps,\n      }),\n      overrideProps: {\n        as: (wrapper && (wrapper as any).as) || ElementType,\n      },\n    });\n  }\n\n  handleIconOverrides = predefinedProps => ({\n    onClick: (e: React.SyntheticEvent) => {\n      if (!this.props.disabled) {\n        this.handleOnClear(e);\n        this.inputRef.current.focus();\n      }\n\n      _.invoke(predefinedProps, 'onClick', e, this.props);\n    },\n  });\n\n  handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (this.props.disabled) {\n      return;\n    }\n\n    const value = _.get(e, 'target.value');\n\n    _.invoke(this.props, 'onChange', e, { ...this.props, value });\n\n    this.setState({ value });\n  };\n\n  handleOnClear = (e: React.SyntheticEvent) => {\n    if (this.props.clearable) {\n      _.invoke(this.props, 'onChange', e, { ...this.props, value: '' });\n      this.setState({ value: '' });\n    }\n  };\n\n  computeIcon = (): ShorthandValue<BoxProps> => {\n    const { clearable, icon } = this.props;\n    const { value } = this.state;\n\n    if (clearable && (value as string).length !== 0) {\n      return {};\n    }\n\n    return icon || null;\n  };\n}\n\n/**\n * An Input is a field used to elicit an input from a user.\n *\n * @accessibility\n * For good screen reader experience set `aria-label` or `aria-labelledby` attribute for input.\n */\nexport default withSafeTypeForAs<typeof Input, InputProps, 'div'>(Input);\n"],"file":"Input.js"}