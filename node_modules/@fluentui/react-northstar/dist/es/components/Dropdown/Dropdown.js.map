{"version":3,"sources":["components/Dropdown/Dropdown.tsx"],"names":["handleRef","Ref","customPropTypes","indicatorBehavior","React","PropTypes","cx","keyboardKey","withSafeTypeForAs","Downshift","AutoControlledComponent","commonPropTypes","isFromKeyboard","createShorthand","List","DropdownItem","DropdownSelectedItem","DropdownSearchInput","Button","screenReaderContainerStyles","Box","Portal","ALIGNMENTS","POSITIONS","Popper","getPopperPropsFromShorthand","dropdownClassName","dropdownSlotClassNames","clearIndicator","container","toggleIndicator","item","itemsList","searchInput","selectedItem","selectedItems","triggerButton","Dropdown","createRef","e","props","value","state","changes","activeElement","context","target","type","stateChangeTypes","blurButton","isOpen","listRef","current","search","multiple","highlightFirstItemOnOpen","items","getA11ySelectionMessage","open","newState","changeInput","shouldValueChange","inputValue","length","searchQuery","highlightedIndex","shouldMenuClose","undefined","keyDownEnter","clickItem","shouldAddHighlightedIndex","isSameItemSelected","newValue","getSelectedItemAsString","indexOf","onAdd","setA11ySelectionMessage","setTimeout","selectedItemsRef","scrollTop","scrollHeight","tryFocusTriggerButton","keyDownEscape","keyDownArrowDown","keyDownArrowUp","highlightedIndexOnArrowKeyOpen","getHighlightedIndexOnArrowKeyOpen","focus","itemIsFromKeyboard","mouseUp","clickButton","keyDownSpaceButton","itemMouseEnter","unknown","handlers","filter","Boolean","setStateAndInvokeHandler","index","activeSelectedIndex","getItemProps","selected","predefinedProps","accessibilityItemProps","disabled","onClick","stopPropagation","nativeEvent","stopImmediatePropagation","rtl","onRemove","dropdownSelectedItemProps","handleSelectedItemRemove","onKeyDown","handleSelectedItemKeyDown","selectItemAtIndex","toggleMenu","accessibilityComboboxProps","getInputProps","handleInputBlur","searchInputProps","setState","focused","handleInputKeyDown","getCode","Tab","handleTabSelection","ArrowLeft","trySetLastSelectedItemAsActive","ArrowRight","Backspace","tryRemoveItemFromValue","accessibilityInputProps","onBlur","onChange","onFocus","onInputBlur","onInputKeyDown","filteredItems","moveFocusOnTab","preventDefault","inputRef","selectionStart","inputElement","selectionEnd","removeItemFromValue","getInitialAutoControlledState","tryFocusSearchInput","accessibilityInputPropsKeyDown","keyCode","Escape","keyString","String","fromCharCode","test","setHighlightedIndexOnCharKeyDown","relatedTarget","buttonRef","filteredItemStrings","startingString","newStartingString","toLowerCase","newHighlightedIndex","setStartingString","startsWith","handlerNames","event","proposedValue","forEach","handlerName","itemToString","placeholder","isArrowUp","isArrowDown","itemsLength","offset","a11ySelectionStatus","clearA11ySelectionMessage","clearStartingString","a11yStatusCleanupTime","charKeyPressedCleanupTime","cancel","ElementType","classes","styles","variables","unhandledProps","clearable","getA11yStatusMessage","root","handleChange","downshiftStateReducer","handleStateChange","defaultView","getMenuProps","getRootProps","getToggleButtonProps","refKey","suppressRefError","innerRef","accessibilityRootPropsRest","showClearIndicator","containerRef","handleContainerClick","renderSelectedItems","renderSearchInput","renderTriggerButton","create","defaultProps","className","accessibility","tabIndex","role","overrideProps","handleClear","renderItemsList","content","triggerButtonId","defaultTriggerButtonId","triggerButtonProps","handleTriggerButtonOrListFocus","handleTriggerButtonBlur","handleTriggerButtonKeyDown","l","join","restTriggerButtonProps","id","fluid","inline","noPlaceholder","handleSearchInputOverrides","align","position","unstable_pinned","list","renderItems","accessibilityMenuProps","handleListKeyDown","listElement","listProps","handleListBlur","renderItem","checkable","checkableIndicator","footerItem","renderItemsListFooter","headerItem","renderItemsListHeader","children","active","hasOwnProperty","key","header","handleItemOverrides","render","push","headerMessage","loading","loadingMessage","noResultsMessage","renderSelectedItem","map","isSelectedItemActive","handleSelectedItemOverrides","previousKey","nextKey","Delete","poppedItem","currentElement","pop","itemToValue","rawValue","normalizedValue","slice","filteredItemsByValue","filteredItem","modifiedState","createCommon","number","oneOf","bool","shorthandAllowingChildren","defaultActiveSelectedIndex","defaultOpen","defaultHighlightedIndex","defaultSearchQuery","string","defaultValue","oneOfType","itemShorthand","collectionShorthand","object","func","inverted","arrayOf","onOpenChange","onSearchQueryChange","onActiveSelectedIndexChange","onHighlightedIndexChange","as","isValidElement"],"mappings":"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","sourcesContent":["import { handleRef, Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport { indicatorBehavior } from '@fluentui/accessibility';\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport * as _ from 'lodash';\nimport cx from 'classnames';\nimport * as keyboardKey from 'keyboard-key';\n\nimport {\n  DebounceResultFn,\n  ShorthandRenderFunction,\n  ShorthandValue,\n  ShorthandCollection,\n  WithAsProp,\n  withSafeTypeForAs,\n} from '../../types';\nimport { ComponentSlotStylesInput, ComponentVariablesInput } from '@fluentui/styles';\nimport Downshift, {\n  DownshiftState,\n  StateChangeOptions,\n  A11yStatusMessageOptions,\n  GetMenuPropsOptions,\n  GetPropsCommonOptions,\n  GetInputPropsOptions,\n  GetToggleButtonPropsOptions,\n  GetItemPropsOptions,\n} from 'downshift';\nimport {\n  AutoControlledComponent,\n  RenderResultConfig,\n  commonPropTypes,\n  UIComponentProps,\n  isFromKeyboard,\n  createShorthand,\n} from '../../utils';\nimport List, { ListProps } from '../List/List';\nimport DropdownItem, { DropdownItemProps } from './DropdownItem';\nimport DropdownSelectedItem, { DropdownSelectedItemProps } from './DropdownSelectedItem';\nimport DropdownSearchInput, { DropdownSearchInputProps } from './DropdownSearchInput';\nimport Button, { ButtonProps } from '../Button/Button';\nimport { screenReaderContainerStyles } from '../../utils/accessibility/Styles/accessibilityStyles';\nimport Box, { BoxProps } from '../Box/Box';\nimport Portal from '../Portal/Portal';\nimport {\n  ALIGNMENTS,\n  POSITIONS,\n  Popper,\n  PositioningProps,\n  PopperShorthandProps,\n  getPopperPropsFromShorthand,\n} from '../../utils/positioner';\n\nexport interface DownshiftA11yStatusMessageOptions<Item> extends Required<A11yStatusMessageOptions<Item>> {}\n\nexport interface DropdownSlotClassNames {\n  clearIndicator: string;\n  container: string;\n  toggleIndicator: string;\n  item: string;\n  itemsList: string;\n  searchInput: string;\n  selectedItem: string;\n  selectedItems: string;\n  triggerButton: string;\n}\n\nexport interface DropdownProps extends UIComponentProps<DropdownProps, DropdownState>, PositioningProps {\n  /** The index of the currently selected item, if the dropdown supports multiple selection. */\n  activeSelectedIndex?: number;\n\n  /** A dropdown item can show a check indicator if it is selected. */\n  checkable?: boolean;\n\n  /** A slot for a selected indicator in the dropdown list. */\n  checkableIndicator?: ShorthandValue<BoxProps>;\n\n  /** A dropdown can be clearable to let users remove their selection. */\n  clearable?: boolean;\n\n  /** A slot for the clearing indicator. */\n  clearIndicator?: ShorthandValue<BoxProps>;\n\n  /** The initial value for the index of the currently selected item in a multiple selection. */\n  defaultActiveSelectedIndex?: number;\n\n  /** The initial value for 'open' in uncontrolled mode. */\n  defaultOpen?: boolean;\n\n  /** The initial list item index to highlight. */\n  defaultHighlightedIndex?: number;\n\n  /** The initial value for the search query if the dropdown has `search` enabled. */\n  defaultSearchQuery?: string;\n\n  /** The initial value (or value array if the array has multiple selection). */\n  defaultValue?: ShorthandValue<DropdownItemProps> | ShorthandCollection<DropdownItemProps>;\n\n  /** A dropdown can show that it cannot be interacted with. */\n  disabled?: boolean;\n\n  /** A dropdown can fill the width of its container. */\n  fluid?: boolean;\n\n  /** Object with callbacks for generating announcements for item selection and removal. */\n  getA11ySelectionMessage?: {\n    /**\n     * Callback that creates custom accessibility message a screen reader narrates on item added to selection.\n     * @param item - Dropdown added element.\n     */\n    onAdd?: (item: ShorthandValue<DropdownItemProps>) => string;\n    /**\n     * Callback that creates custom accessibility message a screen reader narrates on item removed from selection.\n     * @param item - Dropdown removed element.\n     */\n    onRemove?: (item: ShorthandValue<DropdownItemProps>) => string;\n  };\n\n  /**\n   * Callback that provides status announcement message with number of items in the list, using Arrow Up/Down keys to navigate through them and, if multiple, using Arrow Left/Right to navigate through selected items.\n   * @param messageGenerationProps - Object with properties to generate message from. See getA11yStatusMessage from Downshift repo.\n   */\n  getA11yStatusMessage?: (options: DownshiftA11yStatusMessageOptions<ShorthandValue<DropdownItemProps>>) => string;\n\n  /** A dropdown can highlight the first option when it opens. */\n  highlightFirstItemOnOpen?: boolean;\n\n  /** The index of the list item to highlight. */\n  highlightedIndex?: number;\n\n  /** A dropdown can be formatted to appear inline next to other elements. */\n  inline?: boolean;\n\n  /** A dropdown can have inverted colors. */\n  inverted?: boolean;\n\n  /** Array of props for generating list options (Dropdown.Item[]) and selected item labels (Dropdown.SelectedItem[]), if it's a multiple selection. */\n  items?: ShorthandCollection<DropdownItemProps>;\n\n  /**\n   * A function that converts an item to string. Used when dropdown has `search` enabled.\n   * By default, it:\n   * - returns the `header` property if it exists on an item\n   * - stringifies the item if it is a primitive type\n   */\n  itemToString?: (item: ShorthandValue<DropdownItemProps>) => string;\n\n  /** Used when comparing two items in multiple selection. Default comparison is by the header prop. */\n  itemToValue?: (item: ShorthandValue<DropdownItemProps>) => any;\n\n  /** A message to be displayed in the list header. */\n  headerMessage?: ShorthandValue<DropdownItemProps>;\n\n  /** A slot for dropdown list. */\n  list?: ShorthandValue<ListProps & { popper?: PopperShorthandProps }>;\n\n  /** A dropdown can show that it is currently loading data. */\n  loading?: boolean;\n\n  /** A message to be displayed in the list when the dropdown is loading. */\n  loadingMessage?: ShorthandValue<DropdownItemProps>;\n\n  /** When selecting an element with Tab, focus stays on the dropdown by default. If true, the focus will jump to next/previous element in DOM. Only available to multiple selection dropdowns. */\n  moveFocusOnTab?: boolean;\n\n  /** A dropdown can allow a user to select multiple items. */\n  multiple?: boolean;\n\n  /** A message to be displayed in the list when the dropdown has no items. */\n  noResultsMessage?: ShorthandValue<DropdownItemProps>;\n\n  /**\n   * Called when the dropdown's selected items index change.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and the new selected value(s).\n   */\n  onActiveSelectedIndexChange?: (event: React.MouseEvent | React.KeyboardEvent | null, data: DropdownProps) => void;\n\n  /**\n   * Called when the dropdown's highlighted index change.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and the new selected value(s).\n   */\n  onHighlightedIndexChange?: (event: React.MouseEvent | React.KeyboardEvent | null, data: DropdownProps) => void;\n\n  /**\n   * Called when the dropdown opens or closes.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props, with `open` reflecting the new open state.\n   */\n  onOpenChange?: (event: React.MouseEvent | React.KeyboardEvent | null, data: DropdownProps) => void;\n\n  /**\n   * Called when the dropdown's search query changes.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props, with `searchQuery` reflecting its new value.\n   */\n  onSearchQueryChange?: (event: React.MouseEvent | React.KeyboardEvent | null, data: DropdownProps) => void;\n\n  /**\n   * Called when the dropdown's selected item(s) change.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and the new selected value(s).\n   */\n  onChange?: (event: React.MouseEvent | React.KeyboardEvent | null, data: DropdownProps) => void;\n\n  /** A dropdown's open state can be controlled. */\n  open?: boolean;\n\n  /** A placeholder message for the input field. */\n  placeholder?: string;\n\n  /**\n   * A render function to customize how items are rendered in the dropdown.\n   *\n   * @param Component - The computed component for this slot.\n   * @param props - The computed props for this slot.\n   * @param children - The computed children for this slot.\n   */\n  renderItem?: ShorthandRenderFunction<DropdownItemProps>;\n\n  /**\n   * A custom render function for the selected item. Only applicable with the `multiple` prop.\n   *\n   * @param Component - The computed component for this slot.\n   * @param props - The computed props for this slot.\n   * @param children - The computed children for this slot.\n   */\n  renderSelectedItem?: ShorthandRenderFunction<DropdownSelectedItemProps>;\n\n  /** A dropdown can have a search field instead of trigger button. Can receive a custom search function that will replace the default equivalent. */\n  search?:\n    | boolean\n    | ((items: ShorthandCollection<DropdownItemProps>, searchQuery: string) => ShorthandCollection<DropdownItemProps>);\n\n  /** A search dropdown's input can be customized. */\n  searchInput?: ShorthandValue<DropdownSearchInputProps>;\n\n  /** Sets search query value (controlled mode). */\n  searchQuery?: string;\n\n  /** Controls the appearance of the indicator that shows/hides the list of items. */\n  toggleIndicator?: ShorthandValue<BoxProps>;\n\n  /** Controls the appearance of the trigger button if it's a selection dropdown (not a search). */\n  triggerButton?: ShorthandValue<ButtonProps>;\n\n  /** Sets the dropdown's currently selected value(s) in controlled mode. */\n  value?: ShorthandValue<DropdownItemProps> | ShorthandCollection<DropdownItemProps>;\n}\n\nexport interface DropdownState {\n  a11ySelectionStatus: string;\n  activeSelectedIndex: number;\n  filteredItems: ShorthandCollection<DropdownItemProps>;\n  filteredItemStrings: string[];\n  focused: boolean;\n  startingString: string;\n  open: boolean;\n  searchQuery: string;\n  highlightedIndex: number;\n  value: ShorthandCollection<DropdownItemProps>;\n  itemIsFromKeyboard: boolean;\n  isFromKeyboard: boolean;\n}\n\nexport const dropdownClassName = 'ui-dropdown';\nexport const dropdownSlotClassNames: DropdownSlotClassNames = {\n  clearIndicator: `${dropdownClassName}__clear-indicator`,\n  container: `${dropdownClassName}__container`,\n  toggleIndicator: `${dropdownClassName}__toggle-indicator`,\n  item: `${dropdownClassName}__item`,\n  itemsList: `${dropdownClassName}__items-list`,\n  searchInput: `${dropdownClassName}__searchinput`,\n  selectedItem: `${dropdownClassName}__selecteditem`,\n  selectedItems: `${dropdownClassName}__selected-items`,\n  triggerButton: `${dropdownClassName}__trigger-button`,\n};\n\nclass Dropdown extends AutoControlledComponent<WithAsProp<DropdownProps>, DropdownState> {\n  buttonRef = React.createRef<HTMLElement>();\n  inputRef = React.createRef<HTMLInputElement>();\n  listRef = React.createRef<HTMLElement>();\n  selectedItemsRef = React.createRef<HTMLDivElement>();\n  containerRef = React.createRef<HTMLDivElement>();\n\n  static displayName = 'Dropdown';\n\n  static deprecated_className = dropdownClassName;\n\n  static a11yStatusCleanupTime = 500;\n  static charKeyPressedCleanupTime = 500;\n\n  static propTypes = {\n    ...commonPropTypes.createCommon({\n      accessibility: false,\n      children: false,\n      content: false,\n    }),\n    activeSelectedIndex: PropTypes.number,\n    align: PropTypes.oneOf(ALIGNMENTS),\n    checkable: PropTypes.bool,\n    checkableIndicator: customPropTypes.shorthandAllowingChildren,\n    clearable: PropTypes.bool,\n    clearIndicator: customPropTypes.shorthandAllowingChildren,\n    defaultActiveSelectedIndex: PropTypes.number,\n    defaultOpen: PropTypes.bool,\n    defaultHighlightedIndex: PropTypes.number,\n    defaultSearchQuery: PropTypes.string,\n    defaultValue: PropTypes.oneOfType([customPropTypes.itemShorthand, customPropTypes.collectionShorthand]),\n    disabled: PropTypes.bool,\n    fluid: PropTypes.bool,\n    getA11ySelectionMessage: PropTypes.object,\n    getA11yStatusMessage: PropTypes.func,\n    highlightFirstItemOnOpen: PropTypes.bool,\n    highlightedIndex: PropTypes.number,\n    inline: PropTypes.bool,\n    inverted: PropTypes.bool,\n    items: customPropTypes.collectionShorthand,\n    itemToString: PropTypes.func,\n    itemToValue: PropTypes.func,\n    headerMessage: customPropTypes.itemShorthand,\n    list: customPropTypes.itemShorthand,\n    loading: PropTypes.bool,\n    loadingMessage: customPropTypes.itemShorthand,\n    moveFocusOnTab: PropTypes.bool,\n    multiple: PropTypes.bool,\n    noResultsMessage: customPropTypes.itemShorthand,\n    offset: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.arrayOf(PropTypes.number) as PropTypes.Requireable<[number, number]>,\n    ]),\n    onOpenChange: PropTypes.func,\n    onSearchQueryChange: PropTypes.func,\n    onChange: PropTypes.func,\n    onActiveSelectedIndexChange: PropTypes.func,\n    onHighlightedIndexChange: PropTypes.func,\n    open: PropTypes.bool,\n    placeholder: PropTypes.string,\n    position: PropTypes.oneOf(POSITIONS),\n    renderItem: PropTypes.func,\n    renderSelectedItem: PropTypes.func,\n    search: PropTypes.oneOfType([PropTypes.bool, PropTypes.func]),\n    searchQuery: PropTypes.string,\n    searchInput: customPropTypes.itemShorthand,\n    toggleIndicator: customPropTypes.shorthandAllowingChildren,\n    triggerButton: customPropTypes.itemShorthand,\n    unstable_pinned: PropTypes.bool,\n    value: PropTypes.oneOfType([customPropTypes.itemShorthand, customPropTypes.collectionShorthand]),\n  };\n\n  static defaultProps = {\n    align: 'start',\n    as: 'div',\n    clearIndicator: {},\n    itemToString: item => {\n      if (!item || React.isValidElement(item)) {\n        return '';\n      }\n\n      // targets DropdownItem shorthand objects\n      return (item as any).header || String(item);\n    },\n    itemToValue: item => {\n      if (!item || React.isValidElement(item)) {\n        return '';\n      }\n\n      // targets DropdownItem shorthand objects\n      return (item as any).header || String(item);\n    },\n    list: {},\n    position: 'below',\n    toggleIndicator: {},\n    triggerButton: {},\n  };\n\n  static autoControlledProps = ['activeSelectedIndex', 'highlightedIndex', 'open', 'searchQuery', 'value'];\n\n  static Item = DropdownItem;\n  static SearchInput = DropdownSearchInput;\n  static SelectedItem = DropdownSelectedItem;\n\n  componentWillUnmount() {\n    this.clearStartingString.cancel();\n    this.clearA11ySelectionMessage.cancel();\n  }\n\n  getInitialAutoControlledState({ multiple, search }: DropdownProps): DropdownState {\n    return {\n      a11ySelectionStatus: '',\n      activeSelectedIndex: multiple ? null : undefined,\n      filteredItems: undefined,\n      filteredItemStrings: undefined,\n      focused: false,\n      startingString: search ? undefined : '',\n      open: false,\n      highlightedIndex: this.props.highlightFirstItemOnOpen ? 0 : null,\n      searchQuery: search ? '' : undefined,\n      value: [],\n      itemIsFromKeyboard: false,\n      isFromKeyboard: false,\n    };\n  }\n\n  defaultTriggerButtonId = _.uniqueId('dropdown-trigger-button-');\n\n  /**\n   * Used to compute the filtered items (by value and search query) and, if needed,\n   * their string equivalents, in order to be used throughout the component.\n   */\n  static getAutoControlledStateFromProps(props: DropdownProps, state: DropdownState) {\n    const { items, itemToString, itemToValue, multiple, search } = props;\n    const { searchQuery, value: rawValue } = state;\n\n    // `normalizedValue` should be normilized always as it can be received from props\n    const normalizedValue = _.isArray(rawValue) ? rawValue : [rawValue];\n    const value = multiple ? normalizedValue : normalizedValue.slice(0, 1);\n\n    const filteredItemsByValue = multiple ? _.differenceBy(items, value, itemToValue) : items;\n    const filteredItemStrings = _.map(filteredItemsByValue, filteredItem => itemToString(filteredItem).toLowerCase());\n\n    const modifiedState: Partial<DropdownState> = {\n      filteredItems: filteredItemsByValue,\n      filteredItemStrings,\n      value,\n    };\n\n    if (search) {\n      if (_.isFunction(search)) {\n        modifiedState.filteredItems = search(filteredItemsByValue, searchQuery);\n      } else {\n        modifiedState.filteredItems = filteredItemsByValue.filter(\n          item =>\n            itemToString(item)\n              .toLowerCase()\n              .indexOf(searchQuery.toLowerCase()) !== -1,\n        );\n      }\n    }\n\n    return modifiedState;\n  }\n\n  handleChange = (e: React.SyntheticEvent) => {\n    // Dropdown component doesn't present any `input` component in markup, however all of our\n    // components should handle events transparently.\n    _.invoke(this.props, 'onChange', e, { ...this.props, value: this.state.value });\n  };\n\n  renderComponent({ ElementType, classes, styles, variables, unhandledProps, rtl }: RenderResultConfig<DropdownProps>) {\n    const {\n      clearable,\n      clearIndicator,\n      disabled,\n      search,\n      multiple,\n      getA11yStatusMessage,\n      itemToString,\n      toggleIndicator,\n    } = this.props;\n    const { highlightedIndex, open, searchQuery, value } = this.state;\n\n    return (\n      <ElementType className={classes.root} onChange={this.handleChange} {...unhandledProps}>\n        <Downshift\n          isOpen={open}\n          inputValue={search ? searchQuery : null}\n          stateReducer={this.downshiftStateReducer}\n          itemToString={itemToString}\n          // downshift does not work with arrays as selectedItem.\n          selectedItem={multiple || !value.length ? null : value[0]}\n          getA11yStatusMessage={getA11yStatusMessage}\n          highlightedIndex={highlightedIndex}\n          onStateChange={this.handleStateChange}\n          labelId={this.props['aria-labelledby']}\n          environment={this.context.target?.defaultView}\n          inputId={this.props.searchInput && this.props.searchInput['id'] ? this.props.searchInput['id'] : undefined}\n        >\n          {({\n            getInputProps,\n            getItemProps,\n            getMenuProps,\n            getRootProps,\n            getToggleButtonProps,\n            toggleMenu,\n            highlightedIndex,\n            selectItemAtIndex,\n          }) => {\n            const { innerRef, ...accessibilityRootPropsRest } = getRootProps(\n              { refKey: 'innerRef' },\n              { suppressRefError: true },\n            );\n            const showClearIndicator = clearable && value.length > 0;\n\n            return (\n              <Ref innerRef={innerRef}>\n                <div\n                  ref={this.containerRef}\n                  className={cx(dropdownSlotClassNames.container, classes.container)}\n                  onClick={search && !open ? this.handleContainerClick : undefined}\n                >\n                  <div\n                    ref={this.selectedItemsRef}\n                    className={cx(dropdownSlotClassNames.selectedItems, classes.selectedItems)}\n                  >\n                    {multiple && this.renderSelectedItems(variables, rtl)}\n                    {search\n                      ? this.renderSearchInput(\n                          accessibilityRootPropsRest,\n                          rtl,\n                          highlightedIndex,\n                          getInputProps,\n                          selectItemAtIndex,\n                          toggleMenu,\n                          variables,\n                        )\n                      : this.renderTriggerButton(styles, rtl, getToggleButtonProps)}\n                  </div>\n                  {showClearIndicator\n                    ? Box.create(clearIndicator, {\n                        defaultProps: () => ({\n                          className: dropdownSlotClassNames.clearIndicator,\n                          styles: styles.clearIndicator,\n                          accessibility: indicatorBehavior,\n                          ...(!search && { tabIndex: 0, role: 'button' }),\n                        }),\n                        overrideProps: (predefinedProps: BoxProps) => ({\n                          onClick: (e: React.SyntheticEvent<HTMLElement>) => {\n                            _.invoke(predefinedProps, 'onClick', e);\n                            this.handleClear(e);\n                          },\n                        }),\n                      })\n                    : Box.create(toggleIndicator, {\n                        defaultProps: () => ({\n                          className: dropdownSlotClassNames.toggleIndicator,\n                          styles: styles.toggleIndicator,\n                          accessibility: indicatorBehavior,\n                        }),\n                        overrideProps: (predefinedProps: BoxProps) => ({\n                          onClick: e => {\n                            if (!disabled) {\n                              getToggleButtonProps({ disabled }).onClick(e);\n                            }\n\n                            _.invoke(predefinedProps, 'onClick', e);\n                          },\n                        }),\n                      })}\n                  {this.renderItemsList(\n                    styles,\n                    variables,\n                    highlightedIndex,\n                    toggleMenu,\n                    selectItemAtIndex,\n                    getMenuProps,\n                    getItemProps,\n                    getInputProps,\n                    rtl,\n                  )}\n                </div>\n              </Ref>\n            );\n          }}\n        </Downshift>\n        <Portal open={!!this.props.getA11ySelectionMessage}>\n          <div role=\"status\" aria-live=\"polite\" aria-relevant=\"additions text\" style={screenReaderContainerStyles}>\n            {this.state.a11ySelectionStatus}\n          </div>\n        </Portal>\n      </ElementType>\n    );\n  }\n\n  renderTriggerButton(\n    styles: ComponentSlotStylesInput,\n    rtl: boolean,\n    getToggleButtonProps: (options?: GetToggleButtonPropsOptions) => any,\n  ): JSX.Element {\n    const { triggerButton, disabled } = this.props;\n    const { value } = this.state;\n\n    const content = this.getSelectedItemAsString(value[0]);\n    const triggerButtonId = triggerButton['id'] || this.defaultTriggerButtonId;\n\n    const triggerButtonProps = getToggleButtonProps({\n      disabled,\n      onFocus: this.handleTriggerButtonOrListFocus,\n      onBlur: this.handleTriggerButtonBlur,\n      onKeyDown: e => {\n        this.handleTriggerButtonKeyDown(e, rtl);\n      },\n      'aria-label': undefined,\n      'aria-labelledby': [this.props['aria-labelledby'], triggerButtonId].filter(l => !!l).join(' '),\n    });\n\n    const { onClick, onFocus, onBlur, onKeyDown, ...restTriggerButtonProps } = triggerButtonProps;\n\n    return (\n      <Ref innerRef={this.buttonRef}>\n        {createShorthand(Button, triggerButton, {\n          defaultProps: () => ({\n            className: dropdownSlotClassNames.triggerButton,\n            content,\n            disabled,\n            id: triggerButtonId,\n            fluid: true,\n            styles: styles.triggerButton,\n            ...restTriggerButtonProps,\n          }),\n          overrideProps: (predefinedProps: ButtonProps) => ({\n            onClick: e => {\n              onClick(e);\n              _.invoke(predefinedProps, 'onClick', e, predefinedProps);\n            },\n            onFocus: e => {\n              onFocus(e);\n              _.invoke(predefinedProps, 'onFocus', e, predefinedProps);\n            },\n            onBlur: e => {\n              if (!disabled) {\n                onBlur(e);\n              }\n\n              _.invoke(predefinedProps, 'onBlur', e, predefinedProps);\n            },\n            onKeyDown: e => {\n              if (!disabled) {\n                onKeyDown(e);\n              }\n\n              _.invoke(predefinedProps, 'onKeyDown', e, predefinedProps);\n            },\n          }),\n        })}\n      </Ref>\n    );\n  }\n\n  renderSearchInput(\n    accessibilityComboboxProps: Object,\n    rtl: boolean,\n    highlightedIndex: number,\n    getInputProps: (options?: GetInputPropsOptions) => any,\n    selectItemAtIndex: (index: number, otherStateToSet?: Partial<StateChangeOptions<any>>, cb?: () => void) => void,\n    toggleMenu: () => void,\n    variables,\n  ): JSX.Element {\n    const { inline, searchInput, multiple, placeholder, disabled } = this.props;\n    const { searchQuery, value } = this.state;\n\n    const noPlaceholder = searchQuery.length > 0 || (multiple && value.length > 0);\n\n    return DropdownSearchInput.create(searchInput || {}, {\n      defaultProps: () => ({\n        className: dropdownSlotClassNames.searchInput,\n        placeholder: noPlaceholder ? '' : placeholder,\n        inline,\n        variables,\n        inputRef: this.inputRef,\n        disabled,\n      }),\n      overrideProps: this.handleSearchInputOverrides(\n        highlightedIndex,\n        rtl,\n        selectItemAtIndex,\n        toggleMenu,\n        accessibilityComboboxProps,\n        getInputProps,\n      ),\n    });\n  }\n\n  renderItemsList(\n    styles: ComponentSlotStylesInput,\n    variables: ComponentVariablesInput,\n    highlightedIndex: number,\n    toggleMenu: () => void,\n    selectItemAtIndex: (index: number) => void,\n    getMenuProps: (options?: GetMenuPropsOptions, otherOptions?: GetPropsCommonOptions) => any,\n    getItemProps: (options: GetItemPropsOptions<ShorthandValue<DropdownItemProps>>) => any,\n    getInputProps: (options?: GetInputPropsOptions) => any,\n    rtl: boolean,\n  ) {\n    const { align, offset, position, search, unstable_pinned, list } = this.props;\n    const { open } = this.state;\n    const items = open ? this.renderItems(styles, variables, getItemProps, highlightedIndex) : [];\n    const { innerRef, ...accessibilityMenuProps } = getMenuProps({ refKey: 'innerRef' }, { suppressRefError: true });\n\n    // If it's just a selection, some attributes and listeners from Downshift input need to go on the menu list.\n    if (!search) {\n      const accessibilityInputProps = getInputProps();\n\n      accessibilityMenuProps['aria-activedescendant'] = accessibilityInputProps['aria-activedescendant'];\n      accessibilityMenuProps['onKeyDown'] = e => {\n        this.handleListKeyDown(\n          e,\n          highlightedIndex,\n          accessibilityInputProps['onKeyDown'],\n          toggleMenu,\n          selectItemAtIndex,\n        );\n      };\n    }\n\n    return (\n      <Ref\n        innerRef={(listElement: HTMLElement) => {\n          handleRef(this.listRef, listElement);\n          handleRef(innerRef, listElement);\n        }}\n      >\n        <Popper\n          align={align}\n          position={position}\n          offset={offset}\n          rtl={rtl}\n          enabled={open}\n          targetRef={this.containerRef}\n          unstable_pinned={unstable_pinned}\n          positioningDependencies={[items.length]}\n          {...getPopperPropsFromShorthand(list)}\n        >\n          {List.create(list, {\n            defaultProps: () => ({\n              className: dropdownSlotClassNames.itemsList,\n              ...accessibilityMenuProps,\n              styles: styles.list,\n              items,\n              tabIndex: search ? undefined : -1, // needs to be focused when trigger button is activated.\n              'aria-hidden': !open,\n            }),\n\n            overrideProps: (predefinedProps: ListProps) => ({\n              onFocus: (e: React.SyntheticEvent<HTMLElement>, listProps: ListProps) => {\n                this.handleTriggerButtonOrListFocus();\n                _.invoke(predefinedProps, 'onClick', e, listProps);\n              },\n              onBlur: (e: React.SyntheticEvent<HTMLElement>, listProps: ListProps) => {\n                this.handleListBlur(e);\n                _.invoke(predefinedProps, 'onBlur', e, listProps);\n              },\n            }),\n          })}\n        </Popper>\n      </Ref>\n    );\n  }\n\n  renderItems(\n    styles: ComponentSlotStylesInput,\n    variables: ComponentVariablesInput,\n    getItemProps: (options: GetItemPropsOptions<ShorthandValue<DropdownItemProps>>) => any,\n    highlightedIndex: number,\n  ) {\n    const { renderItem, checkable, checkableIndicator } = this.props;\n    const { filteredItems, value } = this.state;\n    const footerItem = this.renderItemsListFooter(styles);\n    const headerItem = this.renderItemsListHeader(styles);\n\n    const items = _.map(filteredItems, (item, index) => ({\n      children: () => {\n        const selected = value.indexOf(item) !== -1;\n\n        return DropdownItem.create(item, {\n          defaultProps: () => ({\n            className: dropdownSlotClassNames.item,\n            active: highlightedIndex === index,\n            selected,\n            checkable,\n            checkableIndicator,\n            isFromKeyboard: this.state.itemIsFromKeyboard,\n            variables,\n            ...(typeof item === 'object' &&\n              !item.hasOwnProperty('key') && {\n                key: (item as any).header,\n              }),\n          }),\n          overrideProps: this.handleItemOverrides(item, index, getItemProps, selected),\n          render: renderItem,\n        });\n      },\n    }));\n\n    if (footerItem) {\n      items.push(footerItem);\n    }\n\n    return headerItem ? [headerItem, ...items] : items;\n  }\n\n  renderItemsListHeader(styles: ComponentSlotStylesInput) {\n    const { headerMessage } = this.props;\n\n    if (headerMessage) {\n      return {\n        children: () =>\n          DropdownItem.create(headerMessage, {\n            defaultProps: () => ({\n              key: 'items-list-footer-message',\n              styles: styles.headerMessage,\n            }),\n          }),\n      };\n    }\n\n    return null;\n  }\n\n  renderItemsListFooter(styles: ComponentSlotStylesInput) {\n    const { loading, loadingMessage, noResultsMessage, items } = this.props;\n\n    if (loading) {\n      return {\n        children: () =>\n          DropdownItem.create(loadingMessage, {\n            defaultProps: () => ({\n              key: 'loading-message',\n              styles: styles.loadingMessage,\n            }),\n          }),\n      };\n    }\n\n    if (items && items.length === 0) {\n      return {\n        children: () =>\n          DropdownItem.create(noResultsMessage, {\n            defaultProps: () => ({\n              key: 'no-results-message',\n              styles: styles.noResultsMessage,\n            }),\n          }),\n      };\n    }\n\n    return null;\n  }\n\n  renderSelectedItems(variables, rtl: boolean) {\n    const { renderSelectedItem } = this.props;\n    const { value } = this.state;\n\n    if (value.length === 0) {\n      return null;\n    }\n\n    return value.map((item: DropdownItemProps, index) =>\n      // (!) an item matches DropdownItemProps\n      DropdownSelectedItem.create(item, {\n        defaultProps: () => ({\n          className: dropdownSlotClassNames.selectedItem,\n          active: this.isSelectedItemActive(index),\n          variables,\n          ...(typeof item === 'object' &&\n            !item.hasOwnProperty('key') && {\n              key: (item as any).header,\n            }),\n        }),\n        overrideProps: this.handleSelectedItemOverrides(item, rtl),\n        render: renderSelectedItem,\n      }),\n    );\n  }\n\n  downshiftStateReducer = (\n    state: DownshiftState<ShorthandValue<DropdownItemProps>>,\n    changes: StateChangeOptions<ShorthandValue<DropdownItemProps>>,\n  ) => {\n    const activeElement: Element = this.context.target.activeElement;\n\n    switch (changes.type) {\n      case Downshift.stateChangeTypes.blurButton:\n        // Downshift closes the list by default on trigger blur. It does not support the case when dropdown is\n        // single selection and focuses list on trigger click/up/down/space/enter. Treating that here.\n        if (state.isOpen && activeElement === this.listRef.current) {\n          return {}; // won't change state in this case.\n        }\n      default:\n        return changes;\n    }\n  };\n\n  handleStateChange = (changes: StateChangeOptions<ShorthandValue<DropdownItemProps>>) => {\n    const { search, multiple, highlightFirstItemOnOpen, items, getA11ySelectionMessage } = this.props;\n    const { value, open } = this.state;\n    const { type } = changes;\n    const newState = {} as DropdownState;\n\n    switch (type) {\n      case Downshift.stateChangeTypes.changeInput: {\n        const shouldValueChange = changes.inputValue === '' && !multiple && value.length > 0;\n        newState.searchQuery = changes.inputValue;\n        newState.highlightedIndex = highlightFirstItemOnOpen ? 0 : null;\n\n        if (shouldValueChange) {\n          newState.value = [];\n        }\n\n        if (open) {\n          // we clear value when in single selection user cleared the query.\n          const shouldMenuClose = changes.inputValue === '' || changes.selectedItem !== undefined;\n\n          if (shouldMenuClose) {\n            newState.open = false;\n          }\n        } else {\n          newState.open = true;\n        }\n\n        break;\n      }\n      case Downshift.stateChangeTypes.keyDownEnter:\n      case Downshift.stateChangeTypes.clickItem:\n        const shouldAddHighlightedIndex = !multiple && items && items.length > 0;\n        const isSameItemSelected = changes.selectedItem === undefined;\n        const newValue = isSameItemSelected ? value[0] : changes.selectedItem;\n\n        newState.searchQuery = this.getSelectedItemAsString(newValue);\n        newState.open = false;\n        newState.highlightedIndex = shouldAddHighlightedIndex ? items.indexOf(newValue) : null;\n\n        if (!isSameItemSelected) {\n          newState.value = multiple ? [...value, changes.selectedItem] : [changes.selectedItem];\n\n          if (getA11ySelectionMessage && getA11ySelectionMessage.onAdd) {\n            this.setA11ySelectionMessage(getA11ySelectionMessage.onAdd(newValue));\n          }\n        }\n\n        if (multiple) {\n          setTimeout(() => (this.selectedItemsRef.current.scrollTop = this.selectedItemsRef.current.scrollHeight), 0);\n        }\n\n        this.tryFocusTriggerButton();\n\n        break;\n      case Downshift.stateChangeTypes.keyDownEscape:\n        if (search) {\n          newState.searchQuery = '';\n\n          if (!multiple) {\n            newState.value = [];\n          }\n        }\n        newState.open = false;\n        newState.highlightedIndex = highlightFirstItemOnOpen ? 0 : null;\n        break;\n      case Downshift.stateChangeTypes.keyDownArrowDown:\n      case Downshift.stateChangeTypes.keyDownArrowUp:\n        if (changes.isOpen !== undefined) {\n          newState.open = changes.isOpen;\n          newState.highlightedIndex = changes.highlightedIndex;\n\n          if (changes.isOpen) {\n            const highlightedIndexOnArrowKeyOpen = this.getHighlightedIndexOnArrowKeyOpen(changes);\n\n            if (_.isNumber(highlightedIndexOnArrowKeyOpen)) {\n              newState.highlightedIndex = highlightedIndexOnArrowKeyOpen;\n            }\n\n            if (!search) {\n              this.listRef.current.focus();\n            }\n          } else {\n            newState.highlightedIndex = null;\n          }\n        }\n      case Downshift.stateChangeTypes['keyDownHome']:\n      case Downshift.stateChangeTypes['keyDownEnd']:\n        if (open && _.isNumber(changes.highlightedIndex)) {\n          newState.highlightedIndex = changes.highlightedIndex;\n          newState.itemIsFromKeyboard = true;\n        }\n\n        break;\n      case Downshift.stateChangeTypes.mouseUp:\n        if (open) {\n          newState.open = false;\n          newState.highlightedIndex = null;\n        }\n\n        break;\n      case Downshift.stateChangeTypes.clickButton:\n      case Downshift.stateChangeTypes.keyDownSpaceButton:\n        newState.open = changes.isOpen;\n\n        if (changes.isOpen) {\n          const highlightedIndexOnArrowKeyOpen = this.getHighlightedIndexOnArrowKeyOpen(changes);\n\n          if (_.isNumber(highlightedIndexOnArrowKeyOpen)) {\n            newState.highlightedIndex = highlightedIndexOnArrowKeyOpen;\n          }\n\n          if (!search) {\n            this.listRef.current.focus();\n          }\n        } else {\n          newState.highlightedIndex = null;\n        }\n        break;\n      case Downshift.stateChangeTypes.itemMouseEnter:\n        newState.highlightedIndex = changes.highlightedIndex;\n        newState.itemIsFromKeyboard = false;\n        break;\n      case Downshift.stateChangeTypes.unknown:\n        if (changes.selectedItem) {\n          newState.value = multiple ? [...value, changes.selectedItem] : [changes.selectedItem];\n          newState.searchQuery = multiple ? '' : changes.inputValue;\n          newState.open = false;\n          newState.highlightedIndex = changes.highlightedIndex;\n\n          this.tryFocusTriggerButton();\n        } else {\n          newState.open = changes.isOpen;\n        }\n      default:\n        break;\n    }\n\n    if (_.isEmpty(newState)) {\n      return;\n    }\n\n    const handlers: (keyof DropdownProps)[] = [\n      newState.value !== undefined && 'onChange',\n      newState.highlightedIndex !== undefined && 'onHighlightedIndexChange',\n      newState.open !== undefined && 'onOpenChange',\n      newState.searchQuery !== undefined && 'onSearchQueryChange',\n    ].filter(Boolean) as (keyof DropdownProps)[];\n\n    this.setStateAndInvokeHandler(handlers, null, newState);\n  };\n\n  isSelectedItemActive = (index: number): boolean => {\n    return index === this.state.activeSelectedIndex;\n  };\n\n  handleItemOverrides = (\n    item: ShorthandValue<DropdownItemProps>,\n    index: number,\n    getItemProps: (options: GetItemPropsOptions<ShorthandValue<DropdownItemProps>>) => any,\n    selected: boolean,\n  ) => (predefinedProps: DropdownItemProps) => ({\n    accessibilityItemProps: {\n      ...getItemProps({\n        item,\n        index,\n        disabled: item['disabled'],\n        onClick: e => {\n          e.stopPropagation();\n          e.nativeEvent.stopImmediatePropagation();\n          _.invoke(predefinedProps, 'onClick', e, predefinedProps);\n        },\n      }),\n      // for single selection the selected item should have aria-selected, instead of the highlighted\n      ...(!this.props.multiple && {\n        'aria-selected': selected,\n      }),\n    },\n  });\n\n  handleSelectedItemOverrides = (item: ShorthandValue<DropdownItemProps>, rtl: boolean) => (\n    predefinedProps: DropdownSelectedItemProps,\n  ) => ({\n    onRemove: (e: React.SyntheticEvent, dropdownSelectedItemProps: DropdownSelectedItemProps) => {\n      this.handleSelectedItemRemove(e, item, predefinedProps, dropdownSelectedItemProps);\n    },\n    onClick: (e: React.SyntheticEvent, dropdownSelectedItemProps: DropdownSelectedItemProps) => {\n      this.setStateAndInvokeHandler(['onActiveSelectedIndexChange'], null, {\n        activeSelectedIndex: this.state.value.indexOf(item),\n      });\n      e.stopPropagation();\n      _.invoke(predefinedProps, 'onClick', e, dropdownSelectedItemProps);\n    },\n    onKeyDown: (e: React.SyntheticEvent, dropdownSelectedItemProps: DropdownSelectedItemProps) => {\n      this.handleSelectedItemKeyDown(e, item, predefinedProps, dropdownSelectedItemProps, rtl);\n    },\n  });\n\n  handleSearchInputOverrides = (\n    highlightedIndex: number,\n    rtl: boolean,\n    selectItemAtIndex: (index: number, otherStateToSet?: Partial<StateChangeOptions<any>>, cb?: () => void) => void,\n    toggleMenu: () => void,\n    accessibilityComboboxProps: Object,\n    getInputProps: (options?: GetInputPropsOptions) => any,\n  ) => (predefinedProps: DropdownSearchInputProps) => {\n    const handleInputBlur = (e: React.SyntheticEvent, searchInputProps: DropdownSearchInputProps) => {\n      if (!disabled) {\n        this.setState({ focused: false, isFromKeyboard: isFromKeyboard() });\n\n        e.nativeEvent['preventDownshiftDefault'] = true;\n      }\n\n      _.invoke(predefinedProps, 'onInputBlur', e, searchInputProps);\n    };\n    const { disabled } = this.props;\n\n    const handleInputKeyDown = (e: React.SyntheticEvent, searchInputProps: DropdownSearchInputProps) => {\n      if (!disabled) {\n        switch (keyboardKey.getCode(e)) {\n          case keyboardKey.Tab:\n            this.handleTabSelection(e, highlightedIndex, selectItemAtIndex, toggleMenu);\n            break;\n          case keyboardKey.ArrowLeft:\n            if (!rtl) {\n              this.trySetLastSelectedItemAsActive();\n            }\n            break;\n          case keyboardKey.ArrowRight:\n            if (rtl) {\n              this.trySetLastSelectedItemAsActive();\n            }\n            break;\n          case keyboardKey.Backspace:\n            this.tryRemoveItemFromValue();\n            break;\n          default:\n            break;\n        }\n      }\n\n      _.invoke(predefinedProps, 'onInputKeyDown', e, {\n        ...searchInputProps,\n        highlightedIndex,\n        selectItemAtIndex,\n      });\n    };\n\n    return {\n      // getInputProps adds Downshift handlers. We also add our own by passing them as params to that function.\n      // user handlers were also added to our handlers previously, at the beginning of this function.\n      accessibilityInputProps: {\n        ...getInputProps({\n          disabled,\n          onBlur: e => {\n            handleInputBlur(e, predefinedProps);\n          },\n          onKeyDown: e => {\n            handleInputKeyDown(e, predefinedProps);\n          },\n          onChange: e => {\n            // we prevent the onChange input event to bubble up to our Dropdown handler,\n            // since in Dropdown it gets handled as onSearchQueryChange.\n            e.stopPropagation();\n          },\n        }),\n      },\n      // same story as above for getRootProps.\n      accessibilityComboboxProps,\n      onFocus: (e: React.SyntheticEvent, searchInputProps: DropdownSearchInputProps) => {\n        if (!disabled) {\n          this.setState({ focused: true, isFromKeyboard: isFromKeyboard() });\n        }\n\n        _.invoke(predefinedProps, 'onFocus', e, searchInputProps);\n      },\n      onInputBlur: (e: React.SyntheticEvent, searchInputProps: DropdownSearchInputProps) => {\n        handleInputBlur(e, searchInputProps);\n      },\n      onInputKeyDown: (e: React.SyntheticEvent, searchInputProps: DropdownSearchInputProps) => {\n        handleInputKeyDown(e, searchInputProps);\n      },\n    };\n  };\n\n  /**\n   * Custom Tab selection logic, at least until Downshift will implement selection on blur.\n   * Also keeps focus on multiple selection dropdown when selecting by Tab.\n   */\n  handleTabSelection = (\n    e: React.SyntheticEvent,\n    highlightedIndex: number,\n    selectItemAtIndex: (highlightedIndex: number) => void,\n    toggleMenu: () => void,\n  ): void => {\n    const { open, filteredItems } = this.state;\n    const { moveFocusOnTab, multiple, items } = this.props;\n\n    if (open) {\n      if (!_.isNil(highlightedIndex) && filteredItems.length && !items[highlightedIndex]['disabled']) {\n        selectItemAtIndex(highlightedIndex);\n\n        if (multiple && !moveFocusOnTab) {\n          e.preventDefault();\n        }\n      } else {\n        toggleMenu();\n      }\n    }\n  };\n\n  trySetLastSelectedItemAsActive = () => {\n    const { multiple } = this.props;\n    const { value } = this.state;\n\n    if (!multiple || (this.inputRef.current && this.inputRef.current.selectionStart !== 0)) {\n      return;\n    }\n\n    if (value.length > 0) {\n      // If last element was already active, perform a 'reset' of activeSelectedIndex.\n      if (this.state.activeSelectedIndex === value.length - 1) {\n        this.setState({ activeSelectedIndex: null }, () => {\n          this.setStateAndInvokeHandler(['onActiveSelectedIndexChange'], null, {\n            activeSelectedIndex: value.length - 1,\n          });\n        });\n      } else {\n        this.setStateAndInvokeHandler(['onActiveSelectedIndexChange'], null, {\n          activeSelectedIndex: value.length - 1,\n        });\n      }\n    }\n  };\n\n  tryRemoveItemFromValue = () => {\n    const { multiple } = this.props;\n    const { searchQuery, value } = this.state;\n    const inputElement = this.inputRef.current;\n\n    if (\n      multiple &&\n      (searchQuery === '' || (inputElement.selectionStart === 0 && inputElement.selectionEnd === 0)) &&\n      value.length > 0\n    ) {\n      this.removeItemFromValue();\n    }\n  };\n\n  handleClear = (e: React.SyntheticEvent<HTMLElement>) => {\n    const { activeSelectedIndex, highlightedIndex, open, searchQuery, value } = this.getInitialAutoControlledState(\n      this.props,\n    );\n\n    this.setStateAndInvokeHandler(['onChange', 'onActiveSelectedIndexChange', 'onHighlightedIndexChange'], e, {\n      activeSelectedIndex,\n      highlightedIndex,\n      open,\n      searchQuery,\n      value,\n    });\n\n    this.tryFocusSearchInput();\n    this.tryFocusTriggerButton();\n  };\n\n  handleContainerClick = () => {\n    this.tryFocusSearchInput();\n  };\n\n  handleTriggerButtonKeyDown = (e: React.SyntheticEvent, rtl: boolean) => {\n    switch (keyboardKey.getCode(e)) {\n      case keyboardKey.ArrowLeft:\n        if (!rtl) {\n          this.trySetLastSelectedItemAsActive();\n        }\n        return;\n      case keyboardKey.ArrowRight:\n        if (rtl) {\n          this.trySetLastSelectedItemAsActive();\n        }\n        return;\n      default:\n        return;\n    }\n  };\n\n  handleListKeyDown = (\n    e: React.SyntheticEvent,\n    highlightedIndex: number,\n    accessibilityInputPropsKeyDown: (e) => any,\n    toggleMenu: () => void,\n    selectItemAtIndex: (index: number) => void,\n  ) => {\n    const keyCode = keyboardKey.getCode(e);\n    switch (keyCode) {\n      case keyboardKey.Tab:\n        this.handleTabSelection(e, highlightedIndex, selectItemAtIndex, toggleMenu);\n        return;\n      case keyboardKey.Escape:\n        accessibilityInputPropsKeyDown(e);\n        this.tryFocusTriggerButton();\n        e.stopPropagation();\n        return;\n      default:\n        const keyString = String.fromCharCode(keyCode);\n        if (/[a-zA-Z0-9]/.test(keyString)) {\n          this.setHighlightedIndexOnCharKeyDown(keyString);\n        }\n        accessibilityInputPropsKeyDown(e);\n        return;\n    }\n  };\n\n  handleSelectedItemKeyDown(\n    e: React.SyntheticEvent,\n    item: ShorthandValue<DropdownItemProps>,\n    predefinedProps: DropdownSelectedItemProps,\n    dropdownSelectedItemProps: DropdownSelectedItemProps,\n    rtl: boolean,\n  ) {\n    const { activeSelectedIndex, value } = this.state;\n\n    const previousKey = rtl ? keyboardKey.ArrowRight : keyboardKey.ArrowLeft;\n    const nextKey = rtl ? keyboardKey.ArrowLeft : keyboardKey.ArrowRight;\n\n    switch (keyboardKey.getCode(e)) {\n      case keyboardKey.Delete:\n      case keyboardKey.Backspace:\n        this.handleSelectedItemRemove(e, item, predefinedProps, dropdownSelectedItemProps);\n        break;\n      case previousKey:\n        if (value.length > 0 && !_.isNil(activeSelectedIndex) && activeSelectedIndex > 0) {\n          this.setStateAndInvokeHandler(['onActiveSelectedIndexChange'], null, {\n            activeSelectedIndex: activeSelectedIndex - 1,\n          });\n        }\n        break;\n      case nextKey:\n        if (value.length > 0 && !_.isNil(activeSelectedIndex)) {\n          if (activeSelectedIndex < value.length - 1) {\n            this.setState({ activeSelectedIndex: activeSelectedIndex + 1 });\n          } else {\n            this.setState({ activeSelectedIndex: null });\n            if (this.props.search) {\n              e.preventDefault(); // prevents caret to forward one position in input.\n              this.inputRef.current.focus();\n            } else {\n              this.buttonRef.current.focus();\n            }\n          }\n        }\n        break;\n      default:\n        break;\n    }\n    _.invoke(predefinedProps, 'onKeyDown', e, dropdownSelectedItemProps);\n  }\n\n  handleTriggerButtonOrListFocus = () => {\n    this.setState({ focused: true, isFromKeyboard: isFromKeyboard() });\n  };\n\n  handleTriggerButtonBlur = e => {\n    if (this.listRef.current !== e.relatedTarget) {\n      this.setState({ focused: false, isFromKeyboard: isFromKeyboard() });\n    }\n  };\n\n  handleListBlur = e => {\n    if (this.buttonRef.current !== e.relatedTarget) {\n      this.setState({ focused: false, isFromKeyboard: isFromKeyboard() });\n    }\n  };\n\n  /**\n   * Sets highlightedIndex to be the item that starts with the character keys the\n   * user has typed. Only used in non-search dropdowns.\n   *\n   * @param keystring - The string the item needs to start with. It is composed by typing keys in fast succession.\n   */\n  setHighlightedIndexOnCharKeyDown = (keyString: string): void => {\n    const { highlightedIndex, filteredItemStrings, startingString } = this.state;\n    const newStartingString = `${startingString}${keyString.toLowerCase()}`;\n    let newHighlightedIndex = -1;\n\n    this.setStartingString(newStartingString);\n\n    if (_.isNumber(highlightedIndex)) {\n      newHighlightedIndex = _.findIndex(\n        filteredItemStrings,\n        item => item.startsWith(newStartingString),\n        highlightedIndex + (startingString.length > 0 ? 0 : 1),\n      );\n    }\n\n    if (newHighlightedIndex < 0) {\n      newHighlightedIndex = _.findIndex(filteredItemStrings, item => item.startsWith(newStartingString));\n    }\n\n    if (newHighlightedIndex >= 0) {\n      this.setStateAndInvokeHandler(['onHighlightedIndexChange'], null, {\n        highlightedIndex: newHighlightedIndex,\n      });\n    }\n  };\n\n  handleSelectedItemRemove(\n    e: React.SyntheticEvent,\n    item: ShorthandValue<DropdownItemProps>,\n    predefinedProps: DropdownSelectedItemProps,\n    dropdownSelectedItemProps: DropdownSelectedItemProps,\n  ) {\n    this.setStateAndInvokeHandler(['onActiveSelectedIndexChange'], null, {\n      activeSelectedIndex: null,\n    });\n    this.removeItemFromValue(item);\n    this.tryFocusSearchInput();\n    this.tryFocusTriggerButton();\n    _.invoke(predefinedProps, 'onRemove', e, dropdownSelectedItemProps);\n  }\n\n  removeItemFromValue(item?: ShorthandValue<DropdownItemProps>) {\n    const { getA11ySelectionMessage } = this.props;\n    let { value } = this.state;\n    let poppedItem = item;\n\n    if (poppedItem) {\n      value = value.filter(currentElement => currentElement !== item);\n    } else {\n      poppedItem = value.pop();\n    }\n\n    if (getA11ySelectionMessage && getA11ySelectionMessage.onRemove) {\n      this.setA11ySelectionMessage(getA11ySelectionMessage.onRemove(poppedItem));\n    }\n\n    this.setStateAndInvokeHandler(['onChange'], null, { value });\n  }\n\n  /**\n   * Calls setState and invokes event handler exposed to user.\n   * We don't have the event object for most events coming from Downshift se we send an empty event\n   * because we want to keep the event handling interface\n   */\n  setStateAndInvokeHandler = (\n    handlerNames: (keyof DropdownProps)[],\n    event: React.SyntheticEvent<HTMLElement>,\n    newState: Partial<DropdownState>,\n  ) => {\n    const proposedValue = _.isNil(newState.value) ? this.state.value : newState.value;\n    // `proposedValue` should be normalized for single/multiple variations, `null` condition is\n    // required as first item can be undefined\n    const newValue = this.props.multiple ? proposedValue : proposedValue[0] || null;\n\n    this.setState(newState as DropdownState);\n    handlerNames.forEach(handlerName => {\n      _.invoke(this.props, handlerName, event, { ...this.props, ...newState, value: newValue });\n    });\n  };\n\n  tryFocusTriggerButton = () => {\n    if (!this.props.search && this.buttonRef.current) {\n      this.buttonRef.current.focus();\n    }\n  };\n\n  tryFocusSearchInput = () => {\n    if (this.props.search && this.inputRef.current) {\n      this.inputRef.current.focus();\n    }\n  };\n\n  /**\n   * If there is no value we use the placeholder value\n   * otherwise, for single selection we convert the value with itemToString\n   * and for multiple selection we return empty string, the values are rendered by renderSelectedItems\n   */\n  getSelectedItemAsString = (value: ShorthandValue<DropdownItemProps>): string => {\n    const { itemToString, multiple, placeholder, search } = this.props;\n\n    if (!value) {\n      return search ? '' : placeholder;\n    }\n\n    if (multiple) {\n      return '';\n    }\n\n    return itemToString(value);\n  };\n\n  getHighlightedIndexOnArrowKeyOpen = (changes: StateChangeOptions<ShorthandValue<DropdownItemProps>>): number => {\n    const { filteredItems, highlightedIndex, value } = this.state;\n    const { highlightFirstItemOnOpen, items, multiple, search } = this.props;\n    const isArrowUp = changes.type === Downshift.stateChangeTypes.keyDownArrowUp;\n    const isArrowDown = changes.type === Downshift.stateChangeTypes.keyDownArrowDown;\n    const itemsLength = filteredItems.length;\n\n    if (highlightedIndex) {\n      return highlightedIndex;\n    }\n\n    if (highlightFirstItemOnOpen) {\n      // otherwise, if highlightFirstItemOnOpen prop is provied, highlight first item.\n      return 0;\n    }\n\n    if (!multiple && !search && value.length > 0) {\n      // in single selection, if there is a selected item, highlight it.\n      const offset = isArrowUp ? -1 : isArrowDown ? 1 : 0;\n      const newHighlightedIndex = items.indexOf(value[0]) + offset;\n      if (newHighlightedIndex >= itemsLength) {\n        return 0;\n      }\n      if (newHighlightedIndex < 0) {\n        return itemsLength - 1;\n      }\n      return newHighlightedIndex;\n    }\n\n    if (isArrowDown) {\n      return 0;\n    }\n    if (isArrowUp) {\n      return itemsLength - 1;\n    }\n\n    return null;\n  };\n\n  /**\n   * Function that sets and cleans the selection message after it has been set,\n   * so it is not read anymore via virtual cursor.\n   */\n  setA11ySelectionMessage = (a11ySelectionStatus: string): void => {\n    this.setState({ a11ySelectionStatus });\n    this.clearA11ySelectionMessage();\n  };\n\n  setStartingString = (startingString: string): void => {\n    this.setState({ startingString });\n    this.clearStartingString();\n  };\n\n  clearA11ySelectionMessage: DebounceResultFn<() => void> = _.debounce(() => {\n    this.setState({ a11ySelectionStatus: '' });\n  }, Dropdown.a11yStatusCleanupTime);\n\n  clearStartingString: DebounceResultFn<() => void> = _.debounce(() => {\n    this.setState({ startingString: '' });\n  }, Dropdown.charKeyPressedCleanupTime);\n}\n\n/**\n * A Dropdown allows user to select one or more values from a list of options.\n * Can be created with search and multi-selection capabilities.\n *\n * @accessibility\n * Implements [ARIA Combo Box](https://www.w3.org/TR/wai-aria-practices-1.1/#combobox) design pattern, uses aria-live to announce state changes.\n * @accessibilityIssues\n * [Issue 991203: VoiceOver doesn't narrate properly elements in the input/combobox](https://bugs.chromium.org/p/chromium/issues/detail?id=991203)\n */\nexport default withSafeTypeForAs<typeof Dropdown, DropdownProps>(Dropdown);\n"],"file":"Dropdown.js"}