{"version":3,"sources":["components/Attachment/Attachment.tsx"],"names":["attachmentBehavior","compose","getElementType","useAccessibility","useStyles","useTelemetry","useUnhandledProps","customPropTypes","mergeComponentVariables","PropTypes","React","ThemeContext","createShorthandFactory","commonPropTypes","createShorthand","AttachmentAction","AttachmentBody","AttachmentDescription","AttachmentHeader","AttachmentIcon","attachmentClassName","mergeShorthandVariables","variables","shorthandVariables","Attachment","props","ref","composeOptions","context","useContext","displayName","telemetry","setStart","setEnd","accessibility","action","actionable","body","className","description","design","disabled","header","icon","onClick","progress","styles","getA11Props","debugName","actionHandlers","performClick","e","currentTarget","target","stopPropagation","handleClick","rtl","mapPropsToStyles","mapPropsToInlineStyles","unstable_props","classes","slotProps","resolveSlotProps","ElementType","unhandledProps","handledProps","preventDefault","element","root","slots","defaultProps","overrideProps","predefinedProps","content","width","create","Component","mappedProp","propTypes","createCommon","itemShorthand","bool","shorthandAllowingChildren","func","oneOfType","string","number","Action","Body","Description","Header","Icon"],"mappings":";;AAAA,SAAwBA,kBAAxB,QAA2E,yBAA3E;AACA,SAEEC,OAFF,EAGEC,cAHF,EAIEC,gBAJF,EAKEC,SALF,EAMEC,YANF,EAOEC,iBAPF,QAQO,0BARP;AASA,OAAO,KAAKC,eAAZ,MAAiC,2BAAjC;AACA,SAASC,uBAAT,QAAwC,kBAAxC;AAEA,OAAO,KAAKC,SAAZ,MAA2B,YAA3B;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB,C,CACA;;AACA,SAASC,YAAT,QAA6B,YAA7B;AAGA,SACEC,sBADF,EAEEC,eAFF,EAKEC,eALF,QAOO,aAPP;AAQA,OAAOC,gBAAP,MAAwD,oBAAxD;AACA,OAAOC,cAAP,MAAoD,kBAApD;AACA,OAAOC,qBAAP,MAAkE,yBAAlE;AACA,OAAOC,gBAAP,MAAwD,oBAAxD;AACA,OAAOC,cAAP,MAAoD,kBAApD;AAuCA,OAAO,IAAMC,mBAAmB,GAAG,eAA5B,C,CAEP;AACA;AACA;;AACA,IAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACC,SAAD,EAAYC,kBAAZ,EAAmC;AACjE,SAAO,CAACD,SAAS,IAAIC,kBAAd,KAAqCf,uBAAuB,CAACc,SAAD,EAAYC,kBAAZ,CAAnE;AACD,CAFD;AAIA;;;;;AAGA,IAAMC,UAAU,GAAGvB,OAAO,CACxB,UAACwB,KAAD,EAAQC,GAAR,EAAaC,cAAb,EAAgC;AAC9B,MAAMC,OAAgC,GAAGlB,KAAK,CAACmB,UAAN,CAAiBlB,YAAjB,CAAzC;;AAD8B,sBAEDN,YAAY,CAACsB,cAAc,CAACG,WAAhB,EAA6BF,OAAO,CAACG,SAArC,CAFX;AAAA,MAEtBC,QAFsB,iBAEtBA,QAFsB;AAAA,MAEZC,MAFY,iBAEZA,MAFY;;AAG9BD,EAAAA,QAAQ;AAHsB,MAM5BE,aAN4B,GAoB1BT,KApB0B,CAM5BS,aAN4B;AAAA,MAO5BC,MAP4B,GAoB1BV,KApB0B,CAO5BU,MAP4B;AAAA,MAQ5BC,UAR4B,GAoB1BX,KApB0B,CAQ5BW,UAR4B;AAAA,MAS5BC,IAT4B,GAoB1BZ,KApB0B,CAS5BY,IAT4B;AAAA,MAU5BC,SAV4B,GAoB1Bb,KApB0B,CAU5Ba,SAV4B;AAAA,MAW5BC,WAX4B,GAoB1Bd,KApB0B,CAW5Bc,WAX4B;AAAA,MAY5BC,MAZ4B,GAoB1Bf,KApB0B,CAY5Be,MAZ4B;AAAA,MAa5BC,QAb4B,GAoB1BhB,KApB0B,CAa5BgB,QAb4B;AAAA,MAc5BC,MAd4B,GAoB1BjB,KApB0B,CAc5BiB,MAd4B;AAAA,MAe5BC,IAf4B,GAoB1BlB,KApB0B,CAe5BkB,IAf4B;AAAA,MAgB5BC,OAhB4B,GAoB1BnB,KApB0B,CAgB5BmB,OAhB4B;AAAA,MAiB5BC,QAjB4B,GAoB1BpB,KApB0B,CAiB5BoB,QAjB4B;AAAA,MAkB5BC,MAlB4B,GAoB1BrB,KApB0B,CAkB5BqB,MAlB4B;AAAA,MAmB5BxB,SAnB4B,GAoB1BG,KApB0B,CAmB5BH,SAnB4B;AAsB9B,MAAMyB,WAAW,GAAG5C,gBAAgB,CAAC+B,aAAD,EAAgB;AAClDc,IAAAA,SAAS,EAAErB,cAAc,CAACG,WADwB;AAElDmB,IAAAA,cAAc,EAAE;AACdC,MAAAA,YAAY,EAAE,sBAAAC,CAAC,EAAI;AACjB,YAAIA,CAAC,CAACC,aAAF,KAAoBD,CAAC,CAACE,MAA1B,EAAkC;AAChCF,UAAAA,CAAC,CAACG,eAAF;AACAC,UAAAA,WAAW,CAACJ,CAAD,CAAX;AACD;AACF;AANa,KAFkC;AAUlDK,IAAAA,GAAG,EAAE5B,OAAO,CAAC4B;AAVqC,GAAhB,CAApC;;AAtB8B,mBAmCVpD,SAAS,CAAwBuB,cAAc,CAACG,WAAvC,EAAoD;AAC/EQ,IAAAA,SAAS,EAAElB,mBADoE;AAE/EqC,IAAAA,gBAAgB,EAAE;AAAA,aAAO;AACvBrB,QAAAA,UAAU,EAAEA,UAAU,IAAI,CAAC,CAACQ,OADL;AAEvBH,QAAAA,QAAQ,EAARA;AAFuB,OAAP;AAAA,KAF6D;AAM/EiB,IAAAA,sBAAsB,EAAE;AAAA,aAAO;AAC7BpB,QAAAA,SAAS,EAATA,SAD6B;AAE7BE,QAAAA,MAAM,EAANA,MAF6B;AAG7BM,QAAAA,MAAM,EAANA,MAH6B;AAI7BxB,QAAAA,SAAS,EAATA;AAJ6B,OAAP;AAAA,KANuD;AAY/EkC,IAAAA,GAAG,EAAE5B,OAAO,CAAC4B,GAZkE;AAa/E7B,IAAAA,cAAc,EAAdA,cAb+E;AAc/EgC,IAAAA,cAAc,EAAElC;AAd+D,GAApD,CAnCC;AAAA,MAmCtBmC,OAnCsB,cAmCtBA,OAnCsB;;AAoD9B,MAAMC,SAAS,GAAGlC,cAAc,CAACmC,gBAAf,CAAiDrC,KAAjD,CAAlB;AAEA,MAAMsC,WAAW,GAAG7D,cAAc,CAACuB,KAAD,CAAlC;AACA,MAAMuC,cAAc,GAAG1D,iBAAiB,CAACqB,cAAc,CAACsC,YAAhB,EAA8BxC,KAA9B,CAAxC;;AAEA,MAAM8B,WAAW,GAAG,SAAdA,WAAc,CAACJ,CAAD,EAA+C;AACjE,QAAIV,QAAJ,EAAc;AACZU,MAAAA,CAAC,CAACe,cAAF;AACA;AACD;;AAED,YAASzC,KAAT,EAAgB,SAAhB,EAA2B0B,CAA3B,EAA8B1B,KAA9B;AACD,GAPD;;AASA,MAAM0C,OAAO,GACX,oBAAC,WAAD,EAAiBpB,WAAW,CAAC,MAAD;AAAWT,IAAAA,SAAS,EAAEsB,OAAO,CAACQ,IAA9B;AAAoCxB,IAAAA,OAAO,EAAEW,WAA7C;AAA0D7B,IAAAA,GAAG,EAAHA;AAA1D,KAAkEsC,cAAlE,EAA5B,EACGlD,eAAe,CAACa,cAAc,CAAC0C,KAAf,CAAqB1B,IAAtB,EAA4BA,IAA5B,EAAkC;AAChD2B,IAAAA,YAAY,EAAE;AAAA,aAAMT,SAAS,CAAClB,IAAhB;AAAA,KADkC;AAEhD4B,IAAAA,aAAa,EAAE,uBAAAC,eAAe;AAAA,aAAK;AACjClD,QAAAA,SAAS,EAAED,uBAAuB,CAACC,SAAD,EAAYkD,eAAe,CAAClD,SAA5B;AADD,OAAL;AAAA;AAFkB,GAAlC,CADlB,EAQG,CAACoB,MAAM,IAAIH,WAAX,KACCzB,eAAe,CAACa,cAAc,CAAC0C,KAAf,CAAqBhC,IAAtB,EAA4BA,IAA5B,EAAkC;AAC/CiC,IAAAA,YAAY,EAAE;AAAA,aAAMT,SAAS,CAACxB,IAAhB;AAAA,KADiC;AAE/CkC,IAAAA,aAAa,EAAE,uBAAAC,eAAe;AAAA,aAAK;AACjCC,QAAAA,OAAO,EACL,0CACG3D,eAAe,CAACa,cAAc,CAAC0C,KAAf,CAAqB3B,MAAtB,EAA8BA,MAA9B,EAAsC;AACpD4B,UAAAA,YAAY,EAAE;AAAA,mBAAMT,SAAS,CAACnB,MAAhB;AAAA,WADsC;AAEpD6B,UAAAA,aAAa,EAAE,uBAAAC,eAAe;AAAA,mBAAK;AACjClD,cAAAA,SAAS,EAAED,uBAAuB,CAACC,SAAD,EAAYkD,eAAe,CAAClD,SAA5B;AADD,aAAL;AAAA;AAFsB,SAAtC,CADlB,EAOGR,eAAe,CAACa,cAAc,CAAC0C,KAAf,CAAqB9B,WAAtB,EAAmCA,WAAnC,EAAgD;AAC9D+B,UAAAA,YAAY,EAAE;AAAA,mBAAMT,SAAS,CAACtB,WAAhB;AAAA,WADgD;AAE9DgC,UAAAA,aAAa,EAAE,uBAAAC,eAAe;AAAA,mBAAK;AACjClD,cAAAA,SAAS,EAAED,uBAAuB,CAACC,SAAD,EAAYkD,eAAe,CAAClD,SAA5B;AADD,aAAL;AAAA;AAFgC,SAAhD,CAPlB,CAF+B;AAiBjCA,QAAAA,SAAS,EAAED,uBAAuB,CAACC,SAAD,EAAYkD,eAAe,CAAClD,SAA5B;AAjBD,OAAL;AAAA;AAFiB,GAAlC,CATnB,EAgCGR,eAAe,CAACa,cAAc,CAAC0C,KAAf,CAAqBlC,MAAtB,EAA8BA,MAA9B,EAAsC;AACpDmC,IAAAA,YAAY,EAAE;AAAA,aAAMT,SAAS,CAAC1B,MAAhB;AAAA,KADsC;AAEpDoC,IAAAA,aAAa,EAAE,uBAAAC,eAAe;AAAA,aAAK;AACjClD,QAAAA,SAAS,EAAED,uBAAuB,CAACC,SAAD,EAAYkD,eAAe,CAAClD,SAA5B;AADD,OAAL;AAAA;AAFsB,GAAtC,CAhClB,EAsCG,CAAC,OAAQuB,QAAR,CAAD,IAAsB;AAAK,IAAA,SAAS,EAAC,yBAAf;AAAyC,IAAA,KAAK,EAAE;AAAE6B,MAAAA,KAAK,YAAK7B,QAAL;AAAP;AAAhD,IAtCzB,CADF;AA0CAZ,EAAAA,MAAM;AAEN,SAAOkC,OAAP;AACD,CAhHuB,EAiHxB;AACE7B,EAAAA,SAAS,EAAElB,mBADb;AAEEU,EAAAA,WAAW,EAAE,YAFf;AAGEuC,EAAAA,KAAK,EAAE;AACLlC,IAAAA,MAAM,EAAEpB,gBADH;AAELsB,IAAAA,IAAI,EAAErB,cAFD;AAGLuB,IAAAA,WAAW,EAAEtB,qBAHR;AAILyB,IAAAA,MAAM,EAAExB,gBAJH;AAKLyB,IAAAA,IAAI,EAAExB;AALD,GAHT;AAUE8C,EAAAA,YAAY,EAAE,CACZ,eADY,EAEZ,QAFY,EAGZ,YAHY,EAIZ,IAJY,EAKZ,MALY,EAMZ,UANY,EAOZ,WAPY,EAQZ,aARY,EASZ,QATY,EAUZ,QAVY,EAWZ,MAXY,EAYZ,SAZY,EAaZ,UAbY,EAcZ,QAdY,EAeZ,WAfY;AAVhB,CAjHwB,CAA1B;AAsJAzC,UAAU,CAACmD,MAAX,GAAoB/D,sBAAsB,CAAC;AAAEgE,EAAAA,SAAS,EAAEpD,UAAb;AAAyBqD,EAAAA,UAAU,EAAE;AAArC,CAAD,CAA1C;AAEArD,UAAU,CAACsD,SAAX,qBACKjE,eAAe,CAACkE,YAAhB,CAA6B;AAC9BN,EAAAA,OAAO,EAAE;AADqB,CAA7B,CADL;AAIEtC,EAAAA,MAAM,EAAE5B,eAAe,CAACyE,aAJ1B;AAKE5C,EAAAA,UAAU,EAAE3B,SAAS,CAACwE,IALxB;AAME5C,EAAAA,IAAI,EAAE9B,eAAe,CAACyE,aANxB;AAOEzC,EAAAA,WAAW,EAAEhC,eAAe,CAACyE,aAP/B;AAQEtC,EAAAA,MAAM,EAAEnC,eAAe,CAACyE,aAR1B;AASErC,EAAAA,IAAI,EAAEpC,eAAe,CAAC2E,yBATxB;AAUEtC,EAAAA,OAAO,EAAEnC,SAAS,CAAC0E,IAVrB;AAWEtC,EAAAA,QAAQ,EAAEpC,SAAS,CAAC2E,SAAV,CAAoB,CAAC3E,SAAS,CAAC4E,MAAX,EAAmB5E,SAAS,CAAC6E,MAA7B,CAApB;AAXZ;AAaA9D,UAAU,CAAC8C,YAAX,GAA0B;AACxBpC,EAAAA,aAAa,EAAElC,kBADS;AAExBqC,EAAAA,IAAI,EAAE;AAFkB,CAA1B;AAKAb,UAAU,CAAC+D,MAAX,GAAoBxE,gBAApB;AACAS,UAAU,CAACgE,IAAX,GAAkBxE,cAAlB;AACAQ,UAAU,CAACiE,WAAX,GAAyBxE,qBAAzB;AACAO,UAAU,CAACkE,MAAX,GAAoBxE,gBAApB;AACAM,UAAU,CAACmE,IAAX,GAAkBxE,cAAlB;AAEA;;;;AAGA,eAAeK,UAAf","sourcesContent":["import { Accessibility, attachmentBehavior, AttachmentBehaviorProps } from '@fluentui/accessibility';\nimport {\n  ComponentWithAs,\n  compose,\n  getElementType,\n  useAccessibility,\n  useStyles,\n  useTelemetry,\n  useUnhandledProps,\n} from '@fluentui/react-bindings';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport { mergeComponentVariables } from '@fluentui/styles';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n// @ts-ignore\nimport { ThemeContext } from 'react-fela';\n\nimport { ComponentEventHandler, ProviderContextPrepared, ShorthandValue } from '../../types';\nimport {\n  createShorthandFactory,\n  commonPropTypes,\n  UIComponentProps,\n  ChildrenComponentProps,\n  createShorthand,\n  ShorthandFactory,\n} from '../../utils';\nimport AttachmentAction, { AttachmentActionProps } from './AttachmentAction';\nimport AttachmentBody, { AttachmentBodyProps } from './AttachmentBody';\nimport AttachmentDescription, { AttachmentDescriptionProps } from './AttachmentDescription';\nimport AttachmentHeader, { AttachmentHeaderProps } from './AttachmentHeader';\nimport AttachmentIcon, { AttachmentIconProps } from './AttachmentIcon';\n\nexport interface AttachmentProps extends UIComponentProps, ChildrenComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<AttachmentBehaviorProps>;\n\n  /** Button shorthand for the action slot. */\n  action?: ShorthandValue<AttachmentActionProps>;\n\n  /** An Attachment can be styled to indicate possible user interaction. */\n  actionable?: boolean;\n\n  /** Contains a header and a description for an Attachment. */\n  body?: ShorthandValue<AttachmentBodyProps>;\n\n  /** A string describing the attachment. */\n  description?: ShorthandValue<AttachmentDescriptionProps>;\n\n  /** An attachment can show that it cannot be interacted with. */\n  disabled?: boolean;\n\n  /** The name of the attachment. */\n  header?: ShorthandValue<AttachmentHeaderProps>;\n\n  /** Shorthand for the icon. */\n  icon?: ShorthandValue<AttachmentIconProps>;\n\n  /** Value indicating percent complete. */\n  progress?: string | number;\n\n  /**\n   * Called after user's click.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onClick?: ComponentEventHandler<AttachmentProps>;\n}\n\nexport type AttachmentStylesProps = Required<Pick<AttachmentProps, 'actionable' | 'disabled'>>;\nexport const attachmentClassName = 'ui-attachment';\n\n// mergeComponentVariables is always creating a function even if the arguments are undefined\n// we have this temporary fix in place to avoid creating empty function because it is breaking caching\n// we should either fix mergeComponentVariables, or handle this in a more generic way\nconst mergeShorthandVariables = (variables, shorthandVariables) => {\n  return (variables || shorthandVariables) && mergeComponentVariables(variables, shorthandVariables);\n};\n\n/**\n * An Attachment represents a file or media attachment, which may contain some metadata or actions.\n */\nconst Attachment = compose<'div', AttachmentProps, AttachmentStylesProps, {}, {}>(\n  (props, ref, composeOptions) => {\n    const context: ProviderContextPrepared = React.useContext(ThemeContext);\n    const { setStart, setEnd } = useTelemetry(composeOptions.displayName, context.telemetry);\n    setStart();\n\n    const {\n      accessibility,\n      action,\n      actionable,\n      body,\n      className,\n      description,\n      design,\n      disabled,\n      header,\n      icon,\n      onClick,\n      progress,\n      styles,\n      variables,\n    } = props;\n\n    const getA11Props = useAccessibility(accessibility, {\n      debugName: composeOptions.displayName,\n      actionHandlers: {\n        performClick: e => {\n          if (e.currentTarget === e.target) {\n            e.stopPropagation();\n            handleClick(e);\n          }\n        },\n      },\n      rtl: context.rtl,\n    });\n\n    const { classes } = useStyles<AttachmentStylesProps>(composeOptions.displayName, {\n      className: attachmentClassName,\n      mapPropsToStyles: () => ({\n        actionable: actionable || !!onClick,\n        disabled,\n      }),\n      mapPropsToInlineStyles: () => ({\n        className,\n        design,\n        styles,\n        variables,\n      }),\n      rtl: context.rtl,\n      composeOptions,\n      unstable_props: props,\n    });\n\n    const slotProps = composeOptions.resolveSlotProps<AttachmentProps>(props);\n\n    const ElementType = getElementType(props);\n    const unhandledProps = useUnhandledProps(composeOptions.handledProps, props);\n\n    const handleClick = (e: React.KeyboardEvent | React.MouseEvent) => {\n      if (disabled) {\n        e.preventDefault();\n        return;\n      }\n\n      _.invoke(props, 'onClick', e, props);\n    };\n\n    const element = (\n      <ElementType {...getA11Props('root', { className: classes.root, onClick: handleClick, ref, ...unhandledProps })}>\n        {createShorthand(composeOptions.slots.icon, icon, {\n          defaultProps: () => slotProps.icon,\n          overrideProps: predefinedProps => ({\n            variables: mergeShorthandVariables(variables, predefinedProps.variables),\n          }),\n        })}\n\n        {(header || description) &&\n          createShorthand(composeOptions.slots.body, body, {\n            defaultProps: () => slotProps.body,\n            overrideProps: predefinedProps => ({\n              content: (\n                <>\n                  {createShorthand(composeOptions.slots.header, header, {\n                    defaultProps: () => slotProps.header,\n                    overrideProps: predefinedProps => ({\n                      variables: mergeShorthandVariables(variables, predefinedProps.variables),\n                    }),\n                  })}\n                  {createShorthand(composeOptions.slots.description, description, {\n                    defaultProps: () => slotProps.description,\n                    overrideProps: predefinedProps => ({\n                      variables: mergeShorthandVariables(variables, predefinedProps.variables),\n                    }),\n                  })}\n                </>\n              ),\n              variables: mergeShorthandVariables(variables, predefinedProps.variables),\n            }),\n          })}\n\n        {createShorthand(composeOptions.slots.action, action, {\n          defaultProps: () => slotProps.action,\n          overrideProps: predefinedProps => ({\n            variables: mergeShorthandVariables(variables, predefinedProps.variables),\n          }),\n        })}\n        {!_.isNil(progress) && <div className=\"ui-attachment__progress\" style={{ width: `${progress}%` }} />}\n      </ElementType>\n    );\n    setEnd();\n\n    return element;\n  },\n  {\n    className: attachmentClassName,\n    displayName: 'Attachment',\n    slots: {\n      action: AttachmentAction,\n      body: AttachmentBody,\n      description: AttachmentDescription,\n      header: AttachmentHeader,\n      icon: AttachmentIcon,\n    },\n    handledProps: [\n      'accessibility',\n      'action',\n      'actionable',\n      'as',\n      'body',\n      'children',\n      'className',\n      'description',\n      'design',\n      'header',\n      'icon',\n      'onClick',\n      'progress',\n      'styles',\n      'variables',\n    ],\n  },\n) as ComponentWithAs<'div', AttachmentProps> & {\n  create: ShorthandFactory<AttachmentProps>;\n  Action: typeof AttachmentAction;\n  Body: typeof AttachmentBody;\n  Description: typeof AttachmentDescription;\n  Header: typeof AttachmentHeader;\n  Icon: typeof AttachmentIcon;\n};\n\nAttachment.create = createShorthandFactory({ Component: Attachment, mappedProp: 'header' });\n\nAttachment.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  action: customPropTypes.itemShorthand,\n  actionable: PropTypes.bool,\n  body: customPropTypes.itemShorthand,\n  description: customPropTypes.itemShorthand,\n  header: customPropTypes.itemShorthand,\n  icon: customPropTypes.shorthandAllowingChildren,\n  onClick: PropTypes.func,\n  progress: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n};\nAttachment.defaultProps = {\n  accessibility: attachmentBehavior,\n  body: {},\n};\n\nAttachment.Action = AttachmentAction;\nAttachment.Body = AttachmentBody;\nAttachment.Description = AttachmentDescription;\nAttachment.Header = AttachmentHeader;\nAttachment.Icon = AttachmentIcon;\n\n/**\n * An Attachment represents a file or media attachment, which may contain some metadata or actions.\n */\nexport default Attachment;\n"],"file":"Attachment.js"}