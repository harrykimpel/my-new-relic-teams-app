{"version":3,"sources":["components/Loader/Loader.tsx"],"names":["loaderBehavior","customPropTypes","PropTypes","React","UIComponent","createShorthandFactory","commonPropTypes","getOrGenerateIdFromShorthand","withSafeTypeForAs","Box","Text","loaderClassName","loaderSlotClassNames","indicator","label","svg","Loader","props","context","state","visible","delay","labelId","delayTimer","setTimeout","setState","clearTimeout","ElementType","classes","accessibility","variables","styles","unhandledProps","svgElement","create","defaultProps","className","root","attributes","children","id","createCommon","content","number","itemShorthand","inline","bool","labelPosition","oneOf","size","Component","mappedProp","shorthandConfig"],"mappings":"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","sourcesContent":["import { Accessibility, loaderBehavior } from '@fluentui/accessibility';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport {\n  UIComponent,\n  createShorthandFactory,\n  UIComponentProps,\n  commonPropTypes,\n  SizeValue,\n  ShorthandFactory,\n  getOrGenerateIdFromShorthand,\n  ShorthandConfig,\n} from '../../utils';\nimport { WithAsProp, ShorthandValue, withSafeTypeForAs } from '../../types';\nimport Box, { BoxProps } from '../Box/Box';\nimport Text, { TextProps } from '../Text/Text';\n\nexport interface LoaderSlotClassNames {\n  indicator: string;\n  label: string;\n  svg: string;\n}\n\nexport interface LoaderProps extends UIComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility;\n\n  /** Time in milliseconds after component mount before spinner is visible. */\n  delay?: number;\n\n  /** A loader can contain an indicator. */\n  indicator?: ShorthandValue<BoxProps>;\n\n  /** Loaders can appear inline with content. */\n  inline?: boolean;\n\n  /** A loader can contain a label. */\n  label?: ShorthandValue<TextProps>;\n\n  /** A label in the loader can have different positions. */\n  labelPosition?: 'above' | 'below' | 'start' | 'end';\n\n  /** A size of the loader. */\n  size?: SizeValue;\n\n  /** A loader can contain a custom svg element. */\n  svg?: ShorthandValue<BoxProps>;\n}\n\nexport interface LoaderState {\n  visible: boolean;\n  labelId: string;\n}\n\nexport const loaderClassName = 'ui-loader';\nexport const loaderSlotClassNames: LoaderSlotClassNames = {\n  indicator: `${loaderClassName}__indicator`,\n  label: `${loaderClassName}__label`,\n  svg: `${loaderClassName}__svg`,\n};\n\n/**\n * A loader alerts a user that content is being loaded or processed and they should wait for the activity to complete.\n */\nclass Loader extends UIComponent<WithAsProp<LoaderProps>, LoaderState> {\n  static create: ShorthandFactory<LoaderProps>;\n  static displayName = 'Loader';\n  static deprecated_className = loaderClassName;\n  static shorthandConfig: ShorthandConfig<LoaderProps>;\n\n  static propTypes = {\n    ...commonPropTypes.createCommon({\n      children: false,\n      content: false,\n    }),\n    delay: PropTypes.number,\n    indicator: customPropTypes.itemShorthand,\n    inline: PropTypes.bool,\n    label: customPropTypes.itemShorthand,\n    labelPosition: PropTypes.oneOf(['above', 'below', 'start', 'end']),\n    size: customPropTypes.size,\n    svg: customPropTypes.itemShorthand,\n  };\n\n  static defaultProps = {\n    accessibility: loaderBehavior,\n    delay: 0,\n    indicator: {},\n    labelPosition: 'below',\n    svg: '',\n    size: 'medium',\n  };\n\n  delayTimer: number;\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n      visible: this.props.delay === 0,\n      labelId: '',\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    return {\n      labelId: getOrGenerateIdFromShorthand('loader-label-', props.label, state.labelId),\n    };\n  }\n\n  componentDidMount() {\n    const { delay } = this.props;\n\n    if (delay > 0) {\n      // @ts-ignore We have a collision between types from DOM and @types/node\n      this.delayTimer = setTimeout(() => {\n        this.setState({ visible: true });\n      }, delay);\n    }\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.delayTimer);\n  }\n\n  renderComponent({ ElementType, classes, accessibility, variables, styles, unhandledProps }) {\n    const { indicator, label, svg } = this.props;\n    const { visible, labelId } = this.state;\n\n    const svgElement = Box.create(svg, {\n      defaultProps: () => ({ className: loaderSlotClassNames.svg, styles: styles.svg }),\n    });\n\n    return (\n      visible && (\n        <ElementType className={classes.root} {...accessibility.attributes.root} {...unhandledProps}>\n          {Box.create(indicator, {\n            defaultProps: () => ({\n              children: svgElement,\n              className: loaderSlotClassNames.indicator,\n              styles: styles.indicator,\n            }),\n          })}\n          {Text.create(label, {\n            defaultProps: () => ({\n              className: loaderSlotClassNames.label,\n              styles: styles.label,\n              id: labelId,\n            }),\n          })}\n        </ElementType>\n      )\n    );\n  }\n}\n\nLoader.create = createShorthandFactory({ Component: Loader, mappedProp: 'label' });\nLoader.shorthandConfig = { mappedProp: 'label' };\n\n/**\n * A Loader alerts a user to wait for an activity to complete.\n *\n * @accessibility\n * Implements [ARIA progressbar](https://www.w3.org/TR/wai-aria-1.1/#progressbar) role.\n */\nexport default withSafeTypeForAs<typeof Loader, LoaderProps>(Loader);\n"],"file":"Loader.js"}