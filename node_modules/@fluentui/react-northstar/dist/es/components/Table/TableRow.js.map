{"version":3,"sources":["components/Table/TableRow.tsx"],"names":["tableRowBehavior","getElementType","useAccessibility","useStyles","useTelemetry","useUnhandledProps","Ref","customPropTypes","mergeComponentVariables","ThemeContext","PropTypes","React","withSafeTypeForAs","childrenExist","commonPropTypes","createShorthandFactory","TableCell","handleVariablesOverrides","variables","predefinedProps","tableRowClassName","TableRow","props","context","useContext","displayName","telemetry","setStart","setEnd","rowRef","useRef","className","design","styles","items","header","compact","children","accessibility","selected","hasChildren","ElementType","unhandledProps","handledProps","getA11yProps","debugName","actionHandlers","unsetRowTabbable","e","current","setAttribute","performClick","handleClick","mapPropsToBehavior","rtl","mapPropsToStyles","mapPropsToInlineStyles","classes","currentTarget","target","preventDefault","renderCells","item","index","overrideProps","create","defaultProps","element","unstable_wrapWithFocusZone","root","onClick","propTypes","createCommon","content","collectionShorthand","bool","func","Object","keys","Component","mappedArrayProp"],"mappings":"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","sourcesContent":["import { Accessibility, tableRowBehavior, GridRowBehaviorProps } from '@fluentui/accessibility';\nimport { getElementType, useAccessibility, useStyles, useTelemetry, useUnhandledProps } from '@fluentui/react-bindings';\nimport { Ref } from '@fluentui/react-component-ref';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport { mergeComponentVariables } from '@fluentui/styles';\nimport * as _ from 'lodash';\n// @ts-ignore\nimport { ThemeContext } from 'react-fela';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\nimport {\n  FluentComponentStaticProps,\n  ProviderContextPrepared,\n  ShorthandCollection,\n  WithAsProp,\n  withSafeTypeForAs,\n  ComponentEventHandler,\n} from '../../types';\nimport { childrenExist, commonPropTypes, createShorthandFactory, UIComponentProps } from '../../utils';\nimport TableCell, { TableCellProps } from './TableCell';\n\nexport interface TableRowProps extends UIComponentProps {\n  /**\n   * Accessibility behavior if overridden by the user.\n   * */\n  accessibility?: Accessibility<GridRowBehaviorProps>;\n\n  /**\n   * Row cells\n   */\n  items?: ShorthandCollection<TableCellProps>;\n\n  /**\n   * Is the row a table header\n   */\n  header?: boolean;\n\n  /**\n   * Render table in compact mode\n   */\n  compact?: boolean;\n\n  /**\n   * Whether a row is currently selected or not.\n   */\n  selected?: boolean;\n\n  /**\n   * Called on click.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onClick?: ComponentEventHandler<TableRowProps>;\n}\n\nconst handleVariablesOverrides = variables => predefinedProps => ({\n  variables: mergeComponentVariables(variables, predefinedProps.variables),\n});\n\nexport const tableRowClassName = 'ui-table__row';\n\nexport type TableRowStylesProps = Pick<TableRowProps, 'header' | 'compact'>;\n\nconst TableRow: React.FC<WithAsProp<TableRowProps>> & FluentComponentStaticProps<TableRowProps> = props => {\n  const context: ProviderContextPrepared = React.useContext(ThemeContext);\n  const { setStart, setEnd } = useTelemetry(TableRow.displayName, context.telemetry);\n  setStart();\n  const rowRef = React.useRef<HTMLElement>();\n  const { className, design, styles, items, header, compact, children, accessibility, variables, selected } = props;\n\n  const hasChildren = childrenExist(children);\n  const ElementType = getElementType(props);\n  const unhandledProps = useUnhandledProps(TableRow.handledProps, props);\n  const getA11yProps = useAccessibility(accessibility, {\n    debugName: TableRow.displayName,\n    actionHandlers: {\n      // https://github.com/microsoft/fluent-ui-react/issues/2150\n      unsetRowTabbable: e => {\n        rowRef.current.setAttribute('tabindex', '-1');\n      },\n      performClick: e => {\n        handleClick(e);\n      },\n    },\n    mapPropsToBehavior: () => ({\n      selected,\n      header,\n    }),\n    rtl: context.rtl,\n  });\n\n  const { classes } = useStyles<TableRowStylesProps>(TableRow.displayName, {\n    className: tableRowClassName,\n    mapPropsToStyles: () => ({\n      header,\n      compact,\n    }),\n    mapPropsToInlineStyles: () => ({\n      className,\n      design,\n      styles,\n      variables,\n    }),\n    rtl: context.rtl,\n  });\n\n  const handleClick = (e: React.SyntheticEvent) => {\n    if (e.currentTarget === e.target) {\n      _.invoke(props, 'onClick', e, props);\n      e.preventDefault();\n    }\n  };\n\n  const renderCells = () => {\n    return _.map(items, (item: TableCellProps, index: number) => {\n      const overrideProps = handleVariablesOverrides(variables);\n      return TableCell.create(item, {\n        defaultProps: () =>\n          getA11yProps('cell', {\n            ...overrideProps,\n          }),\n      });\n    });\n  };\n\n  const element = (\n    <Ref innerRef={rowRef}>\n      {getA11yProps.unstable_wrapWithFocusZone(\n        <ElementType\n          {...getA11yProps('root', {\n            className: classes.root,\n            onClick: handleClick,\n            ...unhandledProps,\n          })}\n        >\n          {hasChildren && children}\n          {!hasChildren && renderCells()}\n        </ElementType>,\n      )}\n    </Ref>\n  );\n  setEnd();\n  return element;\n};\n\nTableRow.displayName = 'TableRow';\n\nTableRow.propTypes = {\n  ...commonPropTypes.createCommon({\n    content: false,\n  }),\n  items: customPropTypes.collectionShorthand,\n  header: PropTypes.bool,\n  compact: PropTypes.bool,\n  selected: PropTypes.bool,\n  onClick: PropTypes.func,\n};\n\nTableRow.handledProps = Object.keys(TableRow.propTypes) as any;\n\nTableRow.defaultProps = {\n  accessibility: tableRowBehavior,\n};\n\nTableRow.create = createShorthandFactory({ Component: TableRow, mappedArrayProp: 'items' });\n\n/**\n * Component represents a single row in a tabular structure\n */\nexport default withSafeTypeForAs<typeof TableRow, TableRowProps, 'div'>(TableRow);\n"],"file":"TableRow.js"}