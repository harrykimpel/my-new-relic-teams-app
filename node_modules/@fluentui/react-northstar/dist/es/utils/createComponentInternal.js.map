{"version":3,"sources":["utils/createComponentInternal.ts"],"names":["React","ThemeContext","renderComponent","createShorthandFactory","createComponentInternal","displayName","className","shorthandPropName","defaultProps","handledProps","propTypes","actionHandlers","render","mergedDefaultProps","as","FluentComponent","props","ref","useRef","context","useContext","concat","state","config","saveDebug","fluentUIDebug","current","deprecated_className","create","Component","mappedProp"],"mappings":";AACA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAEA;AACA,SAASC,YAAT,QAA6B,YAA7B;AAEA,OAAOC,eAAP,MAAoD,mBAApD;AACA,SAASC,sBAAT,QAAyD,aAAzD;;AAmBA,IAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,OAS8B;AAAA,8BAR5DC,WAQ4D;AAAA,MAR5DA,WAQ4D,iCAR9C,mBAQ8C;AAAA,4BAP5DC,SAO4D;AAAA,MAP5DA,SAO4D,+BAPhD,qBAOgD;AAAA,mCAN5DC,iBAM4D;AAAA,MAN5DA,iBAM4D,sCANxC,UAMwC;AAAA,+BAL5DC,YAK4D;AAAA,MAL5DA,YAK4D,kCAL7C,EAK6C;AAAA,+BAJ5DC,YAI4D;AAAA,MAJ5DA,YAI4D,kCAJ7C,EAI6C;AAAA,MAH5DC,SAG4D,QAH5DA,SAG4D;AAAA,MAF5DC,cAE4D,QAF5DA,cAE4D;AAAA,MAD5DC,OAC4D,QAD5DA,MAC4D;AAC5D,MAAMC,kBAAkB;AACtBC,IAAAA,EAAE,EAAE;AADkB,KAElBN,YAFkB,CAAxB;;AAKA,MAAMO,eAA6C,GAAG,SAAhDA,eAAgD,CAACC,KAAD,EAAkC;AACtF;AACA;AACA,QAAMC,GAAG,GAAGjB,KAAK,CAACkB,MAAN,CAAa,IAAb,CAAZ;AAEA,QAAMC,OAAgC,GAAGnB,KAAK,CAACoB,UAAN,CAAiBnB,YAAjB,CAAzC;AAEA,WAAOC,eAAe,CACpB;AACEI,MAAAA,SAAS,EAATA,SADF;AAEED,MAAAA,WAAW,EAAXA,WAFF;AAGEI,MAAAA,YAAY,EAAE,MAAOC,SAAP,EAAkBW,MAAlB,CAAyBZ,YAAzB,CAHhB;AAIEO,MAAAA,KAAK,EAALA,KAJF;AAKEM,MAAAA,KAAK,EAAE,EALT;AAMEX,MAAAA,cAAc,EAAdA,cANF;AAOEC,MAAAA,MAAM,EAAE,gBAAAW,MAAM;AAAA,eAAIX,OAAM,CAACW,MAAD,EAASP,KAAT,CAAV;AAAA,OAPhB;AAQEQ,MAAAA,SAAS,EAAE,mBAAAC,aAAa;AAAA,eAAKR,GAAG,CAACS,OAAJ,GAAc;AAAED,UAAAA,aAAa,EAAbA;AAAF,SAAnB;AAAA;AAR1B,KADoB,EAWpBN,OAXoB,CAAtB;AAaD,GApBD;;AAsBAJ,EAAAA,eAAe,CAACY,oBAAhB,GAAuCrB,SAAvC;AAEAS,EAAAA,eAAe,CAACa,MAAhB,GAAyBzB,sBAAsB,CAAC;AAC9C0B,IAAAA,SAAS,EAAEhB,kBAAkB,CAACC,EADgB;AAE9CgB,IAAAA,UAAU,EAAEvB;AAFkC,GAAD,CAA/C;AAKAQ,EAAAA,eAAe,CAACV,WAAhB,GAA8BA,WAA9B;AAEAU,EAAAA,eAAe,CAACL,SAAhB,GAA4BA,SAA5B,CArC4D,CAqCrB;;AAEvCK,EAAAA,eAAe,CAACP,YAAhB,GAA+BK,kBAA/B;AAEA,SAAOE,eAAP;AACD,CAnDD;;AAqDA,eAAeX,uBAAf","sourcesContent":["import { AccessibilityActionHandlers } from '@fluentui/react-bindings';\nimport * as React from 'react';\nimport * as _ from 'lodash';\n// @ts-ignore\nimport { ThemeContext } from 'react-fela';\n\nimport renderComponent, { RenderResultConfig } from './renderComponent';\nimport { createShorthandFactory, ShorthandFactory } from './factories';\nimport { ObjectOf, ProviderContextPrepared } from '../types';\n\nexport interface CreateComponentConfig<P> {\n  displayName: string;\n  className?: string;\n  shorthandPropName?: string;\n  defaultProps?: Partial<P>;\n  handledProps?: string[];\n  propTypes?: React.WeakValidationMap<P>;\n  actionHandlers?: AccessibilityActionHandlers;\n  render: (config: RenderResultConfig<P>, props: P) => React.ReactNode;\n}\n\nexport type CreateComponentReturnType<P> = React.FunctionComponent<P> & {\n  deprecated_className: string;\n  create: ShorthandFactory<P>;\n};\n\nconst createComponentInternal = <P extends ObjectOf<any> = any>({\n  displayName = 'FluentUIComponent',\n  className = 'fluent-ui-component',\n  shorthandPropName = 'children',\n  defaultProps = {},\n  handledProps = [],\n  propTypes,\n  actionHandlers,\n  render,\n}: CreateComponentConfig<P>): CreateComponentReturnType<P> => {\n  const mergedDefaultProps = {\n    as: 'div',\n    ...(defaultProps as any),\n  };\n\n  const FluentComponent: CreateComponentReturnType<P> = (props): React.ReactElement<P> => {\n    // Stores debug information for component.\n    // Note that this ref should go as the first one, to be discoverable by debug utils.\n    const ref = React.useRef(null);\n\n    const context: ProviderContextPrepared = React.useContext(ThemeContext);\n\n    return renderComponent(\n      {\n        className,\n        displayName,\n        handledProps: _.keys(propTypes).concat(handledProps),\n        props,\n        state: {},\n        actionHandlers,\n        render: config => render(config, props),\n        saveDebug: fluentUIDebug => (ref.current = { fluentUIDebug }),\n      },\n      context,\n    );\n  };\n\n  FluentComponent.deprecated_className = className;\n\n  FluentComponent.create = createShorthandFactory({\n    Component: mergedDefaultProps.as,\n    mappedProp: shorthandPropName,\n  });\n\n  FluentComponent.displayName = displayName;\n\n  FluentComponent.propTypes = propTypes; // TODO: generate prop types\n\n  FluentComponent.defaultProps = mergedDefaultProps;\n\n  return FluentComponent;\n};\n\nexport default createComponentInternal;\n"],"file":"createComponentInternal.js"}