{"version":3,"sources":["utils/felaStylisEnhancer.ts"],"names":["RULE_TYPE","_Stylis","Stylis","default","stylis","cascade","compress","global","keyframe","preserve","semicolon","felaStylisEnhancer","renderer","_emitChange","change","type","prefixed","declaration","slice"],"mappings":"AAAA,SAASA,SAAT,QAA0B,YAA1B,C,CACA;;AACA,OAAOC,OAAP,MAAoB,QAApB;AAIA;AACA;AACA,IAAMC,MAAM,GAAID,OAAD,CAAiBE,OAAjB,IAA4BF,OAA3C,C,CAEA;;AACA,IAAMG,MAAM,GAAG,IAAIF,MAAJ,CAAW;AACxBG,EAAAA,OAAO,EAAE,KADe;AAExBC,EAAAA,QAAQ,EAAE,KAFc;AAGxBC,EAAAA,MAAM,EAAE,KAHgB;AAIxBC,EAAAA,QAAQ,EAAE,KAJc;AAKxBC,EAAAA,QAAQ,EAAE,KALc;AAMxBC,EAAAA,SAAS,EAAE;AANa,CAAX,CAAf;;AASA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD;AAAA,2BACtBA,QADsB;AAEzBC,IAAAA,WAAW,EAAE,qBAACC,MAAD,EAA4B;AACvC,UAAIA,MAAM,CAACC,IAAP,KAAgBf,SAApB,EAA+B;AAC7B,YAAMgB,QAAgB,GAAGZ,MAAM,CAAC,EAAD,EAAKU,MAAM,CAACG,WAAZ,CAA/B,CAD6B,CAG7B;;AACAH,QAAAA,MAAM,CAACG,WAAP,GAAqBD,QAAQ,CAACE,KAAT,CAAe,CAAf,EAAkB,CAAC,CAAnB,CAArB;AACD;;AAEDN,MAAAA,QAAQ,CAACC,WAAT,CAAqBC,MAArB;AACD;AAXwB;AAAA,CAA3B;;AAcA,eAAeH,kBAAf","sourcesContent":["import { RULE_TYPE } from 'fela-utils';\n// @ts-ignore\nimport _Stylis from 'stylis';\n\nimport { Renderer, RendererChange } from './types';\n\n// `stylis@3` is a CJS library, there are known issues with them:\n// https://github.com/rollup/rollup/issues/1267#issuecomment-446681320\nconst Stylis = (_Stylis as any).default || _Stylis;\n\n// We use Stylis only for vendor prefixing, all other capabilities are disabled\nconst stylis = new Stylis({\n  cascade: false,\n  compress: false,\n  global: false,\n  keyframe: false,\n  preserve: false,\n  semicolon: false,\n});\n\nconst felaStylisEnhancer = (renderer: Renderer) => ({\n  ...renderer,\n  _emitChange: (change: RendererChange) => {\n    if (change.type === RULE_TYPE) {\n      const prefixed: string = stylis('', change.declaration);\n\n      // Fela uses objects by references, it's safe to override properties\n      change.declaration = prefixed.slice(1, -1);\n    }\n\n    renderer._emitChange(change);\n  },\n});\n\nexport default felaStylisEnhancer;\n"],"file":"felaStylisEnhancer.js"}