{"version":3,"sources":["NestingRoot.tsx"],"names":["React","RefStack","NestingContext","NestingRoot","createRef","registry","getContextRefs","parentRef","register","unregister","props","children","getRefs","Component"],"mappings":";;;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAEA,OAAOC,QAAP,MAAqB,kBAArB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;;IAGMC,W;;;;;;;;;;;;;;;;;;+DACO,IAAIF,QAAJ,E;;gEACCD,KAAK,CAACI,SAAN,E;;8DAUF;AAAA,aAAiB,MAAKC,QAAL,CAAcC,cAAd,CAA6B,MAAKC,SAAlC,CAAjB;AAAA,K;;;;;;;wCARU;AAClB,WAAKF,QAAL,CAAcG,QAAd,CAAuB,KAAKD,SAA5B;AACD;;;2CAEsB;AACrB,WAAKF,QAAL,CAAcI,UAAd,CAAyB,KAAKF,SAA9B;AACD;;;6BAIQ;AACP,aACE,oBAAC,cAAD,CAAgB,QAAhB;AAAyB,QAAA,KAAK,EAAE,KAAKF;AAArC,SACG,KAAKK,KAAL,CAAWC,QAAX,CAAoB,KAAKC,OAAzB,EAAkC,KAAKL,SAAvC,CADH,CADF;AAKD;;;;EApBuCP,KAAK,CAACa,S;;AAuBhD,eAAeV,WAAf","sourcesContent":["import * as React from 'react';\n\nimport RefStack from './utils/RefStack';\nimport NestingContext from './NestingContext';\nimport { NestingProps, NodeRef } from './types';\n\nclass NestingRoot<T extends Node> extends React.Component<NestingProps> {\n  registry = new RefStack();\n  parentRef = React.createRef<T>();\n\n  componentDidMount() {\n    this.registry.register(this.parentRef as any);\n  }\n\n  componentWillUnmount() {\n    this.registry.unregister(this.parentRef as any);\n  }\n\n  getRefs = (): NodeRef[] => this.registry.getContextRefs(this.parentRef as any);\n\n  render() {\n    return (\n      <NestingContext.Provider value={this.registry}>\n        {this.props.children(this.getRefs, this.parentRef as any)}\n      </NestingContext.Provider>\n    );\n  }\n}\n\nexport default NestingRoot;\n"],"file":"NestingRoot.js"}