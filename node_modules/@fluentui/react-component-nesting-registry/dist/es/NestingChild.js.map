{"version":3,"sources":["NestingChild.tsx"],"names":["React","NestingContext","NestingChildInner","createRef","props","getContextRefs","childRef","register","unregister","children","getRefs","Component","NestingChild","contextValue"],"mappings":";;;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAEA,OAAOC,cAAP,MAA2B,kBAA3B;;IAKMC,iB;;;;;;;;;;;;;;;;;;+DACOF,KAAK,CAACG,SAAN,E;;8DAUD;AAAA,aAAiB,MAAKC,KAAL,CAAWC,cAAX,CAA0B,MAAKC,QAA/B,CAAjB;AAAA,K;;;;;;;wCARU;AAClB,WAAKF,KAAL,CAAWG,QAAX,CAAoB,KAAKD,QAAzB;AACD;;;2CAEsB;AACrB,WAAKF,KAAL,CAAWI,UAAX,CAAsB,KAAKF,QAA3B;AACD;;;6BAIQ;AACP,aAAO,KAAKF,KAAL,CAAWK,QAAX,CAAoB,KAAKC,OAAzB,EAAkC,KAAKJ,QAAvC,CAAP;AACD;;;;EAf6CN,KAAK,CAACW,S;;AAkBtD,IAAMC,YAAmD,GAAG,SAAtDA,YAAsD;AAAA,MAAGH,QAAH,QAAGA,QAAH;AAAA,SAC1D,oBAAC,cAAD,CAAgB,QAAhB,QACG,UAACI,YAAD;AAAA,WAAuC,oBAAC,iBAAD,EAAuBA,YAAvB,EAAsCJ,QAAtC,CAAvC;AAAA,GADH,CAD0D;AAAA,CAA5D;;AAMA,eAAeG,YAAf","sourcesContent":["import * as React from 'react';\n\nimport NestingContext from './NestingContext';\nimport { NestingContextValue, NestingProps, NodeRef } from './types';\n\ntype NestingChildInnerProps = NestingContextValue & NestingProps;\n\nclass NestingChildInner<T extends Node> extends React.Component<NestingChildInnerProps> {\n  childRef = React.createRef<T>();\n\n  componentDidMount() {\n    this.props.register(this.childRef as any);\n  }\n\n  componentWillUnmount() {\n    this.props.unregister(this.childRef as any);\n  }\n\n  getRefs = (): NodeRef[] => this.props.getContextRefs(this.childRef as any);\n\n  render() {\n    return this.props.children(this.getRefs, this.childRef as any);\n  }\n}\n\nconst NestingChild: React.FunctionComponent<NestingProps> = ({ children }) => (\n  <NestingContext.Consumer>\n    {(contextValue: NestingContextValue) => <NestingChildInner {...contextValue}>{children}</NestingChildInner>}\n  </NestingContext.Consumer>\n);\n\nexport default NestingChild;\n"],"file":"NestingChild.js"}